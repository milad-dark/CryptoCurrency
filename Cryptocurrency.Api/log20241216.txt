2024-12-16 21:04:08.537 +03:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-16 21:04:08.657 +03:30 [DBG] Hosting starting
2024-12-16 21:04:08.690 +03:30 [INF] User profile is available. Using 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-16 21:04:08.705 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-0d0ec42d-d794-44d3-a87a-f0af0c5f979a.xml'.
2024-12-16 21:04:08.722 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-3925336f-5e61-4e30-88d2-e43ae4c829c3.xml'.
2024-12-16 21:04:08.735 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-7c19cd74-54ba-4bf1-80c1-540bf1b5b1da.xml'.
2024-12-16 21:04:08.746 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-9e46a897-4211-4749-a41a-fc10bc40ed96.xml'.
2024-12-16 21:04:08.757 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-f019c0bf-0a74-4c94-875e-34fe2f8ed086.xml'.
2024-12-16 21:04:08.773 +03:30 [DBG] Found key {0d0ec42d-d794-44d3-a87a-f0af0c5f979a}.
2024-12-16 21:04:08.780 +03:30 [DBG] Found key {3925336f-5e61-4e30-88d2-e43ae4c829c3}.
2024-12-16 21:04:08.781 +03:30 [DBG] Found key {7c19cd74-54ba-4bf1-80c1-540bf1b5b1da}.
2024-12-16 21:04:08.782 +03:30 [DBG] Found key {9e46a897-4211-4749-a41a-fc10bc40ed96}.
2024-12-16 21:04:08.783 +03:30 [DBG] Found key {f019c0bf-0a74-4c94-875e-34fe2f8ed086}.
2024-12-16 21:04:08.789 +03:30 [DBG] Considering key {3925336f-5e61-4e30-88d2-e43ae4c829c3} with expiration date 2025-03-08 18:52:05Z as default key.
2024-12-16 21:04:08.792 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 21:04:08.795 +03:30 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-16 21:04:08.797 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 21:04:08.803 +03:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-16 21:04:08.805 +03:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-16 21:04:08.808 +03:30 [DBG] Using key {3925336f-5e61-4e30-88d2-e43ae4c829c3} as the default key.
2024-12-16 21:04:08.810 +03:30 [DBG] Key ring with default key {3925336f-5e61-4e30-88d2-e43ae4c829c3} was loaded during application startup.
2024-12-16 21:04:09.028 +03:30 [INF] Now listening on: https://localhost:7014
2024-12-16 21:04:09.029 +03:30 [INF] Now listening on: http://localhost:5139
2024-12-16 21:04:09.030 +03:30 [DBG] Loaded hosting startup assembly Cryptocurrency.Api
2024-12-16 21:04:09.031 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-12-16 21:04:09.031 +03:30 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-16 21:04:09.032 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-16 21:04:09.070 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2024-12-16 21:04:09.071 +03:30 [INF] Hosting environment: Development
2024-12-16 21:04:09.072 +03:30 [INF] Content root path: D:\Projects\CryptoCurrency\Cryptocurrency.Api
2024-12-16 21:04:09.072 +03:30 [DBG] Hosting started
2024-12-16 21:04:09.201 +03:30 [DBG] Connection id "0HN8TUVCGN07V" accepted.
2024-12-16 21:04:09.203 +03:30 [DBG] Connection id "0HN8TUVCGN07V" started.
2024-12-16 21:04:09.210 +03:30 [DBG] Connection id "0HN8TUVCGN080" accepted.
2024-12-16 21:04:09.211 +03:30 [DBG] Connection id "0HN8TUVCGN080" started.
2024-12-16 21:04:11.593 +03:30 [DBG] Connection id "0HN8TUVCGN081" accepted.
2024-12-16 21:04:11.595 +03:30 [DBG] Connection id "0HN8TUVCGN081" started.
2024-12-16 21:04:11.626 +03:30 [DBG] Connection id "0HN8TUVCGN082" accepted.
2024-12-16 21:04:11.628 +03:30 [DBG] Connection id "0HN8TUVCGN082" started.
2024-12-16 21:04:11.708 +03:30 [DBG] Connection id "0HN8TUVCGN082" received FIN.
2024-12-16 21:04:11.711 +03:30 [DBG] Connection 0HN8TUVCGN081 established using the following protocol: "Tls13"
2024-12-16 21:04:11.711 +03:30 [DBG] Connection 0HN8TUVCGN082 established using the following protocol: "Tls13"
2024-12-16 21:04:11.744 +03:30 [DBG] Connection id "0HN8TUVCGN082" is closed. The last processed stream ID was 0.
2024-12-16 21:04:11.746 +03:30 [DBG] Connection id "0HN8TUVCGN082" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:04:11.750 +03:30 [DBG] The connection queue processing loop for 0HN8TUVCGN082 completed.
2024-12-16 21:04:11.753 +03:30 [DBG] Connection id "0HN8TUVCGN082" stopped.
2024-12-16 21:04:11.798 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/index.html - null null
2024-12-16 21:04:12.059 +03:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-16 21:04:12.074 +03:30 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-16 21:04:12.076 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:12.123 +03:30 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-16 21:04:12.125 +03:30 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-16 21:04:12.137 +03:30 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-16 21:04:12.138 +03:30 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-16 21:04:12.140 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/index.html - 200 null text/html;charset=utf-8 348.048ms
2024-12-16 21:04:12.185 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/swagger-ui.css - null null
2024-12-16 21:04:12.185 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/swagger-ui-bundle.js - null null
2024-12-16 21:04:12.187 +03:30 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-12-16 21:04:12.189 +03:30 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-12-16 21:04:12.191 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:12.192 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:12.194 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/swagger-ui-standalone-preset.js - null null
2024-12-16 21:04:12.200 +03:30 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-12-16 21:04:12.201 +03:30 [INF] The file /swagger-ui.css was not modified
2024-12-16 21:04:12.201 +03:30 [INF] The file /swagger-ui-bundle.js was not modified
2024-12-16 21:04:12.201 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:12.206 +03:30 [DBG] Handled. Status code: 304 File: /swagger-ui.css
2024-12-16 21:04:12.206 +03:30 [DBG] Handled. Status code: 304 File: /swagger-ui-bundle.js
2024-12-16 21:04:12.206 +03:30 [INF] The file /swagger-ui-standalone-preset.js was not modified
2024-12-16 21:04:12.208 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/swagger-ui.css - 304 null text/css 23.3346ms
2024-12-16 21:04:12.209 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/swagger-ui-bundle.js - 304 null text/javascript 23.9685ms
2024-12-16 21:04:12.210 +03:30 [DBG] Handled. Status code: 304 File: /swagger-ui-standalone-preset.js
2024-12-16 21:04:12.221 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/swagger-ui-standalone-preset.js - 304 null text/javascript 27.1446ms
2024-12-16 21:04:12.246 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_vs/browserLink - null null
2024-12-16 21:04:12.246 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - null null
2024-12-16 21:04:12.260 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - 200 13771 application/javascript; charset=utf-8 14.0171ms
2024-12-16 21:04:12.293 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.3926ms
2024-12-16 21:04:12.749 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - null null
2024-12-16 21:04:12.750 +03:30 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-12-16 21:04:12.751 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:12.752 +03:30 [INF] The file /favicon-32x32.png was not modified
2024-12-16 21:04:12.753 +03:30 [DBG] Handled. Status code: 304 File: /favicon-32x32.png
2024-12-16 21:04:12.754 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - 304 null image/png 5.2726ms
2024-12-16 21:04:13.134 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - null null
2024-12-16 21:04:13.137 +03:30 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-16 21:04:13.139 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:04:13.199 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.4473ms
2024-12-16 21:04:19.419 +03:30 [DBG] Authentication of the HTTPS connection timed out.
2024-12-16 21:04:19.427 +03:30 [DBG] Authentication of the HTTPS connection timed out.
2024-12-16 21:04:19.428 +03:30 [DBG] Connection id "0HN8TUVCGN07V" stopped.
2024-12-16 21:04:19.429 +03:30 [DBG] Connection id "0HN8TUVCGN080" stopped.
2024-12-16 21:04:19.430 +03:30 [DBG] Connection id "0HN8TUVCGN07V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:04:19.431 +03:30 [DBG] Connection id "0HN8TUVCGN080" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:04:54.172 +03:30 [DBG] Connection id "0HN8TUVCGN083" accepted.
2024-12-16 21:04:54.172 +03:30 [DBG] Connection id "0HN8TUVCGN083" received FIN.
2024-12-16 21:04:54.186 +03:30 [DBG] Connection id "0HN8TUVCGN084" accepted.
2024-12-16 21:04:54.181 +03:30 [DBG] Connection id "0HN8TUVCGN083" started.
2024-12-16 21:04:54.190 +03:30 [DBG] Connection id "0HN8TUVCGN084" started.
2024-12-16 21:04:54.216 +03:30 [DBG] Connection 0HN8TUVCGN084 established using the following protocol: "Tls13"
2024-12-16 21:04:54.256 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:04:54.256 +03:30 [INF] Request starting HTTP/2 POST https://localhost/api/auth/Login - application/json 55
2024-12-16 21:04:54.300 +03:30 [DBG] Connection id "0HN8TUVCGN083" stopped.
2024-12-16 21:04:54.303 +03:30 [DBG] Connection id "0HN8TUVCGN083" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:04:54.303 +03:30 [DBG] 1 candidate(s) found for the request path '/api/auth/Login'
2024-12-16 21:04:54.307 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/Login'
2024-12-16 21:04:54.310 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api)'
2024-12-16 21:04:54.311 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:04:55.128 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:04:55.133 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:04:55.136 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api)'
2024-12-16 21:04:55.155 +03:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Cryptocurrency.Api.Dtos.LoginRequestDto) on controller Cryptocurrency.Api.Controllers.AuthController (Cryptocurrency.Api).
2024-12-16 21:04:55.159 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-16 21:04:55.160 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:04:55.161 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:04:55.162 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:04:55.163 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:04:55.165 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.AuthController (Cryptocurrency.Api)
2024-12-16 21:04:55.588 +03:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-16 21:04:55.625 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.AuthController (Cryptocurrency.Api)
2024-12-16 21:04:55.639 +03:30 [DBG] Attempting to bind parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto' ...
2024-12-16 21:04:55.641 +03:30 [DBG] Attempting to bind parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto' using the name '' in request data ...
2024-12-16 21:04:55.643 +03:30 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-16 21:04:55.647 +03:30 [DBG] Connection id "0HN8TUVCGN084", Request id "0HN8TUVCGN084:00000001": started reading request body.
2024-12-16 21:04:55.648 +03:30 [DBG] Connection id "0HN8TUVCGN084", Request id "0HN8TUVCGN084:00000001": done reading request body.
2024-12-16 21:04:55.650 +03:30 [DBG] JSON input formatter succeeded, deserializing to type 'Cryptocurrency.Api.Dtos.LoginRequestDto'
2024-12-16 21:04:55.651 +03:30 [DBG] Done attempting to bind parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto'.
2024-12-16 21:04:55.652 +03:30 [DBG] Done attempting to bind parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto'.
2024-12-16 21:04:55.653 +03:30 [DBG] Attempting to validate the bound parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto' ...
2024-12-16 21:04:55.659 +03:30 [DBG] Done attempting to validate the bound parameter 'request' of type 'Cryptocurrency.Api.Dtos.LoginRequestDto'.
2024-12-16 21:04:55.694 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:04:56.383 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:04:56.402 +03:30 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserName == __username_0 && u.Password == __password_1)'
2024-12-16 21:04:56.531 +03:30 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Password (string) Required, 1], [Property: User.UserName (string) Required, 2] }
            SELECT TOP(1) u.UserId, u.Password, u.UserName
            FROM Users AS u
            WHERE (u.UserName == @__username_0) && (u.Password == @__password_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Cryptocurrency.Infrastructure.Data.ApplicationContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-16 21:04:56.558 +03:30 [DBG] Creating DbConnection.
2024-12-16 21:04:56.579 +03:30 [DBG] Created DbConnection. (20ms).
2024-12-16 21:04:56.583 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:04:56.598 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:04:56.603 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 21:04:56.608 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-12-16 21:04:56.613 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-12-16 21:04:56.619 +03:30 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 5), @__password_1='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Password", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."UserName" = @__username_0 AND "u"."Password" = @__password_1
LIMIT 1
2024-12-16 21:04:56.654 +03:30 [INF] Executed DbCommand (36ms) [Parameters=[@__username_0='?' (Size = 5), @__password_1='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."Password", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."UserName" = @__username_0 AND "u"."Password" = @__password_1
LIMIT 1
2024-12-16 21:04:56.677 +03:30 [DBG] Context 'ApplicationContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:04:56.691 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:04:56.697 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 36ms reading results.
2024-12-16 21:04:56.701 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:04:56.704 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (2ms).
2024-12-16 21:04:56.705 +03:30 [INF] Get user:Cryptocurrency.Domain.Models.User
2024-12-16 21:04:56.726 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1028.4397ms.
2024-12-16 21:04:56.729 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:04:56.734 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:04:56.734 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:04:56.735 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:04:56.736 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:04:56.737 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:04:56.744 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api) in 1578.2494ms
2024-12-16 21:04:56.746 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.AuthController.LoginAsync (Cryptocurrency.Api)'
2024-12-16 21:04:56.748 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:04:56.751 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:04:56.752 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 21:04:56.754 +03:30 [INF] Request finished HTTP/2 POST https://localhost/api/auth/Login - 200 null application/json; charset=utf-8 2498.0313ms
2024-12-16 21:06:02.668 +03:30 [DBG] Connection id "0HN8TUVCGN085" received FIN.
2024-12-16 21:06:02.668 +03:30 [DBG] Connection id "0HN8TUVCGN085" accepted.
2024-12-16 21:06:02.671 +03:30 [DBG] Connection id "0HN8TUVCGN085" started.
2024-12-16 21:06:02.671 +03:30 [DBG] Connection id "0HN8TUVCGN086" accepted.
2024-12-16 21:06:02.705 +03:30 [DBG] Connection id "0HN8TUVCGN086" started.
2024-12-16 21:06:02.739 +03:30 [DBG] Connection 0HN8TUVCGN086 established using the following protocol: "Tls13"
2024-12-16 21:06:02.744 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:06:02.746 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:06:02.754 +03:30 [DBG] Connection id "0HN8TUVCGN085" stopped.
2024-12-16 21:06:02.756 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:06:02.757 +03:30 [DBG] Connection id "0HN8TUVCGN085" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:06:02.758 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:06:02.762 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:06:02.762 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:06:02.784 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:06:02.788 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:06:02.789 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:06:02.794 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:06:02.797 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:06:02.800 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:06:02.802 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:06:02.803 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:06:02.805 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:06:02.817 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:06:02.837 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:06:02.839 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:06:02.842 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:06:02.843 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:06:02.844 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:06:02.845 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:06:02.846 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:06:02.858 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:06:02.874 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:06:02.908 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:06:02.909 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:06:03.936 +03:30 [INF] Received HTTP response headers after 1024.2564ms - 200
2024-12-16 21:06:03.938 +03:30 [INF] End processing HTTP request after 1031.5156ms - 200
2024-12-16 21:06:03.959 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:06:03.964 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:06:03.965 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:06:04.467 +03:30 [INF] Received HTTP response headers after 501.1369ms - 200
2024-12-16 21:06:04.469 +03:30 [INF] End processing HTTP request after 504.6339ms - 200
2024-12-16 21:06:04.498 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:06:04.498 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1639.0612ms.
2024-12-16 21:06:04.502 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:06:04.503 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:06:04.504 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:06:04.505 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:06:04.505 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:06:04.506 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:06:04.510 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:06:04.512 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1705.9159ms
2024-12-16 21:06:04.514 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:06:04.516 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:06:04.517 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1771.5616ms
2024-12-16 21:06:04.525 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.540 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.545 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.555 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.563 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.564 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.565 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.566 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.567 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.568 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.569 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.571 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.572 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.576 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.578 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.579 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.580 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:06:04.622 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:07:03.233 +03:30 [DBG] Connection id "0HN8TUVCGN081" received FIN.
2024-12-16 21:07:03.233 +03:30 [DBG] Connection id "0HN8TUVCGN081" is closing.
2024-12-16 21:07:03.235 +03:30 [DBG] Connection id "0HN8TUVCGN081" is closed. The last processed stream ID was 17.
2024-12-16 21:07:03.237 +03:30 [DBG] The connection queue processing loop for 0HN8TUVCGN081 completed.
2024-12-16 21:07:03.238 +03:30 [DBG] Connection id "0HN8TUVCGN081" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:07:03.246 +03:30 [DBG] Connection id "0HN8TUVCGN081" stopped.
2024-12-16 21:07:03.521 +03:30 [DBG] Connection id "0HN8TUVCGN087" accepted.
2024-12-16 21:07:03.521 +03:30 [DBG] Connection id "0HN8TUVCGN087" received FIN.
2024-12-16 21:07:03.523 +03:30 [DBG] Connection id "0HN8TUVCGN088" accepted.
2024-12-16 21:07:03.522 +03:30 [DBG] Connection id "0HN8TUVCGN087" started.
2024-12-16 21:07:03.530 +03:30 [DBG] Connection id "0HN8TUVCGN088" started.
2024-12-16 21:07:03.572 +03:30 [DBG] Connection 0HN8TUVCGN088 established using the following protocol: "Tls13"
2024-12-16 21:07:03.604 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:07:03.604 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetLastSearch - null null
2024-12-16 21:07:03.616 +03:30 [DBG] Connection id "0HN8TUVCGN087" stopped.
2024-12-16 21:07:03.618 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:07:03.619 +03:30 [DBG] Connection id "0HN8TUVCGN087" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:07:03.621 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)' with route pattern 'api/crypto/GetLastSearch' is valid for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:07:03.627 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:07:03.628 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:07:03.654 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:07:03.660 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:07:03.662 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:07:03.666 +03:30 [INF] Route matched with {action = "GetLastSearch", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastSearch() on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:07:03.668 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:07:03.669 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:07:03.672 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:07:03.674 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:07:03.675 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:07:03.677 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:07:03.678 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:07:03.690 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:07:03.692 +03:30 [INF] Cache miss for key: SearchHistory_1. Fetching data...
2024-12-16 21:07:03.729 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:07:03.737 +03:30 [DBG] Compiling query expression: 
'DbSet<SearchHistory>()
    .Include(sh => sh.CryptoSymbol)
    .ThenInclude(ex => ex.ExchangeRates)
    .Where(sh => sh.UserId == __userId_0)'
2024-12-16 21:07:03.746 +03:30 [DBG] Including navigation: 'SearchHistory.CryptoSymbol'.
2024-12-16 21:07:03.748 +03:30 [DBG] Including navigation: 'CryptoSymbol.ExchangeRates'.
2024-12-16 21:07:03.786 +03:30 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SearchHistory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: SearchHistory.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SearchHistory.CryptoSymbolId (int) Required FK Index, 1], [Property: SearchHistory.SearchedAt (DateTime) Required, 2], [Property: SearchHistory.UserId (int) Required, 3] }
            1 -> Dictionary<IProperty, int> { [Property: CryptoSymbol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: CryptoSymbol.Symbol (string) Required MaxLength(10), 5], [Property: CryptoSymbol.UserId (int) Required, 6] }
            2 -> 0
            3 -> 4
            4 -> Dictionary<IProperty, int> { [Property: ExchangeRates.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ExchangeRates.CryptoSymbolId (int) Required FK Index, 8], [Property: ExchangeRates.Currency (string) Required MaxLength(5), 9], [Property: ExchangeRates.Price (decimal) Required, 10], [Property: ExchangeRates.Timestamp (DateTime) Required, 11] }
            5 -> 7
        SELECT s.Id, s.CryptoSymbolId, s.SearchedAt, s.UserId, c.Id, c.Symbol, c.UserId, e.Id, e.CryptoSymbolId, e.Currency, e.Price, e.Timestamp
        FROM SearchHistories AS s
        INNER JOIN CryptoSymbols AS c ON s.CryptoSymbolId == c.Id
        LEFT JOIN ExchangeRates AS e ON c.Id == e.CryptoSymbolId
        WHERE s.UserId == @__userId_0
        ORDER BY s.Id ASC, c.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SearchHistory>, 
    Cryptocurrency.Infrastructure.Data.ApplicationContext, 
    False, 
    False, 
    True
)'
2024-12-16 21:07:03.791 +03:30 [DBG] Creating DbConnection.
2024-12-16 21:07:03.792 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 21:07:03.793 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:07:03.794 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:07:03.795 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 21:07:03.796 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 21:07:03.797 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-12-16 21:07:03.798 +03:30 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:07:03.801 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:07:03.808 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.813 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.814 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.818 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.819 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.821 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.824 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.825 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.826 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.827 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.828 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.830 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.831 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.833 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.835 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.836 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.837 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.838 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.839 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.840 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.840 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.841 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.842 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.843 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.844 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.845 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.846 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.847 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.848 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.849 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.850 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.851 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.851 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.852 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.856 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.857 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.858 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.859 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.860 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.861 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.862 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.862 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.863 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:07:03.864 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:07:03.865 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 58ms reading results.
2024-12-16 21:07:03.866 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:07:03.867 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 21:07:03.868 +03:30 [INF] Retrieved search history for userId: 1
2024-12-16 21:07:03.871 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 180.0513ms.
2024-12-16 21:07:03.872 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:07:03.874 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:07:03.875 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:07:03.875 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:07:03.876 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:07:03.877 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Cryptocurrency.Application.Dtos.SearchHistoryDto, Cryptocurrency.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:07:03.888 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) in 211.9754ms
2024-12-16 21:07:03.889 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:07:03.890 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:07:03.891 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:07:03.892 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 21:07:03.893 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetLastSearch - 200 null application/json; charset=utf-8 289.3325ms
2024-12-16 21:07:57.045 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetLastSearch - null null
2024-12-16 21:07:57.047 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:07:57.048 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)' with route pattern 'api/crypto/GetLastSearch' is valid for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:07:57.049 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:07:57.051 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:07:57.072 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:07:57.076 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:07:57.078 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:07:57.081 +03:30 [INF] Route matched with {action = "GetLastSearch", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastSearch() on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:07:57.083 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:07:57.085 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:07:57.086 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:07:57.087 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:07:57.089 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:08:26.384 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:08:26.384 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:08:31.702 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:08:31.706 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:08:31.716 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:08:31.717 +03:30 [INF] Cache miss for key: SearchHistory_1. Fetching data...
2024-12-16 21:08:31.718 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:08:31.722 +03:30 [DBG] Creating DbConnection.
2024-12-16 21:08:31.723 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 21:08:31.724 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:08:31.725 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:08:31.725 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 21:08:31.726 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 21:08:31.727 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 21:08:31.731 +03:30 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:08:31.733 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:08:31.735 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.736 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.737 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.738 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.739 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.740 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.741 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.741 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.742 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.743 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.748 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.749 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.750 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.751 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.752 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.753 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.753 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.754 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.755 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.756 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.757 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.758 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.759 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.762 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.764 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.765 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.766 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.766 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.767 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.768 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.769 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.770 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.771 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.772 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.773 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.774 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.775 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.777 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.780 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.782 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.783 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.784 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.785 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:08:31.785 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:08:31.786 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 51ms reading results.
2024-12-16 21:08:31.787 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:08:31.788 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 21:08:31.789 +03:30 [INF] Retrieved search history for userId: 1
2024-12-16 21:08:31.790 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.2046ms.
2024-12-16 21:08:31.791 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:08:31.795 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:08:31.795 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:08:31.796 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:08:31.797 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:08:31.798 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Cryptocurrency.Application.Dtos.SearchHistoryDto, Cryptocurrency.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:08:31.802 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) in 34710.5836ms
2024-12-16 21:08:31.802 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:08:31.803 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:08:31.804 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:08:31.805 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 21:08:31.806 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetLastSearch - 200 null application/json; charset=utf-8 34761.3041ms
2024-12-16 21:08:36.413 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 21:08:36.417 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0322ms - processed: 0 items - remaining: 2 items
2024-12-16 21:19:49.503 +03:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-16 21:19:58.815 +03:30 [DBG] Hosting starting
2024-12-16 21:19:58.840 +03:30 [INF] User profile is available. Using 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-16 21:19:58.849 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-0d0ec42d-d794-44d3-a87a-f0af0c5f979a.xml'.
2024-12-16 21:19:58.856 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-3925336f-5e61-4e30-88d2-e43ae4c829c3.xml'.
2024-12-16 21:19:58.857 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-7c19cd74-54ba-4bf1-80c1-540bf1b5b1da.xml'.
2024-12-16 21:19:58.859 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-9e46a897-4211-4749-a41a-fc10bc40ed96.xml'.
2024-12-16 21:19:58.869 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-f019c0bf-0a74-4c94-875e-34fe2f8ed086.xml'.
2024-12-16 21:19:58.873 +03:30 [DBG] Found key {0d0ec42d-d794-44d3-a87a-f0af0c5f979a}.
2024-12-16 21:19:58.877 +03:30 [DBG] Found key {3925336f-5e61-4e30-88d2-e43ae4c829c3}.
2024-12-16 21:19:58.887 +03:30 [DBG] Found key {7c19cd74-54ba-4bf1-80c1-540bf1b5b1da}.
2024-12-16 21:19:58.889 +03:30 [DBG] Found key {9e46a897-4211-4749-a41a-fc10bc40ed96}.
2024-12-16 21:19:58.890 +03:30 [DBG] Found key {f019c0bf-0a74-4c94-875e-34fe2f8ed086}.
2024-12-16 21:19:58.895 +03:30 [DBG] Considering key {3925336f-5e61-4e30-88d2-e43ae4c829c3} with expiration date 2025-03-08 18:52:05Z as default key.
2024-12-16 21:19:58.904 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 21:19:58.910 +03:30 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-16 21:19:58.911 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 21:19:58.925 +03:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-16 21:19:58.927 +03:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-16 21:19:58.940 +03:30 [DBG] Using key {3925336f-5e61-4e30-88d2-e43ae4c829c3} as the default key.
2024-12-16 21:19:58.942 +03:30 [DBG] Key ring with default key {3925336f-5e61-4e30-88d2-e43ae4c829c3} was loaded during application startup.
2024-12-16 21:19:59.094 +03:30 [INF] Now listening on: https://localhost:7014
2024-12-16 21:19:59.095 +03:30 [INF] Now listening on: http://localhost:5139
2024-12-16 21:19:59.096 +03:30 [DBG] Loaded hosting startup assembly Cryptocurrency.Api
2024-12-16 21:19:59.097 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-12-16 21:19:59.097 +03:30 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-16 21:19:59.098 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-16 21:19:59.126 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2024-12-16 21:19:59.128 +03:30 [INF] Hosting environment: Development
2024-12-16 21:19:59.129 +03:30 [INF] Content root path: D:\Projects\CryptoCurrency\Cryptocurrency.Api
2024-12-16 21:19:59.130 +03:30 [DBG] Hosting started
2024-12-16 21:19:59.337 +03:30 [DBG] Connection id "0HN8TV87LTAQL" accepted.
2024-12-16 21:19:59.338 +03:30 [DBG] Connection id "0HN8TV87LTAQL" started.
2024-12-16 21:19:59.347 +03:30 [DBG] Connection id "0HN8TV87LTAQM" accepted.
2024-12-16 21:19:59.350 +03:30 [DBG] Connection id "0HN8TV87LTAQM" started.
2024-12-16 21:19:59.372 +03:30 [DBG] Connection id "0HN8TV87LTAQL" received FIN.
2024-12-16 21:19:59.372 +03:30 [DBG] Connection id "0HN8TV87LTAQM" received FIN.
2024-12-16 21:19:59.528 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:19:59.528 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:19:59.557 +03:30 [DBG] Connection id "0HN8TV87LTAQM" stopped.
2024-12-16 21:19:59.557 +03:30 [DBG] Connection id "0HN8TV87LTAQL" stopped.
2024-12-16 21:19:59.560 +03:30 [DBG] Connection id "0HN8TV87LTAQL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:19:59.560 +03:30 [DBG] Connection id "0HN8TV87LTAQM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:19:59.749 +03:30 [DBG] Connection id "0HN8TV87LTAQN" accepted.
2024-12-16 21:19:59.750 +03:30 [DBG] Connection id "0HN8TV87LTAQN" started.
2024-12-16 21:19:59.782 +03:30 [DBG] Connection 0HN8TV87LTAQN established using the following protocol: "Tls13"
2024-12-16 21:19:59.824 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/index.html - null null
2024-12-16 21:19:59.924 +03:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-16 21:19:59.937 +03:30 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-16 21:19:59.938 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:19:59.975 +03:30 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-16 21:19:59.977 +03:30 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-16 21:19:59.987 +03:30 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-16 21:19:59.988 +03:30 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-16 21:19:59.991 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/index.html - 200 null text/html;charset=utf-8 169.7655ms
2024-12-16 21:20:00.103 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_vs/browserLink - null null
2024-12-16 21:20:00.103 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - null null
2024-12-16 21:20:00.123 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - 200 13771 application/javascript; charset=utf-8 20.2534ms
2024-12-16 21:20:00.140 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.1839ms
2024-12-16 21:20:00.158 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - null null
2024-12-16 21:20:00.159 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/favicon-16x16.png - null null
2024-12-16 21:20:00.161 +03:30 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-12-16 21:20:00.164 +03:30 [DBG] No candidates found for the request path '/swagger/favicon-16x16.png'
2024-12-16 21:20:00.165 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:20:00.165 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:20:00.210 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - null null
2024-12-16 21:20:00.274 +03:30 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2024-12-16 21:20:00.274 +03:30 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2024-12-16 21:20:00.275 +03:30 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-16 21:20:00.284 +03:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-12-16 21:20:00.288 +03:30 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-12-16 21:20:00.289 +03:30 [DBG] Request did not match any endpoints
2024-12-16 21:20:00.291 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - 499 628 image/png 133.0435ms
2024-12-16 21:20:00.295 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/favicon-16x16.png - 499 665 image/png 135.8501ms
2024-12-16 21:20:00.355 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.6496ms
2024-12-16 21:20:03.718 +03:30 [DBG] Connection id "0HN8TV87LTAQO" accepted.
2024-12-16 21:20:03.718 +03:30 [DBG] Connection id "0HN8TV87LTAQO" received FIN.
2024-12-16 21:20:03.719 +03:30 [DBG] Connection id "0HN8TV87LTAQO" started.
2024-12-16 21:20:03.720 +03:30 [DBG] Connection id "0HN8TV87LTAQP" accepted.
2024-12-16 21:20:03.750 +03:30 [DBG] Connection id "0HN8TV87LTAQP" started.
2024-12-16 21:20:03.783 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:03.784 +03:30 [DBG] Connection 0HN8TV87LTAQP established using the following protocol: "Tls13"
2024-12-16 21:20:03.787 +03:30 [DBG] Connection id "0HN8TV87LTAQO" stopped.
2024-12-16 21:20:03.789 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetLastSearch - null null
2024-12-16 21:20:03.790 +03:30 [DBG] Connection id "0HN8TV87LTAQO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:03.795 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:20:03.797 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)' with route pattern 'api/crypto/GetLastSearch' is valid for the request path '/api/crypto/GetLastSearch'
2024-12-16 21:20:03.799 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:20:03.800 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:03.894 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:03.899 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:03.902 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:20:03.914 +03:30 [INF] Route matched with {action = "GetLastSearch", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastSearch() on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:03.918 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:03.921 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:03.923 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:03.924 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:03.925 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:03.940 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:04.039 +03:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-16 21:20:04.057 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:04.090 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:04.094 +03:30 [INF] Cache miss for key: SearchHistory_1. Fetching data...
2024-12-16 21:20:04.492 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:04.518 +03:30 [DBG] Compiling query expression: 
'DbSet<SearchHistory>()
    .Include(sh => sh.CryptoSymbol)
    .ThenInclude(ex => ex.ExchangeRates)
    .Where(sh => sh.UserId == __userId_0)'
2024-12-16 21:20:04.572 +03:30 [DBG] Including navigation: 'SearchHistory.CryptoSymbol'.
2024-12-16 21:20:04.574 +03:30 [DBG] Including navigation: 'CryptoSymbol.ExchangeRates'.
2024-12-16 21:20:04.683 +03:30 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SearchHistory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: SearchHistory.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SearchHistory.CryptoSymbolId (int) Required FK Index, 1], [Property: SearchHistory.SearchedAt (DateTime) Required, 2], [Property: SearchHistory.UserId (int) Required, 3] }
            1 -> Dictionary<IProperty, int> { [Property: CryptoSymbol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: CryptoSymbol.Symbol (string) Required MaxLength(10), 5], [Property: CryptoSymbol.UserId (int) Required, 6] }
            2 -> 0
            3 -> 4
            4 -> Dictionary<IProperty, int> { [Property: ExchangeRates.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ExchangeRates.CryptoSymbolId (int) Required FK Index, 8], [Property: ExchangeRates.Currency (string) Required MaxLength(5), 9], [Property: ExchangeRates.Price (decimal) Required, 10], [Property: ExchangeRates.Timestamp (DateTime) Required, 11] }
            5 -> 7
        SELECT s.Id, s.CryptoSymbolId, s.SearchedAt, s.UserId, c.Id, c.Symbol, c.UserId, e.Id, e.CryptoSymbolId, e.Currency, e.Price, e.Timestamp
        FROM SearchHistories AS s
        INNER JOIN CryptoSymbols AS c ON s.CryptoSymbolId == c.Id
        LEFT JOIN ExchangeRates AS e ON c.Id == e.CryptoSymbolId
        WHERE s.UserId == @__userId_0
        ORDER BY s.Id ASC, c.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SearchHistory>, 
    Cryptocurrency.Infrastructure.Data.ApplicationContext, 
    False, 
    False, 
    True
)'
2024-12-16 21:20:04.706 +03:30 [DBG] Creating DbConnection.
2024-12-16 21:20:04.715 +03:30 [DBG] Created DbConnection. (6ms).
2024-12-16 21:20:04.718 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:20:04.727 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:20:04.731 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 21:20:04.737 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-12-16 21:20:04.740 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-12-16 21:20:04.745 +03:30 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:20:04.760 +03:30 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 21:20:04.786 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.806 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.809 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.817 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.818 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.819 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.824 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.829 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.832 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.834 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.835 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.836 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.837 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.838 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.839 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.840 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.841 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.842 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.842 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.843 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.844 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.848 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.849 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.850 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.851 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.852 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.853 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.854 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.855 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.855 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.856 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.857 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.858 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.859 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.862 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.863 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.864 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.866 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.867 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.867 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.869 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.869 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.870 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:04.874 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:20:04.879 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 111ms reading results.
2024-12-16 21:20:04.882 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 21:20:04.885 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (3ms).
2024-12-16 21:20:04.886 +03:30 [INF] Retrieved search history for userId: 1
2024-12-16 21:20:04.889 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 796.9236ms.
2024-12-16 21:20:04.892 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:04.894 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:04.896 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:04.898 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:04.899 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:04.901 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Cryptocurrency.Application.Dtos.SearchHistoryDto, Cryptocurrency.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:04.920 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) in 991.0296ms
2024-12-16 21:20:04.922 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 21:20:04.925 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:04.928 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 21:20:04.931 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (3ms).
2024-12-16 21:20:04.933 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetLastSearch - 200 null application/json; charset=utf-8 1144.385ms
2024-12-16 21:20:32.018 +03:30 [DBG] Connection id "0HN8TV87LTAQQ" accepted.
2024-12-16 21:20:32.019 +03:30 [DBG] Connection id "0HN8TV87LTAQQ" received FIN.
2024-12-16 21:20:32.019 +03:30 [DBG] Connection id "0HN8TV87LTAQQ" started.
2024-12-16 21:20:32.019 +03:30 [DBG] Connection id "0HN8TV87LTAQR" accepted.
2024-12-16 21:20:32.060 +03:30 [DBG] Connection id "0HN8TV87LTAQR" started.
2024-12-16 21:20:32.068 +03:30 [DBG] Connection id "0HN8TV87LTAQS" received FIN.
2024-12-16 21:20:32.102 +03:30 [DBG] Connection id "0HN8TV87LTAQS" accepted.
2024-12-16 21:20:32.102 +03:30 [DBG] Connection 0HN8TV87LTAQR established using the following protocol: "Tls13"
2024-12-16 21:20:32.106 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.108 +03:30 [DBG] Connection id "0HN8TV87LTAQT" accepted.
2024-12-16 21:20:32.115 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.124 +03:30 [DBG] Connection id "0HN8TV87LTAQQ" stopped.
2024-12-16 21:20:32.107 +03:30 [DBG] Connection id "0HN8TV87LTAQS" started.
2024-12-16 21:20:32.124 +03:30 [DBG] Connection id "0HN8TV87LTAQU" received FIN.
2024-12-16 21:20:32.127 +03:30 [DBG] Connection id "0HN8TV87LTAQQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.127 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.151 +03:30 [DBG] Connection id "0HN8TV87LTAQU" accepted.
2024-12-16 21:20:32.179 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.184 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.184 +03:30 [DBG] Connection id "0HN8TV87LTAQU" started.
2024-12-16 21:20:32.124 +03:30 [DBG] Connection id "0HN8TV87LTAQT" started.
2024-12-16 21:20:32.184 +03:30 [DBG] Connection id "0HN8TV87LTAQV" accepted.
2024-12-16 21:20:32.186 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.216 +03:30 [DBG] Connection id "0HN8TV87LTAQV" started.
2024-12-16 21:20:32.216 +03:30 [DBG] Connection 0HN8TV87LTAQT established using the following protocol: "Tls13"
2024-12-16 21:20:32.232 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.189 +03:30 [DBG] Connection id "0HN8TV87LTAQS" stopped.
2024-12-16 21:20:32.251 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.259 +03:30 [DBG] Connection 0HN8TV87LTAQV established using the following protocol: "Tls13"
2024-12-16 21:20:32.253 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.279 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.284 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.282 +03:30 [DBG] Connection id "0HN8TV87LTAQU" stopped.
2024-12-16 21:20:32.227 +03:30 [DBG] Connection id "0HN8TV87LTAR0" received FIN.
2024-12-16 21:20:32.288 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.292 +03:30 [DBG] Connection id "0HN8TV87LTAQU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.291 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.285 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.296 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.293 +03:30 [DBG] Connection id "0HN8TV87LTAR0" accepted.
2024-12-16 21:20:32.293 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.298 +03:30 [DBG] Connection id "0HN8TV87LTAR0" started.
2024-12-16 21:20:32.295 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.297 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.298 +03:30 [DBG] Connection id "0HN8TV87LTAR1" received FIN.
2024-12-16 21:20:32.325 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.338 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.259 +03:30 [DBG] Connection id "0HN8TV87LTAQS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.359 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.359 +03:30 [DBG] Connection id "0HN8TV87LTAR1" accepted.
2024-12-16 21:20:32.360 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.384 +03:30 [DBG] Connection id "0HN8TV87LTAR0" stopped.
2024-12-16 21:20:32.382 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:32.404 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.382 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.385 +03:30 [DBG] Connection id "0HN8TV87LTAR2" accepted.
2024-12-16 21:20:32.385 +03:30 [DBG] Connection id "0HN8TV87LTAR1" started.
2024-12-16 21:20:32.416 +03:30 [DBG] Connection id "0HN8TV87LTAR2" started.
2024-12-16 21:20:32.405 +03:30 [DBG] Connection id "0HN8TV87LTAR0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.407 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:32.455 +03:30 [DBG] Connection 0HN8TV87LTAR2 established using the following protocol: "Tls13"
2024-12-16 21:20:32.410 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.479 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:32.416 +03:30 [DBG] Connection id "0HN8TV87LTAR3" accepted.
2024-12-16 21:20:32.415 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.483 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:32.482 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.484 +03:30 [DBG] Connection id "0HN8TV87LTAR3" started.
2024-12-16 21:20:32.479 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.486 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:32.487 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:32.485 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.484 +03:30 [DBG] Connection id "0HN8TV87LTAR4" received FIN.
2024-12-16 21:20:32.481 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.493 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:32.494 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:32.493 +03:30 [DBG] Connection 0HN8TV87LTAR3 established using the following protocol: "Tls13"
2024-12-16 21:20:32.495 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:32.499 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.500 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:32.501 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.496 +03:30 [DBG] Connection id "0HN8TV87LTAR4" accepted.
2024-12-16 21:20:32.492 +03:30 [DBG] Connection id "0HN8TV87LTAR1" stopped.
2024-12-16 21:20:32.509 +03:30 [DBG] Connection id "0HN8TV87LTAR4" started.
2024-12-16 21:20:32.506 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.506 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:32.509 +03:30 [DBG] Connection id "0HN8TV87LTAR5" accepted.
2024-12-16 21:20:32.553 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:32.504 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:32.569 +03:30 [DBG] Connection id "0HN8TV87LTAR6" received FIN.
2024-12-16 21:20:32.569 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.575 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:32.577 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:32.508 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.510 +03:30 [DBG] Connection id "0HN8TV87LTAR1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.565 +03:30 [DBG] Connection id "0HN8TV87LTAR5" started.
2024-12-16 21:20:32.497 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.582 +03:30 [DBG] Connection id "0HN8TV87LTAR6" accepted.
2024-12-16 21:20:32.587 +03:30 [DBG] Connection id "0HN8TV87LTAR4" stopped.
2024-12-16 21:20:32.583 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.589 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.590 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:32.591 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.595 +03:30 [DBG] Connection id "0HN8TV87LTAR6" started.
2024-12-16 21:20:32.594 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.600 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:32.602 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.600 +03:30 [DBG] Connection 0HN8TV87LTAR5 established using the following protocol: "Tls13"
2024-12-16 21:20:32.601 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:32.670 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.668 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.668 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.602 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.598 +03:30 [DBG] Connection id "0HN8TV87LTAR4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.668 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:32.632 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.595 +03:30 [DBG] Connection id "0HN8TV87LTAR7" accepted.
2024-12-16 21:20:32.677 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:32.680 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.681 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.682 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:32.682 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.687 +03:30 [DBG] Connection id "0HN8TV87LTAR7" started.
2024-12-16 21:20:32.690 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.692 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.715 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.693 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.719 +03:30 [DBG] Connection 0HN8TV87LTAR7 established using the following protocol: "Tls13"
2024-12-16 21:20:32.688 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.718 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.719 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.719 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.722 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.713 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.742 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.744 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.745 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.686 +03:30 [DBG] Connection id "0HN8TV87LTAR6" stopped.
2024-12-16 21:20:32.686 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:32.764 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.769 +03:30 [DBG] Connection id "0HN8TV87LTAR6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:32.754 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:32.765 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.768 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:32.761 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.793 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.801 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.792 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:32.721 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:32.687 +03:30 [DBG] Connection id "0HN8TV87LTAR8" received FIN.
2024-12-16 21:20:32.813 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:32.816 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:32.815 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:32.817 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.814 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:32.823 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:32.825 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.827 +03:30 [DBG] Connection id "0HN8TV87LTAR8" accepted.
2024-12-16 21:20:32.828 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:32.830 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:32.831 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.844 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:32.833 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:32.850 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:32.849 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.860 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:32.858 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:32.840 +03:30 [DBG] Connection id "0HN8TV87LTAR9" accepted.
2024-12-16 21:20:32.840 +03:30 [DBG] Connection id "0HN8TV87LTAR8" started.
2024-12-16 21:20:32.878 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:32.881 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:32.927 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.881 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:32.883 +03:30 [DBG] Connection id "0HN8TV87LTARA" received FIN.
2024-12-16 21:20:32.877 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:32.951 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:32.950 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:32.951 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:32.881 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:32.955 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:32.953 +03:30 [DBG] Connection id "0HN8TV87LTARA" accepted.
2024-12-16 21:20:32.992 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:32.995 +03:30 [DBG] Connection id "0HN8TV87LTARB" accepted.
2024-12-16 21:20:32.997 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.995 +03:30 [DBG] Connection id "0HN8TV87LTARA" started.
2024-12-16 21:20:32.999 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:32.998 +03:30 [DBG] Connection id "0HN8TV87LTARC" received FIN.
2024-12-16 21:20:33.019 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.039 +03:30 [DBG] Connection id "0HN8TV87LTARC" accepted.
2024-12-16 21:20:33.059 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.069 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:33.070 +03:30 [DBG] Connection id "0HN8TV87LTARD" accepted.
2024-12-16 21:20:33.070 +03:30 [DBG] Connection id "0HN8TV87LTARC" started.
2024-12-16 21:20:33.080 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.083 +03:30 [DBG] Connection id "0HN8TV87LTARA" stopped.
2024-12-16 21:20:33.083 +03:30 [DBG] Connection id "0HN8TV87LTARD" started.
2024-12-16 21:20:32.954 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.123 +03:30 [DBG] Connection id "0HN8TV87LTARA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:33.110 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:32.978 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:32.998 +03:30 [DBG] Connection id "0HN8TV87LTARB" started.
2024-12-16 21:20:32.949 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:33.152 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.149 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:20:33.149 +03:30 [DBG] Connection 0HN8TV87LTARD established using the following protocol: "Tls13"
2024-12-16 21:20:33.150 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.160 +03:30 [DBG] Connection 0HN8TV87LTARB established using the following protocol: "Tls13"
2024-12-16 21:20:33.161 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.165 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:33.164 +03:30 [DBG] Connection id "0HN8TV87LTARC" stopped.
2024-12-16 21:20:33.166 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.189 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:33.190 +03:30 [DBG] Connection id "0HN8TV87LTARC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:33.205 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:33.153 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.167 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:33.160 +03:30 [DBG] Connection id "0HN8TV87LTAR8" stopped.
2024-12-16 21:20:32.837 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.212 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.214 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.216 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.838 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:32.883 +03:30 [DBG] Connection id "0HN8TV87LTAR9" started.
2024-12-16 21:20:33.217 +03:30 [DBG] Connection id "0HN8TV87LTAR8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:20:33.218 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:33.220 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.220 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:33.217 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:33.221 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.247 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:33.247 +03:30 [DBG] Connection 0HN8TV87LTAR9 established using the following protocol: "Tls13"
2024-12-16 21:20:33.248 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.257 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:33.250 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.252 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:33.253 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:33.259 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:33.261 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.259 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.261 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:33.263 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:33.289 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:33.290 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.313 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:33.286 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:33.315 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:33.318 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.324 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:33.314 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:33.288 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:33.328 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:33.329 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:33.331 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.332 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.333 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.335 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:33.338 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.339 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:33.340 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.342 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:33.343 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.345 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.346 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:33.347 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.348 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.350 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:33.355 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.351 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.353 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:33.352 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:33.368 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.372 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.388 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.369 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:33.373 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.374 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:33.397 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:33.398 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.399 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.409 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.400 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:33.403 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.404 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:33.407 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:33.411 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.410 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.412 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.420 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.414 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.415 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.418 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:33.437 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.438 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.440 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.441 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.442 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:33.443 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.443 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.444 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.446 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.447 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:33.448 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.449 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.452 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.455 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.453 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.454 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:33.465 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.466 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.467 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.469 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.468 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.469 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:33.480 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.480 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.482 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.483 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.484 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:33.485 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.486 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.487 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.488 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.493 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.492 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.509 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.511 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.490 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:33.512 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.513 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.522 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.538 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.523 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.539 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.549 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.550 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:33.550 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.551 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.552 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.553 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.554 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.554 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:33.572 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.577 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.592 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.593 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:33.594 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:33.604 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:33.605 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:33.606 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:33.606 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:34.162 +03:30 [INF] Received HTTP response headers after 739.734ms - 200
2024-12-16 21:20:34.166 +03:30 [INF] End processing HTTP request after 766.7786ms - 200
2024-12-16 21:20:34.189 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:34.195 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.195 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.319 +03:30 [INF] Received HTTP response headers after 1363.0266ms - 200
2024-12-16 21:20:34.321 +03:30 [INF] End processing HTTP request after 1440.4137ms - 200
2024-12-16 21:20:34.614 +03:30 [INF] Received HTTP response headers after 1656.8337ms - 200
2024-12-16 21:20:34.616 +03:30 [INF] End processing HTTP request after 1735.9779ms - 200
2024-12-16 21:20:34.618 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:34.619 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.620 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.769 +03:30 [INF] Received HTTP response headers after 1601.0458ms - 200
2024-12-16 21:20:34.777 +03:30 [INF] Received HTTP response headers after 579.3276ms - 200
2024-12-16 21:20:34.777 +03:30 [INF] End processing HTTP request after 1625.6544ms - 200
2024-12-16 21:20:34.780 +03:30 [INF] End processing HTTP request after 585.0528ms - 200
2024-12-16 21:20:34.781 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:34.783 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.785 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.820 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:34.821 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.827 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:34.831 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:34.832 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1443.6848ms.
2024-12-16 21:20:34.860 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:34.862 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:34.863 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:34.865 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:34.866 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:34.869 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:34.869 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:34.874 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1654.2505ms
2024-12-16 21:20:34.875 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:34.877 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:34.880 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2379.1552ms
2024-12-16 21:20:34.888 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.896 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.902 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.907 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.910 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.911 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.913 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.915 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.916 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.919 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.920 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.923 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.926 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.927 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.928 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.930 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.932 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:34.978 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:34.986 +03:30 [INF] Received HTTP response headers after 1462.1426ms - 200
2024-12-16 21:20:34.995 +03:30 [INF] End processing HTTP request after 1503.2328ms - 200
2024-12-16 21:20:34.996 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:34.998 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.000 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.037 +03:30 [INF] Received HTTP response headers after 1542.4321ms - 200
2024-12-16 21:20:35.038 +03:30 [INF] End processing HTTP request after 1555.2578ms - 200
2024-12-16 21:20:35.040 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:35.040 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.041 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.079 +03:30 [INF] Received HTTP response headers after 458.611ms - 200
2024-12-16 21:20:35.081 +03:30 [INF] End processing HTTP request after 462.4144ms - 200
2024-12-16 21:20:35.084 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.084 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2255.9549ms.
2024-12-16 21:20:35.087 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.089 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.089 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.091 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.092 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.093 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.096 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2507.9449ms
2024-12-16 21:20:35.099 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.113 +03:30 [INF] Received HTTP response headers after 1535.5237ms - 200
2024-12-16 21:20:35.114 +03:30 [INF] End processing HTTP request after 1560.9841ms - 200
2024-12-16 21:20:35.116 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:35.117 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.118 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.142 +03:30 [INF] Received HTTP response headers after 355.3187ms - 200
2024-12-16 21:20:35.143 +03:30 [INF] End processing HTTP request after 360.0333ms - 200
2024-12-16 21:20:35.146 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.146 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2036.0604ms.
2024-12-16 21:20:35.148 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.149 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.150 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.151 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.151 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.153 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.154 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2234.7897ms
2024-12-16 21:20:35.155 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2871.4805ms
2024-12-16 21:20:35.155 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.164 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.172 +03:30 [INF] Received HTTP response headers after 52.1426ms - 200
2024-12-16 21:20:35.188 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_Database()
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.ContextInitialized(IDiagnosticsLogger`1 diagnostics, DbContext context, DbContextOptions contextOptions)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.191 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.191 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.192 +03:30 [INF] End processing HTTP request after 74.9694ms - 200
2024-12-16 21:20:35.202 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.203 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2533.4063ms
2024-12-16 21:20:35.205 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.206 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.206 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1655.1254ms.
2024-12-16 21:20:35.208 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.209 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.210 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.212 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.215 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.216 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.217 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.218 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.219 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.221 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.222 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.222 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.223 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.224 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.225 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.226 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.227 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.228 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.229 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.230 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.231 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1785.8305ms
2024-12-16 21:20:35.232 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.233 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.234 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.238 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.239 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.240 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.242 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.242 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.243 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2522.5075ms
2024-12-16 21:20:35.244 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.246 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.249 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.249 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.253 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.254 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.255 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.256 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.276 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.295 +03:30 [INF] Received HTTP response headers after 463.8788ms - 200
2024-12-16 21:20:35.295 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.300 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.304 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.301 +03:30 [INF] End processing HTTP request after 480.0555ms - 200
2024-12-16 21:20:35.316 +03:30 [INF] Received HTTP response headers after 273.1362ms - 200
2024-12-16 21:20:35.319 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.321 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.321 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2524.7809ms.
2024-12-16 21:20:35.338 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.351 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.323 +03:30 [INF] End processing HTTP request after 282.0556ms - 200
2024-12-16 21:20:35.361 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.362 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.364 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.365 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.365 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1895.8453ms.
2024-12-16 21:20:35.370 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.372 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.374 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.376 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.377 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.378 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.380 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.381 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.383 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.386 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.388 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.388 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.390 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.391 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.392 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.406 +03:30 [INF] Received HTTP response headers after 1849.063ms - 200
2024-12-16 21:20:35.398 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2899.552ms
2024-12-16 21:20:35.393 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.392 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.407 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.410 +03:30 [INF] End processing HTTP request after 1859.3474ms - 200
2024-12-16 21:20:35.411 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.412 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.413 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.414 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.415 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:35.416 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.418 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.420 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.421 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.422 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.422 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3307.7291ms
2024-12-16 21:20:35.424 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.426 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2054.1226ms
2024-12-16 21:20:35.427 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.428 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.432 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.460 +03:30 [INF] Received HTTP response headers after 458.7607ms - 200
2024-12-16 21:20:35.437 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.435 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.460 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.461 +03:30 [INF] End processing HTTP request after 462.8932ms - 200
2024-12-16 21:20:35.462 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.464 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.465 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.467 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.467 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1982.1217ms.
2024-12-16 21:20:35.472 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.468 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.471 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.469 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2304.3456ms
2024-12-16 21:20:35.480 +03:30 [INF] Received HTTP response headers after 41.7623ms - 200
2024-12-16 21:20:35.480 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.481 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.482 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.483 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.486 +03:30 [INF] End processing HTTP request after 64.5072ms - 200
2024-12-16 21:20:35.488 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.490 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.492 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.494 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.496 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.496 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1956.4873ms.
2024-12-16 21:20:35.496 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.497 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.498 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.499 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.500 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.501 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.502 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.505 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.506 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.508 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.509 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.513 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.534 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.512 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.511 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.514 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.546 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.550 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.550 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.551 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.552 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.553 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.555 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.562 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.563 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2212.3556ms
2024-12-16 21:20:35.564 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.565 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.566 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.566 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.592 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.567 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.568 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.603 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.603 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.605 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.606 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.607 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.614 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.615 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.616 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3135.0262ms
2024-12-16 21:20:35.617 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2174.6718ms
2024-12-16 21:20:35.618 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.619 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.622 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.623 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.626 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.627 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.628 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.629 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.630 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2463.0294ms
2024-12-16 21:20:35.631 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.632 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.635 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.637 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.640 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.641 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.642 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.661 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.677 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.677 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.683 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.717 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:35.750 +03:30 [INF] Received HTTP response headers after 2142.4851ms - 200
2024-12-16 21:20:35.751 +03:30 [INF] End processing HTTP request after 2145.5138ms - 200
2024-12-16 21:20:35.752 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:35.753 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.754 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:35.798 +03:30 [INF] Received HTTP response headers after 42.7109ms - 200
2024-12-16 21:20:35.798 +03:30 [INF] End processing HTTP request after 45.1891ms - 200
2024-12-16 21:20:35.800 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:35.800 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2194.7819ms.
2024-12-16 21:20:35.800 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:35.802 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:35.803 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.804 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:35.806 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:35.807 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:35.806 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.808 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:35.809 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.810 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:35.813 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.814 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2291.6368ms
2024-12-16 21:20:35.815 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.816 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:35.817 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.818 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:35.819 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.820 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2561.608ms
2024-12-16 21:20:35.821 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.826 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.827 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.828 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.830 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.831 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.832 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.833 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.834 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.835 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:35.871 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:36.079 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.082 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.084 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.086 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.086 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.108 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.111 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.112 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.112 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.114 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.115 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.116 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.119 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.120 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.122 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.123 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.123 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.124 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.125 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.126 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.127 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.128 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.140 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.141 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.141 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.142 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.160 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.163 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.164 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.165 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.166 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.187 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.187 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.190 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.192 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.193 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.194 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.195 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.196 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.199 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.200 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.202 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.214 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.222 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.223 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.229 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.229 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.230 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.232 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.232 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.233 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.234 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.235 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.236 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.240 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.241 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.243 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.244 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.242 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.246 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.247 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.245 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.248 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.249 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.259 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.260 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.260 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.261 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.263 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.262 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.265 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.266 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.266 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.268 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.269 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.272 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.287 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.296 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.298 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.299 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.300 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.301 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.322 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.323 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.323 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.327 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.328 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.346 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.347 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.349 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.350 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.351 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.351 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.354 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.356 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.359 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.360 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.361 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.363 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.385 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.387 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.406 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.417 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.406 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.415 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.428 +03:30 [INF] Received HTTP response headers after 285.4216ms - 200
2024-12-16 21:20:36.429 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.431 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.436 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.437 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.438 +03:30 [INF] End processing HTTP request after 296.5635ms - 200
2024-12-16 21:20:36.440 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.443 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.444 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.445 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.446 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:36.447 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.448 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.448 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.452 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.454 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.453 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:36.475 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.476 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.477 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.479 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.481 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:36.485 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.486 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.488 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.489 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.507 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.508 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.509 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.510 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.511 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.512 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.513 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.516 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.518 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.519 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.522 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.520 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.521 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.531 +03:30 [INF] Received HTTP response headers after 41.1487ms - 200
2024-12-16 21:20:36.531 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.532 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.534 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.534 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.535 +03:30 [INF] End processing HTTP request after 81.8099ms - 200
2024-12-16 21:20:36.544 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.543 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.542 +03:30 [INF] Received HTTP response headers after 272.1218ms - 200
2024-12-16 21:20:36.545 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.555 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.556 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:36.556 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 415.0981ms.
2024-12-16 21:20:36.556 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.558 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.559 +03:30 [INF] End processing HTTP request after 296.6389ms - 200
2024-12-16 21:20:36.560 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.560 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.561 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:36.562 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:36.563 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.564 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.565 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:36.566 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.567 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.568 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.569 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:36.578 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:36.573 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.579 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.580 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.576 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.577 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.572 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.581 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.574 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:36.599 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.599 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.575 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.578 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:36.609 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.609 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:36.612 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.614 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.617 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.615 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.616 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:36.633 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.634 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.634 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.638 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.639 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.635 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.637 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:36.643 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.644 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.642 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.640 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:36.664 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.666 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.654 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.684 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.683 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.663 +03:30 [INF] Received HTTP response headers after 45.4679ms - 200
2024-12-16 21:20:36.658 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 536.1654ms
2024-12-16 21:20:36.694 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.695 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.696 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.698 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:36.699 +03:30 [INF] End processing HTTP request after 124.2845ms - 200
2024-12-16 21:20:36.700 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.701 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.701 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.703 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.706 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.708 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:36.708 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 447.5469ms.
2024-12-16 21:20:36.709 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:36.710 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.711 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.712 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.720 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:36.714 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:36.736 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.713 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:36.715 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:36.755 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.754 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.716 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 637.3404ms
2024-12-16 21:20:36.777 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:36.779 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:36.781 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.783 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.795 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:36.797 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:36.801 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.803 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.804 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.806 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:36.807 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.809 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.812 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:36.839 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.814 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:36.857 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:36.858 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:36.860 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.861 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:36.872 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:36.873 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.875 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 643.6979ms
2024-12-16 21:20:36.876 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:36.880 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.882 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:36.883 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:36.884 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.885 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:36.886 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:36.889 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.890 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 730.1318ms
2024-12-16 21:20:36.895 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.896 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.900 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:36.901 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.902 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.906 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.908 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:36.910 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.911 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.913 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.914 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.915 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.916 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:36.921 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:36.922 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:36.965 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:36.965 +03:30 [INF] Received HTTP response headers after 298.0294ms - 200
2024-12-16 21:20:36.977 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:36.978 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:36.980 +03:30 [INF] End processing HTTP request after 345.3067ms - 200
2024-12-16 21:20:36.996 +03:30 [INF] Received HTTP response headers after 275.5142ms - 200
2024-12-16 21:20:37.002 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:37.004 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.005 +03:30 [INF] End processing HTTP request after 303.4074ms - 200
2024-12-16 21:20:37.006 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:37.008 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.016 +03:30 [INF] Received HTTP response headers after 277.6835ms - 200
2024-12-16 21:20:37.032 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.007 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.034 +03:30 [INF] End processing HTTP request after 323.9645ms - 200
2024-12-16 21:20:37.035 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.036 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.037 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.071 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.072 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.096 +03:30 [INF] Received HTTP response headers after 57.6286ms - 200
2024-12-16 21:20:37.105 +03:30 [INF] Received HTTP response headers after 49.6071ms - 200
2024-12-16 21:20:37.105 +03:30 [INF] End processing HTTP request after 73.5727ms - 200
2024-12-16 21:20:37.107 +03:30 [INF] End processing HTTP request after 100.3661ms - 200
2024-12-16 21:20:37.110 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.110 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 414.923ms.
2024-12-16 21:20:37.111 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.119 +03:30 [INF] Received HTTP response headers after 45.7085ms - 200
2024-12-16 21:20:37.111 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 494.6194ms.
2024-12-16 21:20:37.120 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:37.120 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.122 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.124 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.125 +03:30 [INF] End processing HTTP request after 53.4598ms - 200
2024-12-16 21:20:37.127 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.129 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:37.130 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.135 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.137 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.138 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.138 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 437.8716ms.
2024-12-16 21:20:37.140 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.142 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:37.147 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.148 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.150 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.152 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.154 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.156 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.161 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.162 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.164 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.165 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.168 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.169 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.171 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.174 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:37.176 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.177 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.181 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.179 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.206 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.182 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.205 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:37.182 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.214 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.214 +03:30 [INF] Received HTTP response headers after 885.1283ms - 200
2024-12-16 21:20:37.215 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.216 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.218 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.218 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.223 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:37.224 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.230 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 709.81ms
2024-12-16 21:20:37.231 +03:30 [INF] End processing HTTP request after 929.5558ms - 200
2024-12-16 21:20:37.232 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.234 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.236 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.237 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.241 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.244 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 712.6793ms
2024-12-16 21:20:37.245 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.247 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.248 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.250 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.251 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.255 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.256 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:37.257 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.258 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.260 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.261 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.280 +03:30 [INF] Received HTTP response headers after 4089.4755ms - 200
2024-12-16 21:20:37.280 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 958.1199ms
2024-12-16 21:20:37.283 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.285 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.263 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.259 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.267 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 703.8511ms
2024-12-16 21:20:37.269 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:37.270 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.293 +03:30 [INF] Received HTTP response headers after 276.7186ms - 200
2024-12-16 21:20:37.295 +03:30 [INF] End processing HTTP request after 4145.569ms - 200
2024-12-16 21:20:37.298 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.299 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.301 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.302 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.303 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.311 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.309 +03:30 [INF] End processing HTTP request after 307.8293ms - 200
2024-12-16 21:20:37.312 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.313 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.314 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.308 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:37.309 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 981.4839ms
2024-12-16 21:20:37.330 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.332 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.334 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.336 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.337 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.338 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.340 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:37.343 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 956.1601ms
2024-12-16 21:20:37.345 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.346 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.347 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.351 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.352 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.354 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:37.362 +03:30 [INF] Received HTTP response headers after 47.6895ms - 200
2024-12-16 21:20:37.383 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.384 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.385 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.386 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.387 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:37.388 +03:30 [INF] End processing HTTP request after 129.531ms - 200
2024-12-16 21:20:37.410 +03:30 [INF] Received HTTP response headers after 44.166ms - 200
2024-12-16 21:20:37.413 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.414 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.415 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.416 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:37.417 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1118.6608ms.
2024-12-16 21:20:37.418 +03:30 [INF] End processing HTTP request after 85.4096ms - 200
2024-12-16 21:20:37.417 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.419 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.420 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.422 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.429 +03:30 [INF] Received HTTP response headers after 40.4183ms - 200
2024-12-16 21:20:37.430 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:37.431 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.432 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.432 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4477.6174ms.
2024-12-16 21:20:37.432 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.433 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.434 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.435 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.442 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.443 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.494 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.445 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.446 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.504 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.436 +03:30 [INF] End processing HTTP request after 90.2544ms - 200
2024-12-16 21:20:37.437 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:37.441 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.516 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.521 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.524 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.526 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.527 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.545 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:37.553 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.552 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.585 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.569 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:37.554 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.545 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 567.2504ms.
2024-12-16 21:20:37.547 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:37.548 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.589 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.590 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.591 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.593 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.594 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.595 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:37.596 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:37.597 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.605 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.607 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.610 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.614 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.618 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:37.619 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:37.620 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.621 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.622 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.623 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.624 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.627 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:37.629 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:37.629 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.631 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4943.2373ms
2024-12-16 21:20:37.632 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.633 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.635 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.635 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:37.636 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:37.640 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1395.3276ms
2024-12-16 21:20:37.642 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.643 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.644 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.644 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.645 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:37.655 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:37.656 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.657 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.658 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.659 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.660 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.661 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:37.662 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:37.663 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.663 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 5411.2946ms
2024-12-16 21:20:37.665 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.669 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.670 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.671 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 776.5612ms
2024-12-16 21:20:37.672 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:37.672 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1485.455ms
2024-12-16 21:20:37.675 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.677 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.680 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.681 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:37.681 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:37.684 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.685 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.702 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.686 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.687 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:37.705 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.708 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.709 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.710 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1070.2003ms
2024-12-16 21:20:37.711 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.712 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.713 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.715 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.716 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.719 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.722 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.741 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.757 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.757 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.758 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.764 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.789 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.800 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.800 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:37.841 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:37.964 +03:30 [INF] Received HTTP response headers after 276.7018ms - 200
2024-12-16 21:20:37.965 +03:30 [INF] End processing HTTP request after 293.5452ms - 200
2024-12-16 21:20:37.966 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:37.967 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:37.968 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.015 +03:30 [INF] Received HTTP response headers after 46.3071ms - 200
2024-12-16 21:20:38.016 +03:30 [INF] End processing HTTP request after 48.8277ms - 200
2024-12-16 21:20:38.017 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:38.017 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 355.6909ms.
2024-12-16 21:20:38.018 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:38.019 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:38.021 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.022 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:38.024 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.026 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:38.028 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.029 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:38.030 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.032 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.031 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:38.032 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.035 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.036 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.033 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:38.037 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.041 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 625.1944ms
2024-12-16 21:20:38.043 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.044 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.045 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.046 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:38.047 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.047 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 927.618ms
2024-12-16 21:20:38.049 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.055 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.056 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.057 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.058 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.095 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:38.095 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.100 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.101 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.102 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.103 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.128 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.128 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.131 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.133 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.134 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.134 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.135 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.136 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.138 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.138 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.140 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.152 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.162 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.163 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.167 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.168 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.169 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.170 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.173 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.173 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.175 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.176 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.178 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.180 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.181 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.182 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.183 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.186 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.188 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.189 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.190 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.191 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.192 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.193 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.215 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.216 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.218 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.221 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.221 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.222 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.223 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.236 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:38.236 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.237 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.238 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:38.239 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.240 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.241 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.243 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.249 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.246 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.249 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.264 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.244 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.267 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.269 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.270 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.271 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.272 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.272 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.273 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.286 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.295 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.297 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.308 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:38.313 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.314 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.314 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:38.316 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.317 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.317 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.320 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.322 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.323 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.324 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.326 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.342 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.343 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.344 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.347 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.349 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.350 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.351 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.362 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:38.362 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.363 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:38.365 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.366 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.367 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.368 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.369 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.386 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.387 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.389 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.390 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.402 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:38.403 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:38.403 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.405 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.526 +03:30 [INF] Received HTTP response headers after 275.3619ms - 200
2024-12-16 21:20:38.526 +03:30 [INF] End processing HTTP request after 283.1482ms - 200
2024-12-16 21:20:38.529 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:38.529 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.530 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.578 +03:30 [INF] Received HTTP response headers after 46.8911ms - 200
2024-12-16 21:20:38.580 +03:30 [INF] End processing HTTP request after 50.3259ms - 200
2024-12-16 21:20:38.581 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 343.0032ms.
2024-12-16 21:20:38.581 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:38.583 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:38.584 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:38.586 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:38.587 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.588 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:38.595 +03:30 [INF] Received HTTP response headers after 268.5133ms - 200
2024-12-16 21:20:38.596 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.597 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:38.599 +03:30 [INF] End processing HTTP request after 282.0817ms - 200
2024-12-16 21:20:38.601 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.601 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:38.602 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:38.604 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.604 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:38.605 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.606 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.608 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 437.711ms
2024-12-16 21:20:38.608 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.609 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.610 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.626 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.627 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:38.628 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.629 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 534.096ms
2024-12-16 21:20:38.630 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.633 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.634 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.635 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.636 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.637 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.640 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.642 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.643 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.657 +03:30 [INF] Received HTTP response headers after 45.5801ms - 200
2024-12-16 21:20:38.668 +03:30 [INF] End processing HTTP request after 63.3366ms - 200
2024-12-16 21:20:38.684 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:38.684 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:38.684 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 369.6243ms.
2024-12-16 21:20:38.688 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:38.689 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:38.691 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.694 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:38.696 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:38.696 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:38.695 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.697 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:38.699 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:38.698 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.700 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 482.3811ms
2024-12-16 21:20:38.701 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.702 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.703 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.704 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:38.707 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.707 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.708 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 580.6464ms
2024-12-16 21:20:38.715 +03:30 [INF] Received HTTP response headers after 2131.3779ms - 200
2024-12-16 21:20:38.716 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.723 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.722 +03:30 [INF] End processing HTTP request after 2154.9506ms - 200
2024-12-16 21:20:38.718 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.724 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.726 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.727 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.728 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.748 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.748 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.739 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.749 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.751 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.754 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.756 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.756 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.757 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.760 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.761 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.762 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.763 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.764 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.765 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.766 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.770 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.768 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.769 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.767 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.773 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.775 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.798 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.820 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:38.821 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.822 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.824 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:38.829 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.832 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:38.837 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.833 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.834 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.836 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.832 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.840 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.844 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:38.842 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.885 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.885 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:38.845 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:38.904 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.907 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.913 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:38.915 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.915 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.922 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.920 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.917 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:38.929 +03:30 [INF] Received HTTP response headers after 42.9415ms - 200
2024-12-16 21:20:38.930 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.931 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.934 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:38.935 +03:30 [INF] End processing HTTP request after 100.3707ms - 200
2024-12-16 21:20:38.936 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.937 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.938 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:38.939 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:38.939 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2378.813ms.
2024-12-16 21:20:38.940 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.944 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:38.943 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:38.941 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.942 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:38.947 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:38.947 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.949 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:38.956 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:38.952 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.953 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.955 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.956 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.951 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.957 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:38.960 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.961 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:38.963 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.962 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:38.965 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:38.965 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.976 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:38.976 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.977 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.979 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.980 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:38.981 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:38.982 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:38.983 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:38.990 +03:30 [INF] Received HTTP response headers after 583.629ms - 200
2024-12-16 21:20:38.990 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:38.991 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:38.993 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2546.7722ms
2024-12-16 21:20:39.001 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:38.995 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.022 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:39.022 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:38.997 +03:30 [INF] End processing HTTP request after 593.7569ms - 200
2024-12-16 21:20:38.995 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:38.996 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.032 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:39.033 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.038 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:39.040 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.042 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.043 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.044 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.044 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:39.046 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.047 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2781.8125ms
2024-12-16 21:20:39.045 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.063 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:39.048 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.064 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:39.065 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.066 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:39.071 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.072 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:39.073 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.074 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.075 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.076 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:39.077 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.123 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:39.078 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:39.122 +03:30 [INF] Received HTTP response headers after 42.3761ms - 200
2024-12-16 21:20:39.103 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:39.124 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.126 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:39.127 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.128 +03:30 [INF] End processing HTTP request after 79.8383ms - 200
2024-12-16 21:20:39.129 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:39.130 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.133 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:39.134 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:39.136 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.136 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 733.0952ms.
2024-12-16 21:20:39.139 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:39.137 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.136 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.160 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:39.161 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.162 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.164 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:39.166 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.167 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.170 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:39.177 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:39.171 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.179 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.195 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.176 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.198 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:39.201 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.202 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.203 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:39.204 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.204 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:39.205 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.206 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.209 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:39.209 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.210 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.212 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.213 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.216 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:39.217 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.218 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.223 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:39.220 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.221 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:39.224 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.219 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.269 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.246 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:39.222 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.269 +03:30 [INF] Received HTTP response headers after 899.2368ms - 200
2024-12-16 21:20:39.277 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:39.278 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.283 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:39.285 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 922.9768ms
2024-12-16 21:20:39.287 +03:30 [INF] End processing HTTP request after 920.77ms - 200
2024-12-16 21:20:39.288 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:39.289 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.290 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:39.291 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.295 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.296 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.297 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.299 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:39.299 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.300 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.301 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.302 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.303 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:39.330 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.304 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1064.1776ms
2024-12-16 21:20:39.329 +03:30 [INF] Received HTTP response headers after 279.9857ms - 200
2024-12-16 21:20:39.307 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.332 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:39.334 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.338 +03:30 [INF] End processing HTTP request after 342.1985ms - 200
2024-12-16 21:20:39.354 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.355 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.356 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.357 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.361 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.364 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.365 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:39.366 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.367 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.368 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:39.371 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.409 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:39.393 +03:30 [INF] Received HTTP response headers after 54.7699ms - 200
2024-12-16 21:20:39.401 +03:30 [INF] Received HTTP response headers after 297.588ms - 200
2024-12-16 21:20:39.416 +03:30 [INF] Received HTTP response headers after 43.3767ms - 200
2024-12-16 21:20:39.416 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.417 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:39.420 +03:30 [INF] End processing HTTP request after 119.4062ms - 200
2024-12-16 21:20:39.421 +03:30 [INF] End processing HTTP request after 355.4918ms - 200
2024-12-16 21:20:39.421 +03:30 [INF] End processing HTTP request after 57.7035ms - 200
2024-12-16 21:20:39.422 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.423 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.424 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1061.1414ms.
2024-12-16 21:20:39.424 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.428 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 446.8332ms.
2024-12-16 21:20:39.471 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.471 +03:30 [INF] Received HTTP response headers after 291.2732ms - 200
2024-12-16 21:20:39.438 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:39.459 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.477 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.478 +03:30 [INF] End processing HTTP request after 341.1986ms - 200
2024-12-16 21:20:39.475 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.476 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.428 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.427 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.496 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.498 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.499 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.505 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.508 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.509 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.509 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.515 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.511 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.512 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.517 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.514 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.510 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.516 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.518 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.536 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.516 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.553 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.551 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.555 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.513 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.560 +03:30 [INF] Received HTTP response headers after 39.7105ms - 200
2024-12-16 21:20:39.561 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.562 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 658.3051ms
2024-12-16 21:20:39.564 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1267.2637ms
2024-12-16 21:20:39.565 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.569 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.567 +03:30 [INF] End processing HTTP request after 58.3103ms - 200
2024-12-16 21:20:39.570 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.571 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.579 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.579 +03:30 [INF] Received HTTP response headers after 271.3025ms - 200
2024-12-16 21:20:39.584 +03:30 [INF] Received HTTP response headers after 47.3094ms - 200
2024-12-16 21:20:39.586 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.587 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.587 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 542.9738ms.
2024-12-16 21:20:39.588 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.589 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.590 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.591 +03:30 [INF] End processing HTTP request after 294.6375ms - 200
2024-12-16 21:20:39.592 +03:30 [INF] End processing HTTP request after 80.4719ms - 200
2024-12-16 21:20:39.594 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.593 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.604 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.605 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.596 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1423.461ms
2024-12-16 21:20:39.597 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.602 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.602 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 473.2688ms.
2024-12-16 21:20:39.603 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.595 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.596 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 888.9795ms
2024-12-16 21:20:39.606 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.609 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.610 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.613 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.615 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.617 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.620 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.621 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.622 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.624 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.627 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.629 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.634 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.630 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.632 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.632 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.637 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.629 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.635 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.636 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.636 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.633 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.639 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.646 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.642 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.644 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.645 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.646 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.641 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.648 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 694.5929ms
2024-12-16 21:20:39.649 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 713.2161ms
2024-12-16 21:20:39.650 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.651 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.654 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.655 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.656 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.657 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.658 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.658 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.660 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.661 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.661 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.668 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.665 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.699 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.662 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.682 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 942.4608ms
2024-12-16 21:20:39.664 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.703 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.704 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.705 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.706 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 958.1357ms
2024-12-16 21:20:39.709 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.716 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.717 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.720 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.721 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.722 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.723 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.724 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.725 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.726 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.727 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.728 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.748 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.763 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.763 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.764 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.775 +03:30 [INF] Received HTTP response headers after 294.2408ms - 200
2024-12-16 21:20:39.776 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.777 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.777 +03:30 [INF] End processing HTTP request after 354.3442ms - 200
2024-12-16 21:20:39.778 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.780 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.780 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.795 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.801 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.816 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:39.816 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.835 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.824 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.850 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:39.856 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:39.894 +03:30 [INF] Received HTTP response headers after 37.8882ms - 200
2024-12-16 21:20:39.895 +03:30 [INF] End processing HTTP request after 93.8169ms - 200
2024-12-16 21:20:39.896 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.896 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 479.2341ms.
2024-12-16 21:20:39.897 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.898 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.899 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.901 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.902 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.903 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.904 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.904 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.906 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.913 +03:30 [INF] Received HTTP response headers after 38.8757ms - 200
2024-12-16 21:20:39.913 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.915 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.915 +03:30 [INF] End processing HTTP request after 80.3484ms - 200
2024-12-16 21:20:39.916 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.917 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 627.5685ms
2024-12-16 21:20:39.921 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:39.921 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 633.5576ms.
2024-12-16 21:20:39.922 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.926 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.924 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:39.925 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:39.930 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:39.930 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:39.931 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:39.923 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.928 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.927 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.934 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:39.934 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:39.935 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.937 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.937 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.939 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:39.940 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:39.941 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 878.1103ms
2024-12-16 21:20:39.942 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.943 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.944 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:39.948 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 783.9392ms
2024-12-16 21:20:39.954 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.952 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.953 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.951 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.955 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:39.956 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.957 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:39.957 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.960 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 1013.467ms
2024-12-16 21:20:39.962 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.983 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:39.983 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.988 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.991 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:39.992 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.993 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.994 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:39.995 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.996 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:39.997 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:39.998 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.001 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.003 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:40.004 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.020 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:40.037 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.020 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.041 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:40.042 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:40.043 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.046 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.050 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:40.051 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.055 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.055 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:40.056 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.058 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.059 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.060 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.060 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:40.061 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.062 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.088 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.087 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.087 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:40.097 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:40.125 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:40.125 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:40.126 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.131 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.134 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.135 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:40.136 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.137 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:40.138 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.139 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:40.149 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:40.150 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:40.151 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:40.151 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:40.152 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.154 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.153 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:40.169 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.170 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.171 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.173 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:40.174 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.176 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.177 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.177 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.188 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:40.189 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:40.189 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.190 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.307 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.310 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.311 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.312 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.313 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:40.344 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:40.347 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:40.348 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.349 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:40.350 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:40.352 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:40.353 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:40.354 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:40.355 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:40.356 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.357 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.358 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.361 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:40.362 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.363 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.364 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.365 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.378 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:40.378 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.379 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:40.382 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.383 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.383 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.384 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.387 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.402 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:40.425 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:40.431 +03:30 [INF] Received HTTP response headers after 276.5923ms - 200
2024-12-16 21:20:40.434 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:40.434 +03:30 [INF] End processing HTTP request after 282.0883ms - 200
2024-12-16 21:20:40.435 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.436 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:40.437 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:40.438 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:40.442 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:40.443 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:40.445 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:40.474 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:40.475 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:40.476 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:40.477 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.480 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:40.482 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.483 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:40.484 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.484 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.485 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:40.486 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:40.497 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:40.503 +03:30 [INF] Received HTTP response headers after 57.4419ms - 200
2024-12-16 21:20:40.504 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:40.507 +03:30 [INF] End processing HTTP request after 69.4419ms - 200
2024-12-16 21:20:40.508 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.510 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 359.2593ms.
2024-12-16 21:20:40.510 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:40.510 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:40.512 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:40.513 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:40.529 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:40.531 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:40.530 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.532 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:40.535 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.537 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:40.538 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.539 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:40.541 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.542 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 483.6062ms
2024-12-16 21:20:40.543 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.544 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.545 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.546 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:40.548 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.549 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 615.0674ms
2024-12-16 21:20:40.550 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.553 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.554 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.555 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.556 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.558 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.563 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.565 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.566 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.567 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.604 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:40.662 +03:30 [INF] Received HTTP response headers after 272.8996ms - 200
2024-12-16 21:20:40.663 +03:30 [INF] End processing HTTP request after 280.346ms - 200
2024-12-16 21:20:40.664 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:20:40.665 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:40.665 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:20:40.707 +03:30 [INF] Received HTTP response headers after 40.509ms - 200
2024-12-16 21:20:40.708 +03:30 [INF] End processing HTTP request after 43.061ms - 200
2024-12-16 21:20:40.709 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 329.7512ms.
2024-12-16 21:20:40.709 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:20:40.710 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:40.712 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:20:40.713 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:40.715 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:40.715 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:40.714 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.716 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:40.717 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.720 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:20:40.722 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.723 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 367.4156ms
2024-12-16 21:20:40.724 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.725 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.726 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.727 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:20:40.728 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.730 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.731 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.729 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 422.1825ms
2024-12-16 21:20:40.734 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.735 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.739 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.741 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.742 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.740 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.743 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:40.744 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.770 +03:30 [INF] Received HTTP response headers after 579.1963ms - 429
2024-12-16 21:20:40.770 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.775 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:40.775 +03:30 [INF] Received HTTP response headers after 261.4492ms - 429
2024-12-16 21:20:40.776 +03:30 [INF] End processing HTTP request after 586.4933ms - 429
2024-12-16 21:20:40.777 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.780 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:40.782 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.784 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:40.804 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.827 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:40.829 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.854 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.781 +03:30 [INF] End processing HTTP request after 272.0177ms - 429
2024-12-16 21:20:40.881 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:40.912 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:40.883 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:40.885 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:40.887 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:20:40.990 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:41.058 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.128 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:41.128 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.060 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.061 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.099 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:20:41.060 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 871.2986ms.
2024-12-16 21:20:41.158 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 653.8038ms.
2024-12-16 21:20:41.160 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.161 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.163 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.164 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.169 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:41.170 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:41.171 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.172 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.173 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.174 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.181 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.204 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.205 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.218 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:41.180 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:41.235 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:41.236 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:41.228 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.231 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.249 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:41.233 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.228 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.235 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.236 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:41.177 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:41.258 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.259 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.261 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.262 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.264 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.267 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.268 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:41.269 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:41.272 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.273 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.273 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.275 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.276 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.277 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.278 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 801.0786ms
2024-12-16 21:20:41.281 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:41.283 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.285 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.286 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.287 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.288 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.289 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.289 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.299 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.296 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.295 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.297 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.323 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.321 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.291 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.321 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 943.0178ms
2024-12-16 21:20:41.290 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:41.357 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:41.347 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.348 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.363 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.353 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.355 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.346 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.358 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1189.7571ms
2024-12-16 21:20:41.362 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.349 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.370 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.374 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.364 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.366 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.377 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.378 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.374 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:41.376 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.367 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.371 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.390 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.391 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.393 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.394 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.395 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.396 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.398 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.400 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1379.3628ms
2024-12-16 21:20:41.401 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.403 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.404 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.405 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.406 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.407 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.408 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.411 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.415 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.416 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.417 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.419 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.420 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.421 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.422 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.423 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.424 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.427 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.430 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.431 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.449 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.450 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.448 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.432 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.474 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.475 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.476 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.477 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.478 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.481 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.484 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.485 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.486 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.488 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.489 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.497 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.495 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.496 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.491 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.508 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.509 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.511 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.512 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.513 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.514 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.515 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.516 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.517 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.518 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.521 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.523 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.526 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.524 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.538 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:41.527 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.537 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.525 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.538 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.541 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.550 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.544 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.545 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.547 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.548 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.549 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.543 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.551 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.552 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:41.578 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.553 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.554 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.555 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.584 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.579 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.581 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.582 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.583 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.555 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.587 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.586 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:41.588 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.611 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.585 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.636 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:41.637 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.611 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.662 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.664 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:41.665 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.666 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.667 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.668 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:41.669 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.670 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.670 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.671 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:41.672 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.673 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.674 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.675 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:41.676 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.701 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:41.705 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.706 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:41.708 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.709 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:41.721 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.722 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:41.723 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.725 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.725 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.727 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:41.727 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.728 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.740 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:41.744 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.745 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.746 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:41.747 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:41.757 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:41.759 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:41.761 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.762 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:41.901 +03:30 [INF] Received HTTP response headers after 262.791ms - 429
2024-12-16 21:20:41.903 +03:30 [INF] End processing HTTP request after 315.8337ms - 429
2024-12-16 21:20:41.964 +03:30 [INF] Received HTTP response headers after 275.9726ms - 429
2024-12-16 21:20:41.966 +03:30 [INF] End processing HTTP request after 296.0354ms - 429
2024-12-16 21:20:42.013 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.053 +03:30 [INF] Received HTTP response headers after 620.7257ms - 429
2024-12-16 21:20:42.086 +03:30 [INF] Received HTTP response headers after 496.8186ms - 429
2024-12-16 21:20:42.142 +03:30 [INF] Received HTTP response headers after 586.1711ms - 429
2024-12-16 21:20:42.172 +03:30 [INF] End processing HTTP request after 618.0249ms - 429
2024-12-16 21:20:42.170 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 589.177ms.
2024-12-16 21:20:42.179 +03:30 [INF] End processing HTTP request after 655.179ms - 429
2024-12-16 21:20:42.211 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:42.271 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:42.318 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:42.293 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.368 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:42.375 +03:30 [INF] Received HTTP response headers after 645.5662ms - 429
2024-12-16 21:20:42.391 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:42.342 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:42.435 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:42.178 +03:30 [INF] Received HTTP response headers after 501.3643ms - 429
2024-12-16 21:20:42.437 +03:30 [INF] End processing HTTP request after 767.8191ms - 429
2024-12-16 21:20:42.027 +03:30 [INF] Received HTTP response headers after 263.4606ms - 429
2024-12-16 21:20:42.431 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 884.422ms.
2024-12-16 21:20:42.432 +03:30 [INF] End processing HTTP request after 706.6759ms - 429
2024-12-16 21:20:42.434 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:42.437 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:42.534 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:42.583 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:42.623 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:42.609 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:42.374 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.643 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:42.639 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.712 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:42.644 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1157.9503ms
2024-12-16 21:20:42.773 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:42.646 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:42.666 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:42.727 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1211.6586ms.
2024-12-16 21:20:42.532 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.121 +03:30 [INF] End processing HTTP request after 710.0557ms - 429
2024-12-16 21:20:42.786 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1063.73ms.
2024-12-16 21:20:42.789 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:42.898 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:42.925 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:42.787 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:42.790 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:42.794 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:42.795 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:42.872 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1206.1231ms.
2024-12-16 21:20:42.460 +03:30 [INF] End processing HTTP request after 698.5743ms - 429
2024-12-16 21:20:42.120 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:42.954 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1546.5654ms
2024-12-16 21:20:42.953 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:42.955 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1706.4451ms
2024-12-16 21:20:42.957 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:42.958 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:42.961 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:42.963 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:42.950 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:43.100 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:43.116 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.117 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.232 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2403.1847ms
2024-12-16 21:20:43.122 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:43.124 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:43.248 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.125 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.127 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.187 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1786.4401ms.
2024-12-16 21:20:43.246 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1487.8472ms.
2024-12-16 21:20:43.116 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1448.776ms.
2024-12-16 21:20:43.273 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:43.273 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:43.275 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.276 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.276 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.290 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.291 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.292 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.287 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:43.288 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:43.289 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.289 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.300 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.282 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:43.284 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:43.295 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1863.1644ms
2024-12-16 21:20:43.297 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.298 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:43.299 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1710.9787ms
2024-12-16 21:20:43.278 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:43.301 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1923.2137ms
2024-12-16 21:20:43.303 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.304 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.315 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.316 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.310 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:43.311 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.313 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.314 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.314 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.308 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.309 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:43.316 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.317 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:43.318 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1943.9216ms
2024-12-16 21:20:43.319 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.323 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2410.8407ms
2024-12-16 21:20:43.324 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.325 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2198.5823ms
2024-12-16 21:20:43.327 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:43.328 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.329 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:43.332 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.337 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.340 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:43.341 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1852.2872ms
2024-12-16 21:20:43.342 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:43.343 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.344 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.345 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:43.346 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.347 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:43.350 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.351 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1627.036ms
2024-12-16 21:20:43.353 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:43.354 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2136.1718ms
2024-12-16 21:20:43.355 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:43.356 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2122.8993ms
2024-12-16 21:20:43.357 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.358 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:43.362 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.363 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.366 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1828.5163ms
2024-12-16 21:20:43.368 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:43.370 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.370 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2637.0205ms
2024-12-16 21:20:43.374 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:43.375 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:43.377 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:43.378 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.379 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:43.390 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:43.391 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.392 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:43.393 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.393 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:43.394 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:43.396 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:43.395 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:43.406 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:43.422 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:43.424 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:43.425 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:43.663 +03:30 [INF] Received HTTP response headers after 256.3463ms - 429
2024-12-16 21:20:43.665 +03:30 [INF] End processing HTTP request after 271.2537ms - 429
2024-12-16 21:20:43.692 +03:30 [INF] Received HTTP response headers after 263.8776ms - 429
2024-12-16 21:20:43.703 +03:30 [INF] End processing HTTP request after 279.2657ms - 429
2024-12-16 21:20:43.788 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:43.836 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:43.918 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 526.465ms.
2024-12-16 21:20:43.945 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:43.970 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 547.6585ms.
2024-12-16 21:20:43.970 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.972 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:43.974 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.977 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.976 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:43.978 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:43.979 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:43.980 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.981 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.975 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:43.978 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:43.985 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:43.984 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:43.982 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 613.6856ms
2024-12-16 21:20:43.986 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 656.9575ms
2024-12-16 21:20:43.989 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:43.990 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.991 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.992 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:43.993 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1370.3501ms
2024-12-16 21:20:43.994 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1723.2801ms
2024-12-16 21:20:43.995 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.021 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.024 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.025 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.025 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.029 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.030 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.031 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.032 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.033 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.034 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.035 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.036 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.037 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.038 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.039 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.041 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.043 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.052 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.052 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.054 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.055 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.258 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.260 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.261 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.262 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.263 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.285 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.289 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.290 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.291 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.292 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.294 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.295 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.296 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.297 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.298 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.299 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.300 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.301 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.302 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.303 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.304 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.305 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.314 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.314 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.315 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.317 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.319 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.318 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.322 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.322 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.324 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.325 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.326 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.349 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.357 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.363 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.361 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.365 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.367 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.367 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.368 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.369 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.389 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.389 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.390 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.393 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.398 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.399 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.396 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.396 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.403 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.401 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.422 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.422 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.423 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.425 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.433 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.434 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.432 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.430 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.431 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.434 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.436 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.437 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.458 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.438 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.458 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.459 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.459 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.461 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.462 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.465 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.466 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.469 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.474 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.475 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.476 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.477 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.470 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.471 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.472 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.473 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.478 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.479 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.482 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.483 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.488 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.489 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.490 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.491 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.492 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.485 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.486 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.487 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.497 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.484 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.495 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.516 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.517 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.517 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.519 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.521 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.525 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.526 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.527 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.528 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.529 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.531 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.529 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.530 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.540 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.541 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.542 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.543 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.543 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.544 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.545 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.546 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.549 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.551 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.551 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.552 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.562 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.563 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:44.565 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.567 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.568 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:44.588 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.575 +03:30 [INF] Received HTTP response headers after 248.3132ms - 429
2024-12-16 21:20:44.566 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.567 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.589 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:44.593 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:44.591 +03:30 [INF] End processing HTTP request after 273.1366ms - 429
2024-12-16 21:20:44.592 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.590 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.595 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.613 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.654 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:44.688 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:44.709 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.709 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.592 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.711 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.731 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:44.770 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 455.0033ms.
2024-12-16 21:20:44.744 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.780 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.781 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.783 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.786 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:44.786 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.789 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.790 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.792 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.794 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:44.794 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.795 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.796 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.810 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:44.797 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:44.798 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:44.813 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:44.815 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.816 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.818 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:44.859 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.859 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:44.838 +03:30 [INF] Received HTTP response headers after 262.5555ms - 429
2024-12-16 21:20:44.818 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:44.870 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:44.873 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:44.874 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.875 +03:30 [INF] End processing HTTP request after 323.8885ms - 429
2024-12-16 21:20:44.876 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:44.878 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:44.879 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:44.938 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:44.877 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:44.985 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:44.914 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:44.995 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:44.995 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:44.996 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.025 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 726.9906ms
2024-12-16 21:20:44.914 +03:30 [INF] Received HTTP response headers after 280.6115ms - 429
2024-12-16 21:20:45.051 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 506.7684ms.
2024-12-16 21:20:45.053 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:45.059 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:45.060 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.061 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.065 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:45.066 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.064 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:45.079 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 821.8966ms
2024-12-16 21:20:45.062 +03:30 [INF] End processing HTTP request after 474.7521ms - 429
2024-12-16 21:20:45.082 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:45.083 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:45.120 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:45.164 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:45.084 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:45.119 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:45.175 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:45.176 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.178 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:45.210 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.178 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:45.180 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:45.234 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 667.0777ms.
2024-12-16 21:20:45.235 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:45.236 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:45.237 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:45.238 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:45.239 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:45.243 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:45.244 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:45.245 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:45.246 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.248 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:45.249 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:45.250 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.251 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:45.252 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:45.253 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:45.258 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.257 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.259 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 826.9958ms
2024-12-16 21:20:45.272 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:45.280 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:45.283 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:45.284 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.285 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.286 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:45.289 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:45.290 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.291 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:45.292 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 977.9448ms
2024-12-16 21:20:45.297 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.293 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:45.306 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:45.308 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:45.312 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:45.315 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:45.316 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.327 +03:30 [INF] Received HTTP response headers after 527.7828ms - 429
2024-12-16 21:20:45.319 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:45.314 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 835.766ms
2024-12-16 21:20:45.333 +03:30 [INF] Received HTTP response headers after 265.9021ms - 429
2024-12-16 21:20:45.333 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.336 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.339 +03:30 [INF] End processing HTTP request after 552.4406ms - 429
2024-12-16 21:20:45.342 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:45.345 +03:30 [INF] End processing HTTP request after 348.5988ms - 429
2024-12-16 21:20:45.370 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:45.348 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:45.346 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.451 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:45.492 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:45.545 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:45.545 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:45.579 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:45.604 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 859.6713ms.
2024-12-16 21:20:45.632 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.658 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:45.419 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:45.656 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 779.3381ms.
2024-12-16 21:20:45.657 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:45.410 +03:30 [INF] Received HTTP response headers after 590.5446ms - 429
2024-12-16 21:20:45.670 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:45.343 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.674 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:45.675 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:45.676 +03:30 [INF] End processing HTTP request after 880.929ms - 429
2024-12-16 21:20:45.677 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.679 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:45.682 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:45.722 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:45.733 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:45.756 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:45.767 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:45.767 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:45.703 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:45.773 +03:30 [INF] Received HTTP response headers after 280.0298ms - 429
2024-12-16 21:20:45.773 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:45.775 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:45.807 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:45.678 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1314.5023ms
2024-12-16 21:20:45.831 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1041.9758ms.
2024-12-16 21:20:45.831 +03:30 [INF] End processing HTTP request after 498.0212ms - 429
2024-12-16 21:20:45.833 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:45.834 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1317.2682ms
2024-12-16 21:20:45.861 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1266.5416ms
2024-12-16 21:20:45.882 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.925 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:45.915 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:45.927 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1605.1346ms
2024-12-16 21:20:45.963 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1504.9323ms
2024-12-16 21:20:45.840 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:45.835 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:45.932 +03:30 [INF] Received HTTP response headers after 272.7478ms - 429
2024-12-16 21:20:45.996 +03:30 [INF] End processing HTTP request after 364.178ms - 429
2024-12-16 21:20:45.994 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:45.989 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 673.8709ms.
2024-12-16 21:20:46.008 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:46.038 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:46.049 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:45.995 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.082 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:46.084 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:46.084 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:46.136 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 557.6125ms.
2024-12-16 21:20:46.085 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.101 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:46.136 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:46.138 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:46.138 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.139 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:46.140 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1645.5425ms
2024-12-16 21:20:46.142 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:46.145 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:46.146 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:46.147 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:46.143 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.144 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:46.145 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.148 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:46.157 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:46.157 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:46.159 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1757.3363ms
2024-12-16 21:20:46.160 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 903.1326ms
2024-12-16 21:20:46.161 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:46.162 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 986.6376ms
2024-12-16 21:20:46.167 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.168 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.170 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.171 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1360.6881ms
2024-12-16 21:20:46.172 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.173 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1462.5195ms
2024-12-16 21:20:46.230 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:46.232 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.233 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.234 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.235 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:46.257 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:46.262 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:46.263 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.264 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:46.265 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:46.267 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:46.268 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:46.269 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:46.270 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:46.272 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.273 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.274 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.275 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:46.276 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.277 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.278 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.279 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.288 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:46.289 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:46.290 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.291 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.362 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:46.364 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.365 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.366 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.367 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:46.388 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:46.393 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:46.394 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.395 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:46.396 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:46.398 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:46.399 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:46.400 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:46.401 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:46.402 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.403 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.405 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.406 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:46.407 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.410 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.411 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.412 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.424 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:46.431 +03:30 [INF] Received HTTP response headers after 254.7211ms - 429
2024-12-16 21:20:46.431 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:46.432 +03:30 [INF] End processing HTTP request after 264.6534ms - 429
2024-12-16 21:20:46.433 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.452 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.529 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:46.583 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 422.6926ms.
2024-12-16 21:20:46.585 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:46.587 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:46.588 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:46.589 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:46.590 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:46.591 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:46.592 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 915.3922ms
2024-12-16 21:20:46.594 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.595 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1475.2516ms
2024-12-16 21:20:46.656 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:46.658 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.659 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:46.662 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.663 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:46.684 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:46.688 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:46.689 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.690 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:46.691 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:46.692 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:46.693 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:46.694 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:46.695 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:46.697 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.697 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:46.698 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.699 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:46.702 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.703 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.704 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:46.705 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:46.714 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:46.715 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:46.716 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.716 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:46.735 +03:30 [INF] Received HTTP response headers after 271.5433ms - 429
2024-12-16 21:20:46.737 +03:30 [INF] End processing HTTP request after 303.4304ms - 429
2024-12-16 21:20:46.818 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:46.872 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 440.4333ms.
2024-12-16 21:20:46.874 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:46.875 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:46.876 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:46.877 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:46.878 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:46.879 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:46.880 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 477.4962ms
2024-12-16 21:20:46.881 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:46.882 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 520.02ms
2024-12-16 21:20:46.910 +03:30 [INF] Received HTTP response headers after 618.6266ms - 429
2024-12-16 21:20:46.912 +03:30 [INF] End processing HTTP request after 621.8764ms - 429
2024-12-16 21:20:46.940 +03:30 [INF] Received HTTP response headers after 2883.0026ms - 429
2024-12-16 21:20:46.952 +03:30 [INF] End processing HTTP request after 2897.6819ms - 429
2024-12-16 21:20:46.996 +03:30 [INF] Received HTTP response headers after 279.0076ms - 429
2024-12-16 21:20:47.026 +03:30 [INF] End processing HTTP request after 310.6008ms - 429
2024-12-16 21:20:47.047 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:47.091 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.182 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:47.158 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.124 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:47.233 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 943.647ms.
2024-12-16 21:20:47.264 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.290 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.290 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.289 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 574.3519ms.
2024-12-16 21:20:47.233 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.262 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.359 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.349 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:47.351 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.354 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.355 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.357 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:47.358 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.347 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3294.4598ms.
2024-12-16 21:20:47.363 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.366 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:47.367 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.368 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.369 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.371 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:47.373 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.375 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.374 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:47.378 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:47.381 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.382 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.384 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.384 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:47.385 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.377 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:47.409 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:47.410 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.410 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.411 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.412 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:47.433 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.434 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:47.454 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.475 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.486 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:47.434 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.406 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.407 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:47.496 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.499 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.500 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:47.503 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.505 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.506 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:47.507 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:47.513 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.514 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:47.518 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.519 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.520 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1248.5463ms
2024-12-16 21:20:47.521 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.522 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.525 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 828.6635ms
2024-12-16 21:20:47.527 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.527 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.528 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:47.530 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.531 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.532 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.533 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.534 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.535 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.536 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:47.538 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.539 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:47.542 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1312.2488ms
2024-12-16 21:20:47.543 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.545 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.539 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.549 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 893.8548ms
2024-12-16 21:20:47.541 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.568 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.575 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:47.576 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:47.582 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.584 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.586 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.589 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.590 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.593 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:47.596 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3561.5336ms
2024-12-16 21:20:47.598 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.606 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.601 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.602 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.603 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.610 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.605 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.600 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.607 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.608 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.609 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.604 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:47.621 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:47.615 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3640.3015ms
2024-12-16 21:20:47.616 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.618 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.619 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.620 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.611 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.622 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:47.625 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.626 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.626 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.629 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.632 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.633 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:47.634 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.635 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.636 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.637 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.638 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.639 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:47.640 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.640 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.642 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.645 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.647 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.653 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.649 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.650 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.651 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.652 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.648 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:47.654 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.654 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.655 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.656 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.657 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.658 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:47.661 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.662 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.669 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.670 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.666 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.672 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.672 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.664 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.671 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.665 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.682 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.682 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.691 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.702 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.667 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.668 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.700 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.701 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.691 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.707 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.703 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:47.704 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.705 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.702 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.709 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.706 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.720 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.721 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.711 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.732 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.731 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.731 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.757 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.744 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:47.770 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.719 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.774 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.773 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.772 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.776 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.790 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.791 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.793 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:47.805 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:47.815 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:47.816 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:47.816 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.818 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:47.986 +03:30 [INF] Received HTTP response headers after 253.5619ms - 429
2024-12-16 21:20:47.988 +03:30 [INF] End processing HTTP request after 285.4452ms - 429
2024-12-16 21:20:48.031 +03:30 [INF] Received HTTP response headers after 271.6569ms - 429
2024-12-16 21:20:48.042 +03:30 [INF] End processing HTTP request after 336.2647ms - 429
2024-12-16 21:20:48.075 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.077 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:48.089 +03:30 [INF] Received HTTP response headers after 270.3404ms - 429
2024-12-16 21:20:48.189 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.220 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.208 +03:30 [INF] End processing HTTP request after 391.2791ms - 429
2024-12-16 21:20:48.219 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.208 +03:30 [INF] Received HTTP response headers after 414.1958ms - 429
2024-12-16 21:20:48.262 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:48.321 +03:30 [INF] End processing HTTP request after 545.4749ms - 429
2024-12-16 21:20:48.222 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.362 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.382 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:48.413 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.382 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:48.268 +03:30 [INF] Received HTTP response headers after 490.8895ms - 429
2024-12-16 21:20:48.446 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.447 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.501 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.449 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.473 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:48.473 +03:30 [INF] End processing HTTP request after 703.012ms - 429
2024-12-16 21:20:48.219 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 517.3529ms.
2024-12-16 21:20:48.360 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 658.6636ms.
2024-12-16 21:20:48.527 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 752.7509ms.
2024-12-16 21:20:48.528 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.529 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:48.532 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:48.616 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:48.617 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:48.615 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.636 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:48.653 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:48.671 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:48.634 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:48.634 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.561 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:48.582 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:48.720 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:48.721 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:48.713 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:48.712 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:48.716 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:48.727 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.706 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 948.6106ms.
2024-12-16 21:20:48.719 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:48.729 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:48.730 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:48.723 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:48.725 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:48.732 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:48.717 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:48.728 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:48.729 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:48.321 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.723 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:48.733 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1101.6105ms
2024-12-16 21:20:48.726 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.779 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.739 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:48.796 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:48.797 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:48.798 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:48.731 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:48.791 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 975.0577ms.
2024-12-16 21:20:48.792 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.793 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:48.794 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:48.809 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.810 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:48.731 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:48.799 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:48.805 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1647.1176ms
2024-12-16 21:20:48.808 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:48.736 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:48.740 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:48.813 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:48.800 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:48.803 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:48.827 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:48.828 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:48.832 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:48.833 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:48.833 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:48.834 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1200.2187ms
2024-12-16 21:20:48.835 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1206.1695ms
2024-12-16 21:20:48.837 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:48.848 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:48.841 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:48.844 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:48.845 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:48.846 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:48.852 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:48.853 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:48.840 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:48.849 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:48.850 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:48.851 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:48.852 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:48.847 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.848 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.854 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1218.2346ms
2024-12-16 21:20:48.859 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:48.861 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:48.858 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.862 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:48.871 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:48.863 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1573.0527ms
2024-12-16 21:20:48.864 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1772.8544ms
2024-12-16 21:20:48.858 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:48.871 +03:30 [INF] Received HTTP response headers after 1125.7843ms - 429
2024-12-16 21:20:48.872 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:48.874 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:48.874 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:48.875 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:48.876 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1586.4705ms
2024-12-16 21:20:48.884 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:48.885 +03:30 [INF] End processing HTTP request after 1165.6095ms - 429
2024-12-16 21:20:48.886 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:48.888 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:48.889 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:48.959 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:48.925 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:48.987 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:48.893 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1226.2288ms
2024-12-16 21:20:48.981 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:48.985 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:48.983 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:49.045 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.059 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.060 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:49.000 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:49.057 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1352.4081ms.
2024-12-16 21:20:49.058 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:48.999 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:48.890 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:49.062 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.062 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1685.7101ms
2024-12-16 21:20:49.064 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:49.065 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:49.066 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:49.067 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:49.076 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:49.081 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:49.083 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:49.084 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.085 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:49.086 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:49.087 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:49.088 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:49.089 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.090 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.091 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:49.091 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.107 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:49.092 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:49.105 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.108 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.109 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:49.110 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:49.126 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1508.0882ms
2024-12-16 21:20:49.112 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:49.127 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:49.128 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:49.130 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.131 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.132 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1868.072ms
2024-12-16 21:20:49.141 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:49.141 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.145 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:49.147 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:49.147 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.148 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:49.150 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.159 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:49.175 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:49.177 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.178 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:49.533 +03:30 [INF] Received HTTP response headers after 420.1941ms - 429
2024-12-16 21:20:49.535 +03:30 [INF] End processing HTTP request after 444.8134ms - 429
2024-12-16 21:20:49.626 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:49.659 +03:30 [INF] Received HTTP response headers after 498.8233ms - 429
2024-12-16 21:20:49.672 +03:30 [INF] End processing HTTP request after 525.1408ms - 429
2024-12-16 21:20:49.684 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 597.7444ms.
2024-12-16 21:20:49.705 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:49.751 +03:30 [INF] Received HTTP response headers after 571.3724ms - 429
2024-12-16 21:20:49.752 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:49.764 +03:30 [INF] End processing HTTP request after 586.7898ms - 429
2024-12-16 21:20:49.774 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:49.775 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:49.863 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:49.875 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:49.885 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:49.900 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:49.911 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 765.8179ms.
2024-12-16 21:20:49.940 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1065.6919ms
2024-12-16 21:20:49.964 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 789.3348ms.
2024-12-16 21:20:49.965 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:49.966 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:49.968 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:49.970 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:49.971 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1588.6123ms
2024-12-16 21:20:49.973 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:49.973 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:49.976 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:49.980 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:49.979 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:49.977 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:49.981 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:49.983 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:49.986 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:49.985 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:49.984 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:49.987 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:49.989 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 901.0596ms
2024-12-16 21:20:49.990 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:49.991 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:49.992 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:49.993 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1117.7754ms
2024-12-16 21:20:50.012 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:50.012 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.012 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1289.4699ms
2024-12-16 21:20:50.013 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.015 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.021 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.024 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1947.178ms
2024-12-16 21:20:50.025 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.026 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.031 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.033 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.033 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:50.035 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.047 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.053 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.054 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:50.061 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.062 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:50.064 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:50.063 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.065 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.065 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.066 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.068 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.069 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.071 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:50.070 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.074 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.076 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.077 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.075 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:50.078 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.079 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:50.090 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:50.091 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:50.090 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:50.090 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:50.092 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.093 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.095 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.099 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.098 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.097 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.101 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.102 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.113 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:50.116 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:50.133 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.134 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.140 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.141 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.142 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.142 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.143 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.146 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.144 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.147 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.156 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:50.156 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:50.157 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:50.158 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:50.160 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:50.159 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.162 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.161 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.174 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.177 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.178 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:50.179 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.180 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.181 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.181 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.191 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:50.192 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:50.192 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.193 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.286 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:50.290 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.291 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.292 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.293 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:50.305 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:50.313 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.314 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.317 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.318 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.319 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.321 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.321 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.325 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:50.327 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.345 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.346 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.351 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.352 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:50.353 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.354 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:50.355 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.356 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:50.358 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.359 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.361 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.362 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.364 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:50.365 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.366 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:50.368 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:50.369 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:50.370 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.371 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.372 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.374 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.373 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:50.377 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.379 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.388 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:50.391 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:50.388 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:50.392 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.394 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.395 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:50.396 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.397 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:50.398 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.401 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:50.400 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.399 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:50.413 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:50.415 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:50.432 +03:30 [INF] Received HTTP response headers after 268.9839ms - 429
2024-12-16 21:20:50.446 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:50.447 +03:30 [INF] End processing HTTP request after 288.0209ms - 429
2024-12-16 21:20:50.446 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:50.455 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:50.452 +03:30 [INF] Received HTTP response headers after 258.1826ms - 429
2024-12-16 21:20:50.531 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:50.553 +03:30 [INF] End processing HTTP request after 360.5361ms - 429
2024-12-16 21:20:50.564 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:50.574 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:50.655 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:50.665 +03:30 [INF] Received HTTP response headers after 263.6397ms - 429
2024-12-16 21:20:50.665 +03:30 [INF] Received HTTP response headers after 562.9221ms - 429
2024-12-16 21:20:50.748 +03:30 [INF] End processing HTTP request after 350.0234ms - 429
2024-12-16 21:20:50.604 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:50.771 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 579.8645ms.
2024-12-16 21:20:50.772 +03:30 [INF] End processing HTTP request after 679.8994ms - 429
2024-12-16 21:20:50.845 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:50.855 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:50.896 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:50.940 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:50.956 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:50.993 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 598.4287ms.
2024-12-16 21:20:51.009 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:50.803 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:50.720 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 562.2286ms.
2024-12-16 21:20:50.468 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:51.048 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 956.5668ms.
2024-12-16 21:20:51.048 +03:30 [INF] Received HTTP response headers after 1954.8785ms - 429
2024-12-16 21:20:51.049 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.061 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.051 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:51.052 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.053 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.056 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.058 +03:30 [INF] End processing HTTP request after 1974.4242ms - 429
2024-12-16 21:20:51.050 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.061 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.097 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.117 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.067 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.063 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:51.065 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.066 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.149 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:51.149 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.149 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 987.7541ms
2024-12-16 21:20:51.193 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.150 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.152 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:51.153 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.221 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.222 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.223 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.219 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.220 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.216 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2149.9865ms.
2024-12-16 21:20:51.217 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.219 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 859.3491ms
2024-12-16 21:20:51.223 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1130.51ms
2024-12-16 21:20:51.224 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.225 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.227 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.227 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1137.3798ms
2024-12-16 21:20:51.232 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.233 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.234 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.235 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.237 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.239 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 953.645ms
2024-12-16 21:20:51.240 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1228.4415ms
2024-12-16 21:20:51.241 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1176.6845ms
2024-12-16 21:20:51.242 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:51.245 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.252 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.251 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.250 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.253 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.254 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.254 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1275.2378ms
2024-12-16 21:20:51.255 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.258 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.261 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2433.0928ms
2024-12-16 21:20:51.262 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.263 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.272 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:51.272 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3010.0752ms
2024-12-16 21:20:51.273 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:51.276 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.277 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.299 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:51.300 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.301 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.303 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.303 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:51.321 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:51.327 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:51.328 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.329 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:51.330 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:51.331 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:51.332 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:51.333 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:51.334 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:51.335 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.338 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.339 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.340 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:51.342 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.343 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.344 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.345 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.354 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:51.355 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:51.355 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.357 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.399 +03:30 [INF] Received HTTP response headers after 245.5342ms - 429
2024-12-16 21:20:51.401 +03:30 [INF] End processing HTTP request after 347.4669ms - 429
2024-12-16 21:20:51.476 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:51.491 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:51.493 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.531 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.533 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:51.534 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.566 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1097.4798ms.
2024-12-16 21:20:51.566 +03:30 [INF] Received HTTP response headers after 287.5332ms - 429
2024-12-16 21:20:51.568 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.572 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.571 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.571 +03:30 [INF] End processing HTTP request after 295.0942ms - 429
2024-12-16 21:20:51.569 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:51.576 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.573 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.605 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.623 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:51.634 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.682 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.681 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:51.623 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:51.692 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.690 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:51.773 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 499.5744ms.
2024-12-16 21:20:51.773 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:51.775 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1404.3299ms
2024-12-16 21:20:51.780 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:51.784 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.782 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.783 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.781 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:51.785 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:51.785 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:51.786 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1481.3647ms
2024-12-16 21:20:51.789 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:51.792 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:51.794 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:51.796 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:51.799 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:51.800 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:51.801 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:51.799 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:51.797 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:51.802 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 581.3736ms
2024-12-16 21:20:51.805 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:51.808 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:51.809 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:51.806 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:51.807 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:51.810 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.811 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:51.812 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1420.8429ms
2024-12-16 21:20:51.813 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.814 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:51.818 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.820 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.821 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:51.822 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:51.823 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.824 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.825 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.826 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.824 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.835 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:51.835 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:51.836 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:51.837 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.839 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.840 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:51.841 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:51.838 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.849 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:51.855 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.855 +03:30 [INF] Received HTTP response headers after 497.5046ms - 429
2024-12-16 21:20:51.857 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:51.870 +03:30 [INF] End processing HTTP request after 514.9271ms - 429
2024-12-16 21:20:51.871 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.891 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:51.932 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:51.932 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:51.963 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:51.964 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.966 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:51.982 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.015 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.021 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.018 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.023 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:52.022 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:52.015 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 660.3443ms.
2024-12-16 21:20:52.056 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:52.056 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:52.056 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:52.061 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:52.062 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:52.066 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:52.067 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:52.068 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:52.068 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:52.065 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:52.066 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.072 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 737.0243ms
2024-12-16 21:20:52.074 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.075 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:52.075 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.076 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:52.078 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:52.081 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:52.080 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:52.078 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 779.7739ms
2024-12-16 21:20:52.082 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:52.085 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:52.088 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:52.090 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:52.089 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:52.092 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:52.093 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:52.091 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.094 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.095 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.098 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.099 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.100 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.102 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:52.107 +03:30 [INF] Received HTTP response headers after 249.2048ms - 429
2024-12-16 21:20:52.108 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:52.109 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.111 +03:30 [INF] End processing HTTP request after 272.6667ms - 429
2024-12-16 21:20:52.112 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.113 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.133 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.152 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:52.173 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.194 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:52.195 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.201 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.200 +03:30 [INF] Received HTTP response headers after 280.4422ms - 429
2024-12-16 21:20:52.252 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 415.5106ms.
2024-12-16 21:20:52.229 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.153 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.261 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:52.261 +03:30 [INF] End processing HTTP request after 390.4858ms - 429
2024-12-16 21:20:52.263 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:52.267 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:52.306 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:52.327 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.265 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.266 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.349 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:52.351 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.350 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:52.352 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:52.422 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 565.1527ms.
2024-12-16 21:20:52.398 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:52.360 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:52.440 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:52.441 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:52.442 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:52.444 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:52.448 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:52.450 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:52.453 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:52.454 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:52.454 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:52.455 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:52.452 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.453 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.451 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:52.456 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 636.383ms
2024-12-16 21:20:52.457 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.460 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:52.462 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.461 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 651.1573ms
2024-12-16 21:20:52.475 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:52.476 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 943.2546ms
2024-12-16 21:20:52.477 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.478 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:52.481 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1005.4438ms
2024-12-16 21:20:52.482 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:52.487 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:52.488 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:52.489 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.490 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.490 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.491 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:52.492 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.493 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.494 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.495 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.506 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:52.507 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:52.507 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.508 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.685 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:52.688 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.689 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.690 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.691 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:52.710 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:52.713 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:52.713 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.714 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:52.716 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:52.717 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:52.718 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:52.719 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:52.720 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:52.721 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.722 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:52.732 +03:30 [INF] Received HTTP response headers after 269.2291ms - 429
2024-12-16 21:20:52.732 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.733 +03:30 [INF] End processing HTTP request after 281.4851ms - 429
2024-12-16 21:20:52.734 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:52.762 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.782 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.794 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:52.814 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:52.815 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:52.870 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:52.870 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 425.9154ms.
2024-12-16 21:20:52.872 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:52.873 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:52.874 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.876 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:52.877 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:52.878 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:52.879 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:52.879 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:52.877 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:52.880 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 789.4279ms
2024-12-16 21:20:52.892 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:52.893 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.900 +03:30 [INF] Received HTTP response headers after 512.3623ms - 429
2024-12-16 21:20:52.902 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.903 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 971.2746ms
2024-12-16 21:20:52.904 +03:30 [INF] End processing HTTP request after 576.7173ms - 429
2024-12-16 21:20:52.905 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:52.939 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:52.949 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:52.974 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:52.974 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.000 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:53.004 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.002 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.053 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.078 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.079 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.075 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 808.6514ms.
2024-12-16 21:20:53.076 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.100 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.039 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:53.097 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.098 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:53.023 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.100 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.102 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.105 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.113 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.107 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:53.131 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.131 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.133 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.134 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.135 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:53.140 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.142 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.143 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.144 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.144 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:53.148 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.145 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.149 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.146 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.153 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:53.160 +03:30 [INF] Received HTTP response headers after 649.5633ms - 429
2024-12-16 21:20:53.161 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.162 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.163 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.186 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.181 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:53.182 +03:30 [INF] End processing HTTP request after 674.4681ms - 429
2024-12-16 21:20:53.184 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.185 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.219 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.272 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:53.261 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.274 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.291 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.187 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.180 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.261 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:53.188 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1094.045ms
2024-12-16 21:20:53.326 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 819.4693ms.
2024-12-16 21:20:53.327 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.329 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.330 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.333 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.334 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.335 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.340 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:53.342 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.342 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.344 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.345 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.345 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.346 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1414.513ms
2024-12-16 21:20:53.348 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:53.358 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:53.358 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:53.353 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.354 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.355 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.349 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.352 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.359 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:53.360 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.361 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.362 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.365 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.368 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:53.367 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.369 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.371 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.389 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.390 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.392 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 903.0184ms
2024-12-16 21:20:53.393 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.394 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.395 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.399 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.400 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.401 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.402 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.402 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.404 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.407 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.408 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.409 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1258.0846ms
2024-12-16 21:20:53.410 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.411 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.412 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.413 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.414 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.417 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.418 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.419 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.433 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.433 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.442 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.453 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.423 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.451 +03:30 [INF] Received HTTP response headers after 569.6856ms - 429
2024-12-16 21:20:53.456 +03:30 [INF] End processing HTTP request after 581.8142ms - 429
2024-12-16 21:20:53.452 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.451 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.454 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.502 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.492 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.515 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.444 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.547 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.549 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.564 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.576 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.581 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.546 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:53.579 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.455 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.622 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:53.622 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.647 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 775.3759ms.
2024-12-16 21:20:53.648 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.650 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.652 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.653 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:53.658 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:53.655 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.656 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.654 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.660 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:53.666 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:53.667 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:53.664 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.665 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.662 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.663 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.667 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:53.679 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.679 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.680 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:53.681 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.682 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:53.706 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.684 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.686 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.688 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.707 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 985.265ms
2024-12-16 21:20:53.712 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.715 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.716 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.716 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:53.717 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.718 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.719 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.720 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.738 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:53.739 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.752 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.731 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1045.7297ms
2024-12-16 21:20:53.755 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:53.756 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.757 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.762 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.761 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.760 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:53.765 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.767 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.768 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:53.776 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.778 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.780 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:53.781 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.782 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.783 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:53.784 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.785 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.786 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:53.789 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:53.788 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.787 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.790 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:53.793 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.806 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.807 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.809 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:53.810 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.812 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.813 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.814 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.811 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.822 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.823 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:53.824 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.825 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.826 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.827 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:53.825 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.829 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.828 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:53.849 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:53.855 +03:30 [INF] Received HTTP response headers after 272.2466ms - 429
2024-12-16 21:20:53.855 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:53.856 +03:30 [INF] End processing HTTP request after 280.0178ms - 429
2024-12-16 21:20:53.858 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.887 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:53.948 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:53.999 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 450.0161ms.
2024-12-16 21:20:54.000 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.002 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.003 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.003 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:54.004 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:54.005 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:54.006 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 653.9575ms
2024-12-16 21:20:54.007 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.008 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1058.4096ms
2024-12-16 21:20:54.076 +03:30 [INF] Received HTTP response headers after 246.8473ms - 429
2024-12-16 21:20:54.077 +03:30 [INF] End processing HTTP request after 251.809ms - 429
2024-12-16 21:20:54.142 +03:30 [INF] Received HTTP response headers after 591.6188ms - 429
2024-12-16 21:20:54.165 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.165 +03:30 [INF] End processing HTTP request after 711.4208ms - 429
2024-12-16 21:20:54.206 +03:30 [INF] Received HTTP response headers after 289.9919ms - 429
2024-12-16 21:20:54.225 +03:30 [INF] End processing HTTP request after 366.4604ms - 429
2024-12-16 21:20:54.247 +03:30 [INF] Received HTTP response headers after 506.918ms - 429
2024-12-16 21:20:54.266 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 441.81ms.
2024-12-16 21:20:54.280 +03:30 [INF] End processing HTTP request after 565.5313ms - 429
2024-12-16 21:20:54.305 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.317 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.425 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.437 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:54.527 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1074.2379ms.
2024-12-16 21:20:54.354 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:54.516 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.335 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.551 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:54.553 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.582 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:54.555 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:54.551 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 695.6586ms.
2024-12-16 21:20:54.560 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.610 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 926.1308ms.
2024-12-16 21:20:54.610 +03:30 [INF] Received HTTP response headers after 816.6933ms - 429
2024-12-16 21:20:54.611 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.613 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.613 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:54.622 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.623 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:54.618 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.620 +03:30 [INF] End processing HTTP request after 835.8993ms - 429
2024-12-16 21:20:54.620 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.621 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:54.661 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:54.641 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:54.701 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:54.726 +03:30 [INF] Received HTTP response headers after 1160.4594ms - 429
2024-12-16 21:20:54.711 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:54.615 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.642 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.615 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:54.752 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.752 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:54.755 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:54.756 +03:30 [INF] End processing HTTP request after 1263.3944ms - 429
2024-12-16 21:20:54.759 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:54.823 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1041.8072ms.
2024-12-16 21:20:54.824 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1480.3976ms
2024-12-16 21:20:54.846 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.797 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.761 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.761 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.762 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:54.912 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:54.912 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:54.913 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:54.921 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:54.957 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2064.3253ms
2024-12-16 21:20:54.916 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:54.917 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:54.918 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.918 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:54.919 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:54.984 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1532.388ms.
2024-12-16 21:20:54.985 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:54.992 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:54.994 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:54.996 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:54.996 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:54.997 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1212.5209ms
2024-12-16 21:20:54.999 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:55.000 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:55.002 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:55.003 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:55.004 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.008 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.009 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.011 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:55.012 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.013 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:55.014 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:55.024 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:55.025 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:55.017 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1395.0349ms
2024-12-16 21:20:55.018 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:55.019 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.022 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:55.015 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.016 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1596.5501ms
2024-12-16 21:20:55.026 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.029 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:55.031 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1351.1895ms
2024-12-16 21:20:55.032 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:55.033 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1226.7401ms
2024-12-16 21:20:55.034 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.037 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:55.037 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.046 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.040 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.041 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.042 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.043 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2003.2523ms
2024-12-16 21:20:55.045 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.039 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.047 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:55.048 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1787.3088ms
2024-12-16 21:20:55.050 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.051 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1392.3739ms
2024-12-16 21:20:55.057 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.058 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.059 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.062 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.065 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.066 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1739.7648ms
2024-12-16 21:20:55.067 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.069 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:55.069 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:55.072 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.076 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.075 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.095 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.093 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2120.4913ms
2024-12-16 21:20:55.094 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.093 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:55.104 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:55.108 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.114 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:55.115 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:55.116 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.117 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.117 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.126 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:55.126 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:55.127 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.128 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:55.129 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:55.141 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.144 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:55.145 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.146 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:55.159 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:55.160 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:55.162 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.162 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.163 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.164 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:55.166 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.166 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.169 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.170 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.179 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:55.180 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:55.181 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.182 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.385 +03:30 [INF] Received HTTP response headers after 254.637ms - 429
2024-12-16 21:20:55.386 +03:30 [INF] End processing HTTP request after 269.1574ms - 429
2024-12-16 21:20:55.400 +03:30 [INF] Received HTTP response headers after 253.0753ms - 429
2024-12-16 21:20:55.411 +03:30 [INF] End processing HTTP request after 269.787ms - 429
2024-12-16 21:20:55.442 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:55.469 +03:30 [INF] Received HTTP response headers after 285.1758ms - 429
2024-12-16 21:20:55.499 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.522 +03:30 [INF] End processing HTTP request after 341.4005ms - 429
2024-12-16 21:20:55.509 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:55.556 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.644 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.556 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:55.655 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:55.665 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:55.745 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:55.689 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 574.675ms.
2024-12-16 21:20:55.756 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 628.3102ms.
2024-12-16 21:20:55.808 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 627.9617ms.
2024-12-16 21:20:55.810 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:55.812 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:55.813 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:55.815 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:55.816 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.819 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:55.825 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:55.824 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:55.824 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:55.822 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:55.826 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:55.826 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:55.828 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:55.828 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:55.829 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.835 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.833 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:55.834 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:55.829 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:55.839 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.837 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:55.840 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:55.836 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 810.2454ms
2024-12-16 21:20:55.839 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.838 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:55.841 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:55.843 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.844 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 682.1394ms
2024-12-16 21:20:55.846 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:55.848 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.848 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1494.735ms
2024-12-16 21:20:55.849 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.850 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 809.4907ms
2024-12-16 21:20:55.851 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:55.854 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 817.2574ms
2024-12-16 21:20:55.855 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.856 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.861 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1424.546ms
2024-12-16 21:20:55.862 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:55.865 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.866 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.867 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:55.868 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:55.877 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:55.878 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:55.879 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.880 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:55.966 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:55.969 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.970 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.971 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:55.972 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:55.983 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:55.991 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:55.994 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.997 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:55.998 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:55.999 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.000 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.001 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.002 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.003 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.023 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.024 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.028 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.029 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.030 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.032 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.032 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.033 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.035 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.036 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.037 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.039 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.040 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.041 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.038 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.042 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.043 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.044 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.048 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.049 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.050 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.051 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.052 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.053 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.051 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.054 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.056 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.055 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.065 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.066 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.067 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.067 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.078 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.069 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.078 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.079 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.080 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.081 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.082 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.083 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.083 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.086 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.098 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.085 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.100 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.112 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.114 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.146 +03:30 [INF] Received HTTP response headers after 265.6333ms - 429
2024-12-16 21:20:56.154 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.154 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.154 +03:30 [INF] End processing HTTP request after 275.228ms - 429
2024-12-16 21:20:56.157 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.160 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.172 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.182 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.201 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.221 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.246 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:56.247 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.248 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.275 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.297 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 418.9894ms.
2024-12-16 21:20:56.300 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.301 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.304 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.303 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.302 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:56.308 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:56.306 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.305 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.308 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:56.309 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.311 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.313 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:56.315 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.316 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.316 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:56.319 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:56.319 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.318 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.320 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 472.812ms
2024-12-16 21:20:56.321 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.322 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.323 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.326 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.328 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.330 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 887.8475ms
2024-12-16 21:20:56.331 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.337 +03:30 [INF] Received HTTP response headers after 250.1418ms - 429
2024-12-16 21:20:56.338 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.341 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.342 +03:30 [INF] End processing HTTP request after 263.3188ms - 429
2024-12-16 21:20:56.343 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.344 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.355 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.393 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.400 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.429 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.439 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.439 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:56.439 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.441 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.461 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.497 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.495 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 427.0904ms.
2024-12-16 21:20:56.495 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.440 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.512 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:56.513 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.514 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.516 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:56.518 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:56.518 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:56.519 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:56.520 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:56.516 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.517 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.521 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 479.0629ms
2024-12-16 21:20:56.548 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.550 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.555 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.556 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 572.4397ms
2024-12-16 21:20:56.557 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.559 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.561 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.562 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.563 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.566 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.566 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.568 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.570 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.569 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.571 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.573 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.573 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.574 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.585 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.591 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.593 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.596 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.597 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.598 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.599 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.601 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.602 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.600 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.611 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.612 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.612 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.614 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.615 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.614 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.616 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.617 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.620 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.633 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.634 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.635 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.636 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:56.637 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.638 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.639 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:56.640 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:56.649 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:56.650 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:56.650 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.651 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:56.686 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.688 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.689 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.690 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.691 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.702 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.709 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.711 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.715 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.716 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:56.717 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.718 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.719 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.720 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:56.721 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.738 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:56.739 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.742 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:56.743 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:56.744 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:56.750 +03:30 [INF] Received HTTP response headers after 251.1105ms - 429
2024-12-16 21:20:56.750 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:56.752 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:56.754 +03:30 [INF] End processing HTTP request after 293.6224ms - 429
2024-12-16 21:20:56.756 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:56.757 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:56.800 +03:30 [INF] Received HTTP response headers after 269.0578ms - 429
2024-12-16 21:20:56.777 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:56.838 +03:30 [INF] Received HTTP response headers after 737.4804ms - 429
2024-12-16 21:20:56.802 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:56.832 +03:30 [INF] End processing HTTP request after 318.1423ms - 429
2024-12-16 21:20:56.848 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:56.849 +03:30 [INF] End processing HTTP request after 765.8411ms - 429
2024-12-16 21:20:56.922 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:56.850 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:57.004 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.038 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:57.003 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:56.848 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.072 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.072 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:57.073 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:57.128 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.169 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.127 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 687.6748ms.
2024-12-16 21:20:57.182 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1102.1513ms.
2024-12-16 21:20:57.183 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:57.184 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.195 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:57.193 +03:30 [INF] Received HTTP response headers after 541.3539ms - 429
2024-12-16 21:20:57.187 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:57.091 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.003 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 564.1166ms.
2024-12-16 21:20:57.215 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:57.215 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.218 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:57.229 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:57.222 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:57.223 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:57.224 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:57.227 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:57.228 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:57.220 +03:30 [INF] End processing HTTP request after 569.5453ms - 429
2024-12-16 21:20:57.229 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:57.237 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.267 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:57.278 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:57.238 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.230 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:57.232 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.235 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:57.321 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:57.322 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:57.326 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:57.373 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1337.6635ms
2024-12-16 21:20:57.373 +03:30 [INF] Received HTTP response headers after 752.6177ms - 429
2024-12-16 21:20:57.328 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.385 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 735.679ms.
2024-12-16 21:20:57.329 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:57.330 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.331 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:57.385 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:57.387 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:57.388 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.390 +03:30 [INF] End processing HTTP request after 775.3762ms - 429
2024-12-16 21:20:57.391 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.401 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1434.6279ms
2024-12-16 21:20:57.399 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.400 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:57.491 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:57.394 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:57.396 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:57.397 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.496 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.488 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:57.490 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.506 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:57.493 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:57.423 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.495 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:57.559 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.546 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.557 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 944.8313ms.
2024-12-16 21:20:57.561 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.496 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:57.506 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:57.397 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:57.571 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:57.571 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:57.572 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:57.573 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:57.575 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:57.583 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.576 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.581 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:57.582 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:57.576 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1261.6752ms
2024-12-16 21:20:57.578 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:57.580 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:57.601 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:57.603 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:57.614 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:57.606 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.606 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.616 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.609 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.603 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:57.613 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:57.615 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:57.615 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:57.608 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:57.652 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:57.610 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.611 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:57.647 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:57.648 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.650 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:57.651 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.630 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1563.9693ms
2024-12-16 21:20:57.653 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1019.569ms
2024-12-16 21:20:57.653 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.654 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1343.5017ms
2024-12-16 21:20:57.657 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:57.660 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:57.662 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:57.663 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.665 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.678 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.679 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.681 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:57.682 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1109.0933ms
2024-12-16 21:20:57.682 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.683 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1117.7041ms
2024-12-16 21:20:57.684 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1605.7666ms
2024-12-16 21:20:57.687 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:57.688 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:57.689 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:57.690 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.695 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:57.696 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:57.697 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1258.264ms
2024-12-16 21:20:57.707 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:57.708 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:57.709 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:57.714 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:57.715 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:57.718 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:57.717 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.717 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:57.719 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:57.720 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.721 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.722 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.735 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.736 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:57.737 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.739 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.740 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:57.742 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:57.744 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.745 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.745 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.746 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.743 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.755 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:57.755 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.757 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:57.756 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:57.758 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:57.759 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.768 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:57.768 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.769 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:57.781 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.783 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:57.923 +03:30 [INF] Received HTTP response headers after 257.1955ms - 429
2024-12-16 21:20:57.926 +03:30 [INF] End processing HTTP request after 316.1352ms - 429
2024-12-16 21:20:57.995 +03:30 [INF] Received HTTP response headers after 271.9299ms - 429
2024-12-16 21:20:58.016 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:58.017 +03:30 [INF] End processing HTTP request after 299.159ms - 429
2024-12-16 21:20:58.029 +03:30 [INF] Received HTTP response headers after 259.1486ms - 429
2024-12-16 21:20:58.059 +03:30 [INF] Received HTTP response headers after 275.0956ms - 429
2024-12-16 21:20:58.059 +03:30 [INF] End processing HTTP request after 300.0502ms - 429
2024-12-16 21:20:58.098 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 520.0424ms.
2024-12-16 21:20:58.087 +03:30 [INF] End processing HTTP request after 306.5841ms - 429
2024-12-16 21:20:58.151 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:58.243 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:58.244 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:58.321 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:58.332 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:58.367 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 652.6352ms.
2024-12-16 21:20:58.383 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:58.287 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:58.419 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 650.1812ms.
2024-12-16 21:20:58.423 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:58.420 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:58.462 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:58.473 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 716.481ms.
2024-12-16 21:20:58.474 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:58.476 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:58.478 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:58.482 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:58.483 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:58.483 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:58.480 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:58.481 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1703.29ms
2024-12-16 21:20:58.489 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.484 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:58.488 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:58.481 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:58.490 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1803.9052ms
2024-12-16 21:20:58.491 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 769.5179ms
2024-12-16 21:20:58.492 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:58.496 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:58.497 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:58.497 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:58.495 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.492 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:58.500 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 778.1013ms
2024-12-16 21:20:58.502 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1116.3992ms
2024-12-16 21:20:58.502 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:58.503 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.506 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:58.507 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1001.071ms
2024-12-16 21:20:58.508 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 947.3126ms
2024-12-16 21:20:58.511 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.512 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1590.0605ms
2024-12-16 21:20:58.636 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:58.638 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.639 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.641 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.641 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:58.661 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:58.666 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:58.666 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.667 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:58.669 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:58.670 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:58.671 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:58.674 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:58.675 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:58.676 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.677 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.678 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.679 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:58.680 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.680 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.681 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.682 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.692 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:58.693 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:58.693 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.694 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.706 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:58.710 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.711 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.712 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.713 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:58.730 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:58.733 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:58.734 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.735 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:58.736 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:58.737 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:58.740 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:58.741 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:58.743 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.744 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:58.745 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.746 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:58.747 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.748 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.749 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:58.750 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.760 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:58.767 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:58.768 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.770 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.774 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.773 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:58.776 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.775 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.772 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:58.777 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.778 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:58.781 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.782 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.799 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:58.799 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:58.800 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.804 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:58.807 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:58.816 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:58.817 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.818 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:58.821 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:58.822 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:58.823 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:58.826 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:58.827 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:58.823 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.825 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:58.828 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.828 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.829 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:58.830 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.842 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:58.844 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:58.846 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.848 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.850 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:58.852 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.849 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:58.853 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:58.852 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:58.850 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:58.854 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.871 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:58.871 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.873 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.878 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:58.878 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.881 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.880 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:58.879 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.883 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:58.883 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:58.882 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.885 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.888 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:58.896 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:58.897 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.898 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:58.900 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:58.901 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.902 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:58.905 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:58.906 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:58.903 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.907 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.907 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.904 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.921 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:58.930 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:58.930 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.932 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:58.933 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:58.934 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.936 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.937 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.940 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.956 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:58.957 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:58.970 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:58.971 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:58.972 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.973 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:58.994 +03:30 [INF] Received HTTP response headers after 1376.3605ms - 429
2024-12-16 21:20:58.997 +03:30 [INF] End processing HTTP request after 1391.1183ms - 429
2024-12-16 21:20:59.096 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:59.155 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1574.0427ms.
2024-12-16 21:20:59.157 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:59.159 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:59.160 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:59.160 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:59.161 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:59.162 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:59.163 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1993.7917ms
2024-12-16 21:20:59.164 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.167 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2465.0619ms
2024-12-16 21:20:59.181 +03:30 [INF] Received HTTP response headers after 272.4503ms - 429
2024-12-16 21:20:59.182 +03:30 [INF] End processing HTTP request after 279.298ms - 429
2024-12-16 21:20:59.239 +03:30 [INF] Received HTTP response headers after 264.8024ms - 429
2024-12-16 21:20:59.261 +03:30 [INF] End processing HTTP request after 289.1358ms - 429
2024-12-16 21:20:59.262 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:59.272 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:59.314 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.359 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:59.373 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.416 +03:30 [INF] Received HTTP response headers after 584.6716ms - 429
2024-12-16 21:20:59.456 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.416 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 516.1891ms.
2024-12-16 21:20:59.468 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 496.9596ms.
2024-12-16 21:20:59.469 +03:30 [INF] End processing HTTP request after 645.7768ms - 429
2024-12-16 21:20:59.470 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:59.475 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:59.524 +03:30 [INF] Received HTTP response headers after 582.2495ms - 429
2024-12-16 21:20:59.556 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:59.570 +03:30 [INF] End processing HTTP request after 635.927ms - 429
2024-12-16 21:20:59.543 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:59.584 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.582 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:59.621 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.695 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:59.708 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.679 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:20:59.600 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:59.554 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:59.739 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.801 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.736 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 915.3068ms.
2024-12-16 21:20:59.750 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:59.473 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:59.798 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 866.1786ms.
2024-12-16 21:20:59.799 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:59.741 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:59.802 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.810 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:59.804 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:20:59.834 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:59.836 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:59.836 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:59.837 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:59.838 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:59.831 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:59.840 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:59.840 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:59.841 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:59.842 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:59.829 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:59.839 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1090.8601ms
2024-12-16 21:20:59.829 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:59.843 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 988.5561ms
2024-12-16 21:20:59.805 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:59.811 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.808 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:20:59.861 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:59.861 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.864 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:59.865 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.866 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:59.867 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:59.867 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:20:59.870 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:59.871 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1165.1058ms
2024-12-16 21:20:59.872 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.875 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1116.0508ms
2024-12-16 21:20:59.876 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 969.8161ms
2024-12-16 21:20:59.878 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:59.879 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:20:59.880 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.882 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:59.885 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.888 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:59.889 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:20:59.889 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:59.891 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:59.892 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1049.8601ms
2024-12-16 21:20:59.892 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:59.893 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:20:59.895 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:59.896 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:59.901 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:59.903 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1075.1213ms
2024-12-16 21:20:59.904 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:20:59.908 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:59.906 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:59.907 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.905 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:20:59.909 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:59.912 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:20:59.910 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.911 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1170.5598ms
2024-12-16 21:20:59.914 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:20:59.915 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:59.916 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:20:59.917 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.921 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.924 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:20:59.923 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.924 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.922 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.928 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.929 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.930 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:59.931 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:20:59.932 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:20:59.933 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.935 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.934 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.952 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:20:59.952 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:59.954 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:20:59.960 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.961 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.962 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.963 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.959 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:20:59.959 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.955 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.972 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:20:59.972 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:20:59.974 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.974 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.975 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:20:59.976 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:20:59.977 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:20:59.978 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.979 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:59.983 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:20:59.980 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:20:59.993 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:20:59.992 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.001 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.002 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:00.015 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.016 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.017 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:00.018 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.020 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.021 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:00.023 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.024 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.025 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:00.051 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.052 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.053 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.054 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:00.055 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.056 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.057 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.058 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.068 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.068 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.069 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.070 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.321 +03:30 [INF] Received HTTP response headers after 250.1075ms - 429
2024-12-16 21:21:00.323 +03:30 [INF] End processing HTTP request after 253.4608ms - 429
2024-12-16 21:21:00.410 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:00.426 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:00.461 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 392.5999ms.
2024-12-16 21:21:00.462 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.463 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:00.464 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.466 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:00.468 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:00.467 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.468 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:00.469 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:00.470 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:00.488 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:00.488 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:00.496 +03:30 [INF] Received HTTP response headers after 493.062ms - 429
2024-12-16 21:21:00.496 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:00.497 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 446.9781ms
2024-12-16 21:21:00.498 +03:30 [INF] End processing HTTP request after 519.544ms - 429
2024-12-16 21:21:00.501 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.503 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.523 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:00.542 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 628.6729ms
2024-12-16 21:21:00.584 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:00.590 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:00.591 +03:30 [INF] Received HTTP response headers after 564.7378ms - 429
2024-12-16 21:21:00.631 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:00.642 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 666.2367ms.
2024-12-16 21:21:00.642 +03:30 [INF] End processing HTTP request after 624.1577ms - 429
2024-12-16 21:21:00.644 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:00.667 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:00.676 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:00.645 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:00.727 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:00.728 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.729 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:00.757 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.731 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:00.781 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 765.9174ms.
2024-12-16 21:21:00.781 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.782 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.784 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:00.788 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:00.789 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:00.790 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:00.786 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:00.787 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.788 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:00.791 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 869.3168ms
2024-12-16 21:21:00.796 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.794 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:00.815 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:00.813 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:00.814 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:00.806 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.815 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:00.818 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:00.821 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.822 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1127.2195ms
2024-12-16 21:21:00.823 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:00.825 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.826 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.828 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:00.829 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:00.830 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.831 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 921.3345ms
2024-12-16 21:21:00.834 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:00.836 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.837 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.838 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:00.847 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.847 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1585.3268ms
2024-12-16 21:21:00.848 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:00.849 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.852 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:00.854 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:00.853 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.856 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.855 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.869 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.870 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.871 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:00.872 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.874 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.875 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:00.875 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.877 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.878 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.879 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:00.888 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.889 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.891 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.891 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:00.892 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.909 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:00.909 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.916 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:00.928 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:00.930 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:00.931 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:00.933 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:00.934 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:00.935 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:00.936 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:00.937 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.938 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:00.938 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.941 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:00.943 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.944 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.945 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:00.946 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:00.955 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:00.956 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:00.957 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:00.959 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.196 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:01.199 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.199 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.201 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.202 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:01.218 +03:30 [INF] Received HTTP response headers after 258.749ms - 429
2024-12-16 21:21:01.225 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:01.226 +03:30 [INF] End processing HTTP request after 268.7222ms - 429
2024-12-16 21:21:01.230 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:01.251 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.269 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:01.293 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:01.314 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:01.315 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:01.333 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:01.374 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 417.4448ms.
2024-12-16 21:21:01.374 +03:30 [INF] Received HTTP response headers after 516.786ms - 429
2024-12-16 21:21:01.374 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:01.375 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:01.376 +03:30 [INF] End processing HTTP request after 523.2531ms - 429
2024-12-16 21:21:01.378 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:01.380 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:01.423 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:01.423 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.425 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:01.473 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:01.474 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.475 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.505 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.531 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:01.531 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 681.256ms.
2024-12-16 21:21:01.518 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.476 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:01.533 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.534 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.535 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:01.537 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:01.538 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:01.546 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:01.542 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:01.544 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:01.545 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.538 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:01.547 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 610.3774ms
2024-12-16 21:21:01.550 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.549 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.549 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:01.561 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.569 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:01.570 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.571 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:01.572 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:01.576 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:01.587 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:01.576 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.573 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 698.2813ms
2024-12-16 21:21:01.595 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:01.597 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.598 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:01.606 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:01.613 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:01.614 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:01.615 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 834.5275ms
2024-12-16 21:21:01.616 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:01.617 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.619 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:01.622 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:01.623 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.624 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:01.625 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:01.626 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1199.7581ms
2024-12-16 21:21:01.627 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.628 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:01.630 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:01.648 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:01.649 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:01.650 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:01.651 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:01.652 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:01.653 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.654 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:01.655 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.656 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.657 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.658 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:01.659 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:01.662 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.664 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.665 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:01.666 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.668 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.669 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.667 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.677 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:01.679 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.681 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:01.682 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:01.683 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:01.683 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.692 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:01.692 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.693 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:01.706 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:01.707 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.088 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:02.093 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.095 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.098 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.098 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:02.117 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:02.117 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:02.121 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:02.126 +03:30 [INF] Received HTTP response headers after 430.6272ms - 429
2024-12-16 21:21:02.128 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.129 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.130 +03:30 [INF] End processing HTTP request after 447.4978ms - 429
2024-12-16 21:21:02.131 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.132 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:02.205 +03:30 [INF] Received HTTP response headers after 570.2367ms - 429
2024-12-16 21:21:02.205 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:02.152 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.216 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:02.216 +03:30 [INF] End processing HTTP request after 593.0647ms - 429
2024-12-16 21:21:02.221 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:02.218 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:02.238 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:02.322 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:02.322 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:02.358 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.375 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:02.369 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:02.370 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:02.374 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:02.376 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.306 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 625.4325ms.
2024-12-16 21:21:02.426 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 809.5377ms.
2024-12-16 21:21:02.426 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:02.427 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.429 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:02.430 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:02.432 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.431 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:02.457 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:02.453 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:02.454 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:02.455 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.435 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:02.466 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:02.467 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:02.464 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:02.465 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.470 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:02.471 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.468 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:02.469 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:02.476 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:02.463 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:02.478 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.475 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:02.458 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:02.477 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:02.472 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.479 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:02.480 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:02.481 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:02.482 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 829.0526ms
2024-12-16 21:21:02.483 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.485 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:02.486 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.489 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:02.492 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.493 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.494 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:02.496 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:02.495 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.496 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1073.3677ms
2024-12-16 21:21:02.506 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:02.506 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:02.508 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1093.8453ms
2024-12-16 21:21:02.509 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.512 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:02.513 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:02.515 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.517 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:02.518 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.519 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:02.520 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1324.1447ms
2024-12-16 21:21:02.521 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.522 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.523 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.526 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.541 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:02.542 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.543 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.544 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.545 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:02.554 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:02.555 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.556 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:02.557 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.558 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.559 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:02.560 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.561 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:02.582 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:02.583 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:02.584 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.585 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:02.813 +03:30 [INF] Received HTTP response headers after 251.5241ms - 429
2024-12-16 21:21:02.815 +03:30 [INF] End processing HTTP request after 256.6467ms - 429
2024-12-16 21:21:02.898 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:02.951 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 395.1765ms.
2024-12-16 21:21:02.953 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:02.956 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:02.957 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:02.957 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:02.958 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:02.959 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:02.960 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 474.7096ms
2024-12-16 21:21:02.962 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:02.963 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 845.5302ms
2024-12-16 21:21:03.027 +03:30 [INF] Received HTTP response headers after 498.1049ms - 429
2024-12-16 21:21:03.028 +03:30 [INF] End processing HTTP request after 509.6624ms - 429
2024-12-16 21:21:03.113 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:03.164 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 652.3494ms.
2024-12-16 21:21:03.166 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:03.168 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:03.169 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:03.170 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:03.171 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:03.172 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:03.173 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 741.0725ms
2024-12-16 21:21:03.175 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.176 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1087.8882ms
2024-12-16 21:21:03.184 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:03.185 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.186 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.188 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.189 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:03.199 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:03.207 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:03.208 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.212 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:03.213 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.215 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.216 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.217 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:03.217 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:03.219 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:03.237 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:03.237 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:03.241 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:03.242 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:03.244 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:03.245 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:03.243 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.246 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.249 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:03.250 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.251 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:03.252 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.254 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:03.254 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:03.255 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:03.256 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.257 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:03.258 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.259 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:03.260 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.263 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.264 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.265 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.274 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:03.276 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:03.275 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.277 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:03.278 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.281 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:03.280 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.279 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:03.282 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.283 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.284 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.285 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:03.299 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.309 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.316 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:03.317 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.321 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:03.330 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:03.331 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:03.332 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:03.333 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:03.334 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.335 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:03.336 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.337 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:03.350 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:03.351 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:03.352 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:03.355 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.356 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:03.357 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.358 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:03.360 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.361 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.361 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:03.362 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:03.371 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:03.372 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:03.373 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.374 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:03.546 +03:30 [INF] Received HTTP response headers after 260.7615ms - 429
2024-12-16 21:21:03.548 +03:30 [INF] End processing HTTP request after 268.0404ms - 429
2024-12-16 21:21:03.601 +03:30 [INF] Received HTTP response headers after 263.1145ms - 429
2024-12-16 21:21:03.626 +03:30 [INF] End processing HTTP request after 292.9374ms - 429
2024-12-16 21:21:03.646 +03:30 [INF] Received HTTP response headers after 271.9857ms - 429
2024-12-16 21:21:03.668 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:03.669 +03:30 [INF] End processing HTTP request after 295.9679ms - 429
2024-12-16 21:21:03.769 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:03.864 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 587.658ms.
2024-12-16 21:21:03.879 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:03.923 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 591.3929ms.
2024-12-16 21:21:03.934 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:03.935 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:03.944 +03:30 [INF] Received HTTP response headers after 5249.3462ms - 429
2024-12-16 21:21:03.949 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:03.936 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:03.973 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:04.001 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.002 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.003 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.000 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:03.973 +03:30 [INF] End processing HTTP request after 5279.8999ms - 429
2024-12-16 21:21:03.974 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:04.004 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:04.025 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:04.005 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:04.078 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:04.072 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:04.090 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:03.999 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 626.8831ms.
2024-12-16 21:21:04.100 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:04.105 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:04.106 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 859.5657ms
2024-12-16 21:21:04.134 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.106 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:04.160 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:04.157 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5464.5447ms.
2024-12-16 21:21:04.158 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.159 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:04.108 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:04.161 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 897.925ms
2024-12-16 21:21:04.163 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:04.164 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 980.4496ms
2024-12-16 21:21:04.165 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:04.169 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:04.170 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.172 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:04.177 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:04.178 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:04.176 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 977.4346ms
2024-12-16 21:21:04.175 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:04.176 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:04.185 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:04.185 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:04.186 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:04.184 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:04.178 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:04.187 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 832.4976ms
2024-12-16 21:21:04.188 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:04.191 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:04.190 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.189 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:04.192 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.192 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 917.0308ms
2024-12-16 21:21:04.194 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5517.6459ms
2024-12-16 21:21:04.197 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.200 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.201 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.202 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5566.011ms
2024-12-16 21:21:04.203 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:04.206 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.206 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.209 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.211 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.220 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:04.221 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:04.223 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.224 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.476 +03:30 [INF] Received HTTP response headers after 251.4913ms - 429
2024-12-16 21:21:04.478 +03:30 [INF] End processing HTTP request after 254.9311ms - 429
2024-12-16 21:21:04.511 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:04.565 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:04.566 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.596 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.618 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 396.7365ms.
2024-12-16 21:21:04.620 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.625 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:04.627 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:04.628 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:04.629 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:04.630 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:04.630 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:04.626 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:04.631 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 439.7743ms
2024-12-16 21:21:04.649 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:04.650 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.652 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:04.653 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 679.8447ms
2024-12-16 21:21:04.654 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.657 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:04.658 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:04.660 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:04.663 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:04.664 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:04.665 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:04.666 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.667 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.668 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.669 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:04.670 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.671 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.672 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.673 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.683 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:04.684 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:04.686 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.687 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.879 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:04.882 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.883 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:04.885 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.885 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:04.904 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:04.909 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:04.910 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:04.910 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:04.912 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:04.913 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:04.914 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:04.917 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:04.918 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:04.920 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.921 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:04.921 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.922 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:04.923 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.925 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.925 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:04.926 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:04.937 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:04.939 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:04.944 +03:30 [INF] Received HTTP response headers after 255.4784ms - 429
2024-12-16 21:21:04.945 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.946 +03:30 [INF] End processing HTTP request after 260.3346ms - 429
2024-12-16 21:21:04.948 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:04.959 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:05.013 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.037 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.048 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:05.052 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.081 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:05.121 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:05.121 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 437.1983ms.
2024-12-16 21:21:05.125 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:05.126 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:05.127 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.129 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:05.129 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:05.130 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:05.131 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:05.132 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:05.132 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:05.133 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:05.134 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:05.131 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:05.135 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.135 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:05.136 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.136 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:05.137 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.139 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:05.139 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.140 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.138 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 471.4903ms
2024-12-16 21:21:05.144 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.145 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.146 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.146 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 634.9034ms
2024-12-16 21:21:05.156 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:05.158 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:05.158 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.159 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.288 +03:30 [INF] Received HTTP response headers after 5249.6457ms - 429
2024-12-16 21:21:05.289 +03:30 [INF] End processing HTTP request after 5269.5328ms - 429
2024-12-16 21:21:05.374 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:05.427 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5411.0661ms.
2024-12-16 21:21:05.433 +03:30 [INF] Received HTTP response headers after 272.915ms - 429
2024-12-16 21:21:05.433 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:05.434 +03:30 [INF] End processing HTTP request after 275.635ms - 429
2024-12-16 21:21:05.436 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:05.456 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:05.476 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:05.498 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:05.519 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:05.519 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:05.557 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5634.238ms
2024-12-16 21:21:05.564 +03:30 [INF] Received HTTP response headers after 604.4003ms - 429
2024-12-16 21:21:05.575 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 416.7964ms.
2024-12-16 21:21:05.575 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.576 +03:30 [INF] End processing HTTP request after 631.0383ms - 429
2024-12-16 21:21:05.577 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:05.578 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6022.1637ms
2024-12-16 21:21:05.663 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:05.664 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:05.669 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:05.703 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:05.716 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 777.2835ms.
2024-12-16 21:21:05.717 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:05.718 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:05.720 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:05.721 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:05.722 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 586.8252ms
2024-12-16 21:21:05.722 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:05.724 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.724 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:05.725 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 765.8454ms
2024-12-16 21:21:05.725 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:05.730 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:05.731 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 811.09ms
2024-12-16 21:21:05.731 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.732 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 853.1882ms
2024-12-16 21:21:05.742 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:05.744 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.745 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.746 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.746 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:05.764 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:05.765 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:05.765 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.766 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:05.767 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:05.769 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:05.770 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:05.771 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.773 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.773 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.772 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:05.775 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:05.774 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:05.776 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:05.794 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:05.794 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.796 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:05.797 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.797 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.798 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.799 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:05.800 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:05.801 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:05.802 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:05.803 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:05.803 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:05.799 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:05.805 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.806 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.806 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.807 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.804 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.817 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:05.817 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.818 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:05.819 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.819 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.820 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:05.820 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.822 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.825 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.836 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.837 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.845 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:05.846 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:05.847 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.847 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.849 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:05.866 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.867 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:05.868 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.868 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:05.886 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:05.889 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:05.890 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:05.891 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:05.891 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:05.892 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:05.893 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:05.894 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:05.895 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:05.896 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.896 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:05.897 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.898 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:05.899 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.899 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.900 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:05.901 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:05.911 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:05.912 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:05.912 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:05.913 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.074 +03:30 [INF] Received HTTP response headers after 250.9511ms - 429
2024-12-16 21:21:06.076 +03:30 [INF] End processing HTTP request after 257.1375ms - 429
2024-12-16 21:21:06.157 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:06.188 +03:30 [INF] Received HTTP response headers after 274.1525ms - 429
2024-12-16 21:21:06.200 +03:30 [INF] End processing HTTP request after 287.6801ms - 429
2024-12-16 21:21:06.210 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 392.4849ms.
2024-12-16 21:21:06.231 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:06.260 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:06.271 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:06.282 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:06.292 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:06.293 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:06.296 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:06.329 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 534.8092ms
2024-12-16 21:21:06.341 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 429.254ms.
2024-12-16 21:21:06.343 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.343 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:06.344 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 601.753ms
2024-12-16 21:21:06.345 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:06.347 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:06.348 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:06.348 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:06.349 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:06.350 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 453.9776ms
2024-12-16 21:21:06.350 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.351 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 501.5994ms
2024-12-16 21:21:06.370 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:06.372 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.372 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.373 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.374 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:06.391 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:06.392 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:06.393 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.393 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:06.394 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:06.397 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:06.397 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:06.398 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:06.399 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:06.401 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.401 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.402 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.403 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:06.404 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.404 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.405 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.406 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.414 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:06.415 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:06.416 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.416 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.543 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:06.547 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.547 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.548 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.549 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:06.565 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:06.567 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:06.567 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.569 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:06.570 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:06.571 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:06.572 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:06.572 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:06.573 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:06.574 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.575 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.576 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.576 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:06.577 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.578 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.578 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.579 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.589 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:06.589 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:06.590 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:06.591 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.592 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.592 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.594 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.593 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.596 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:06.624 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:06.626 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:06.627 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.627 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:06.628 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:06.629 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:06.630 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:06.631 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:06.632 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:06.633 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.634 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:06.634 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.637 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:06.638 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.639 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.639 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:06.640 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:06.649 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:06.650 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:06.650 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.651 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:06.967 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:06.972 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.973 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:06.974 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.975 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:06.993 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:06.994 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:06.995 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:06.996 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:06.997 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:06.998 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:06.999 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:07.002 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:07.003 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:07.004 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.005 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.006 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.006 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:07.007 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.008 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.009 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.010 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.019 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:07.020 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:07.020 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:07.021 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:07.126 +03:30 [INF] Received HTTP response headers after 709.6214ms - 429
2024-12-16 21:21:07.127 +03:30 [INF] End processing HTTP request after 711.7699ms - 429
2024-12-16 21:21:07.193 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:07.214 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:07.215 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:07.218 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:07.240 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.264 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 848.9231ms.
2024-12-16 21:21:07.264 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:07.265 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:07.295 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:07.302 +03:30 [INF] Received HTTP response headers after 278.211ms - 429
2024-12-16 21:21:07.303 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:07.304 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:07.305 +03:30 [INF] End processing HTTP request after 284.4914ms - 429
2024-12-16 21:21:07.305 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:07.306 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.317 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:07.364 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:07.376 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:07.363 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:07.423 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:07.424 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:07.425 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:07.463 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:07.426 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:07.475 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 455.1627ms.
2024-12-16 21:21:07.476 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1075.6898ms
2024-12-16 21:21:07.477 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.478 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:07.479 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:07.480 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.480 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:07.481 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:07.483 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:07.483 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1113.7244ms
2024-12-16 21:21:07.501 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:07.501 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:07.503 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:07.506 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:07.507 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:07.507 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:07.508 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.509 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.509 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:07.510 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:07.512 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:07.511 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:07.511 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.513 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:07.514 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 509.8225ms
2024-12-16 21:21:07.515 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.519 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:07.519 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:07.520 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:07.521 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:07.521 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 554.1428ms
2024-12-16 21:21:07.522 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.525 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.526 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.523 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:07.527 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.528 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.537 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:07.538 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:07.539 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:07.539 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.540 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:07.541 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:07.540 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:07.554 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.555 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.557 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:07.557 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:07.566 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:07.566 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:07.567 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:07.567 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:08.084 +03:30 [INF] Received HTTP response headers after 5498.557ms - 429
2024-12-16 21:21:08.085 +03:30 [INF] End processing HTTP request after 5501.4932ms - 429
2024-12-16 21:21:08.176 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:08.227 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5644.1368ms.
2024-12-16 21:21:08.229 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:08.230 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:08.230 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:08.231 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:08.231 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:08.232 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:08.233 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5709.3435ms
2024-12-16 21:21:08.233 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.234 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5995.67ms
2024-12-16 21:21:08.490 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:08.492 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:08.493 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:08.494 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.494 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:08.514 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:08.515 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:08.517 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.518 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:08.519 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:08.520 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:08.521 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:08.522 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:08.523 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:08.523 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:08.524 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:08.525 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:08.526 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:08.526 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.527 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.528 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:08.530 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.539 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:08.540 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:08.540 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:08.541 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:08.799 +03:30 [INF] Received HTTP response headers after 257.7519ms - 429
2024-12-16 21:21:08.801 +03:30 [INF] End processing HTTP request after 260.501ms - 429
2024-12-16 21:21:08.882 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:08.882 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:08.908 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:08.930 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 389.7715ms.
2024-12-16 21:21:08.930 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:08.932 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.931 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:08.934 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:08.934 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:08.935 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:08.935 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:08.936 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:08.933 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:08.937 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 413.2182ms
2024-12-16 21:21:08.947 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.954 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:08.954 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 463.993ms
2024-12-16 21:21:08.955 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:08.959 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:08.959 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:08.960 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:08.961 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:08.962 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:08.963 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:08.963 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:08.964 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:08.965 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:08.966 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:08.966 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:08.967 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.968 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.968 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:08.971 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:08.982 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:08.985 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:08.986 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:08.986 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:09.021 +03:30 [INF] Received HTTP response headers after 2424.8564ms - 429
2024-12-16 21:21:09.022 +03:30 [INF] End processing HTTP request after 2430.6559ms - 429
2024-12-16 21:21:09.108 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:09.159 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2569.3695ms.
2024-12-16 21:21:09.161 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:09.162 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:09.162 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:09.163 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:09.163 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:09.164 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:09.165 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2590.5707ms
2024-12-16 21:21:09.166 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.167 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2623.875ms
2024-12-16 21:21:09.331 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:09.333 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:09.334 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:09.335 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.335 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:09.354 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:09.355 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:09.355 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.358 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:09.359 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:09.360 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:09.361 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:09.361 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:09.362 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:09.363 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:09.364 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:09.364 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:09.365 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:09.366 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:09.367 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:09.367 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:09.368 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:09.378 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:09.378 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:09.379 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:09.379 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:09.544 +03:30 [INF] Received HTTP response headers after 557.3349ms - 429
2024-12-16 21:21:09.546 +03:30 [INF] End processing HTTP request after 560.0124ms - 429
2024-12-16 21:21:09.628 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:09.634 +03:30 [INF] Received HTTP response headers after 254.393ms - 429
2024-12-16 21:21:09.648 +03:30 [INF] End processing HTTP request after 268.7708ms - 429
2024-12-16 21:21:09.695 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 709.4642ms.
2024-12-16 21:21:09.712 +03:30 [INF] Received HTTP response headers after 8794.6674ms - 504
2024-12-16 21:21:09.721 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:09.763 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:09.763 +03:30 [INF] End processing HTTP request after 8871.1876ms - 504
2024-12-16 21:21:09.764 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:09.811 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 432.6716ms.
2024-12-16 21:21:09.812 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:09.829 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:09.838 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:09.868 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:09.889 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 504 (Gateway Timeout).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:09.889 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:09.890 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:09.904 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:09.926 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:09.938 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 9047.4494ms.
2024-12-16 21:21:09.938 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 974.2896ms
2024-12-16 21:21:09.940 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.940 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:09.939 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:09.941 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1058.6523ms
2024-12-16 21:21:09.942 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:09.945 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:09.947 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:09.948 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 584.5875ms
2024-12-16 21:21:09.948 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:09.949 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.949 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:09.950 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:09.950 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 618.5756ms
2024-12-16 21:21:09.951 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 9096.0322ms
2024-12-16 21:21:09.954 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:09.954 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 9288.6989ms
2024-12-16 21:21:09.965 +03:30 [INF] Received HTTP response headers after 2397.1961ms - 429
2024-12-16 21:21:09.966 +03:30 [INF] End processing HTTP request after 2399.3251ms - 429
2024-12-16 21:21:10.047 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.096 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2529.3677ms.
2024-12-16 21:21:10.097 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:10.098 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:10.098 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:10.099 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:10.099 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:10.100 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:10.101 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2573.1899ms
2024-12-16 21:21:10.107 +03:30 [INF] Received HTTP response headers after 2565.1134ms - 429
2024-12-16 21:21:10.107 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.108 +03:30 [INF] End processing HTTP request after 2568.0906ms - 429
2024-12-16 21:21:10.109 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2744.9116ms
2024-12-16 21:21:10.187 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.219 +03:30 [INF] Received HTTP response headers after 3567.5359ms - 429
2024-12-16 21:21:10.234 +03:30 [INF] End processing HTTP request after 3584.044ms - 429
2024-12-16 21:21:10.245 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2706.6357ms.
2024-12-16 21:21:10.266 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:10.276 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:10.320 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.333 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.331 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:10.334 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:10.334 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:10.335 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:10.335 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:10.331 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.333 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.336 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2827.1766ms
2024-12-16 21:21:10.360 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:10.374 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.385 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3735.4684ms.
2024-12-16 21:21:10.388 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3195.4078ms
2024-12-16 21:21:10.403 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:10.403 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:10.407 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:10.407 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:10.408 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:10.408 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:10.409 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:10.406 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:10.412 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3779.5738ms
2024-12-16 21:21:10.417 +03:30 [INF] Received HTTP response headers after 8708.8718ms - 429
2024-12-16 21:21:10.418 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.418 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.419 +03:30 [INF] End processing HTTP request after 8713.4025ms - 429
2024-12-16 21:21:10.419 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:10.420 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3831.2544ms
2024-12-16 21:21:10.441 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:10.503 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.503 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:10.529 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:10.553 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 8859.6766ms.
2024-12-16 21:21:10.553 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:10.555 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:10.554 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:10.555 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:10.558 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:10.559 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:10.559 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:10.560 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:10.560 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:10.558 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:10.561 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 8904.6387ms
2024-12-16 21:21:10.562 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:10.563 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.563 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:10.564 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 9033.0668ms
2024-12-16 21:21:10.565 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:10.567 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:10.568 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:10.568 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:10.577 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:10.578 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:10.578 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:10.579 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:10.693 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:10.696 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.696 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.697 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.698 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:10.717 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:10.723 +03:30 [INF] Received HTTP response headers after 4873.2014ms - 429
2024-12-16 21:21:10.724 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:10.725 +03:30 [INF] End processing HTTP request after 4878.3978ms - 429
2024-12-16 21:21:10.726 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.736 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:10.755 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:10.774 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:10.796 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:10.807 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.808 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:10.814 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:10.836 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:10.851 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:10.851 +03:30 [INF] Received HTTP response headers after 270.7867ms - 429
2024-12-16 21:21:10.862 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5015.7892ms.
2024-12-16 21:21:10.863 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:10.865 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.865 +03:30 [INF] End processing HTTP request after 287.071ms - 429
2024-12-16 21:21:10.866 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:10.867 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.867 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:10.950 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:10.929 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:10.949 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:10.927 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:10.951 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:10.952 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:10.950 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.001 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.001 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:11.001 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 423.0742ms.
2024-12-16 21:21:11.014 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.022 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.025 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.027 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:11.028 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:11.029 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.032 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.033 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.034 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:11.038 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.036 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:11.038 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.063 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.064 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:11.064 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.065 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:11.066 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.067 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.068 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5263.5417ms
2024-12-16 21:21:11.083 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.070 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:11.081 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:11.081 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.069 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.084 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5315.1462ms
2024-12-16 21:21:11.084 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:11.085 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:11.086 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.088 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.092 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:11.092 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.093 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.098 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.095 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 539.4113ms
2024-12-16 21:21:11.096 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.094 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.099 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.116 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.100 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.118 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.119 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.120 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 853.4559ms
2024-12-16 21:21:11.121 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.122 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.125 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.126 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.126 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.127 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.128 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.129 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.132 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.134 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.136 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.136 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.137 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.138 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.139 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.140 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.140 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.150 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:11.161 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:11.161 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:11.162 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:11.162 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.163 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.163 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.164 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.240 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.242 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.243 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.244 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.245 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.264 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.265 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.266 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.267 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.268 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.269 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.270 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.271 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.271 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.272 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.273 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.274 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.275 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.276 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.279 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.280 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.281 +03:30 [DBG] Connection id "0HN8TV87LTARE" accepted.
2024-12-16 21:21:11.281 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.282 +03:30 [DBG] Connection id "0HN8TV87LTARE" started.
2024-12-16 21:21:11.282 +03:30 [DBG] Connection id "0HN8TV87LTARF" accepted.
2024-12-16 21:21:11.282 +03:30 [DBG] Connection id "0HN8TV87LTARE" received FIN.
2024-12-16 21:21:11.291 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:11.293 +03:30 [DBG] Connection id "0HN8TV87LTARF" started.
2024-12-16 21:21:11.293 +03:30 [DBG] Connection id "0HN8TV87LTARG" received FIN.
2024-12-16 21:21:11.295 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.351 +03:30 [DBG] Connection 0HN8TV87LTARF established using the following protocol: "Tls13"
2024-12-16 21:21:11.343 +03:30 [DBG] Connection id "0HN8TV87LTARG" accepted.
2024-12-16 21:21:11.376 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:21:11.377 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.379 +03:30 [DBG] Connection id "0HN8TV87LTARG" started.
2024-12-16 21:21:11.378 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.381 +03:30 [DBG] Connection id "0HN8TV87LTARE" stopped.
2024-12-16 21:21:11.381 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.416 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.435 +03:30 [DBG] Connection id "0HN8TV87LTARE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:21:11.308 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:11.379 +03:30 [DBG] Connection id "0HN8TV87LTARH" accepted.
2024-12-16 21:21:11.444 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:21:11.445 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.445 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.447 +03:30 [DBG] Connection id "0HN8TV87LTARH" started.
2024-12-16 21:21:11.447 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.448 +03:30 [DBG] Connection id "0HN8TV87LTARI" received FIN.
2024-12-16 21:21:11.449 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.449 +03:30 [DBG] Connection id "0HN8TV87LTARG" stopped.
2024-12-16 21:21:11.455 +03:30 [DBG] Connection id "0HN8TV87LTARI" accepted.
2024-12-16 21:21:11.473 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.473 +03:30 [DBG] Connection id "0HN8TV87LTARG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:21:11.473 +03:30 [DBG] Connection id "0HN8TV87LTARI" started.
2024-12-16 21:21:11.452 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.474 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.490 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.474 +03:30 [DBG] Connection id "0HN8TV87LTARJ" accepted.
2024-12-16 21:21:11.515 +03:30 [INF] Received HTTP response headers after 336.383ms - 429
2024-12-16 21:21:11.528 +03:30 [DBG] Connection id "0HN8TV87LTARJ" started.
2024-12-16 21:21:11.544 +03:30 [INF] End processing HTTP request after 381.7434ms - 429
2024-12-16 21:21:11.508 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.521 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.583 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.624 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.561 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 21:21:11.508 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.550 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.583 +03:30 [DBG] Connection 0HN8TV87LTARJ established using the following protocol: "Tls13"
2024-12-16 21:21:11.454 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:11.647 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:11.672 +03:30 [INF] Received HTTP response headers after 506.9184ms - 429
2024-12-16 21:21:11.647 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.698 +03:30 [INF] End processing HTTP request after 535.7985ms - 429
2024-12-16 21:21:11.655 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.721 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 559.7723ms.
2024-12-16 21:21:11.722 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.780 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.806 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.807 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.808 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.653 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.802 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:11.805 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:11.805 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.825 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.648 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.649 +03:30 [DBG] Connection id "0HN8TV87LTARI" stopped.
2024-12-16 21:21:11.652 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.872 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 711.4656ms.
2024-12-16 21:21:11.873 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:11.881 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:11.881 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:11.882 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:11.825 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.878 +03:30 [DBG] Connection id "0HN8TV87LTARI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:21:11.455 +03:30 [DBG] Connection 0HN8TV87LTARH established using the following protocol: "Tls13"
2024-12-16 21:21:11.880 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.881 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:11.883 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:11.874 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.875 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.878 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.883 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.885 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.886 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.887 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:11.896 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:11.896 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:11.897 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:11.897 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:11.893 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.895 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.895 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.888 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 763.378ms
2024-12-16 21:21:11.898 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 775.771ms
2024-12-16 21:21:11.889 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.890 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.892 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.899 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.918 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.917 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.919 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.919 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.916 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.900 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:11.936 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.936 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.937 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1086.0444ms
2024-12-16 21:21:11.937 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 988.0545ms
2024-12-16 21:21:11.938 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.939 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.940 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.941 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.942 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.943 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.953 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.950 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.950 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.951 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:11.952 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.949 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.955 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.955 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.954 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.973 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:11.973 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:11.979 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.980 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.981 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:11.977 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.978 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:11.975 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.975 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.981 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:11.988 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.982 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.983 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:11.985 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:11.986 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.992 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.992 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:11.993 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:11.989 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:11.987 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:11.989 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:11.976 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:11.990 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.006 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.007 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.002 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.003 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.004 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.005 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:11.991 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.002 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.007 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.008 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.009 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.011 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.012 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.017 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.018 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.014 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.015 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.016 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.016 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.022 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.013 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.019 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.019 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.020 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.021 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.023 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.022 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.026 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.026 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.013 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.034 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.035 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.036 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.036 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.041 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.054 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.037 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.056 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.041 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.038 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.039 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.063 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.065 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.066 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.066 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.068 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.069 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.067 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.068 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:12.077 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.097 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:12.097 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.079 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.097 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:12.079 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.078 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.080 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.099 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.099 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.100 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.101 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.121 +03:30 [INF] Received HTTP response headers after 1020.1939ms - 429
2024-12-16 21:21:12.121 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.122 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.133 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.134 +03:30 [INF] End processing HTTP request after 1042.1509ms - 429
2024-12-16 21:21:12.135 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.147 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.102 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.226 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:12.166 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:12.194 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:12.227 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.115 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.300 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:12.300 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:12.232 +03:30 [INF] Received HTTP response headers after 576.5184ms - 429
2024-12-16 21:21:12.097 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:12.319 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1233.5514ms.
2024-12-16 21:21:12.319 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.319 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.320 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:12.327 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.322 +03:30 [INF] End processing HTTP request after 875.2142ms - 429
2024-12-16 21:21:12.324 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:12.325 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:12.327 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.401 +03:30 [INF] Received HTTP response headers after 298.5919ms - 429
2024-12-16 21:21:12.411 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:12.394 +03:30 [INF] Received HTTP response headers after 270.9323ms - 429
2024-12-16 21:21:12.321 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:12.326 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.326 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.428 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.422 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:12.425 +03:30 [INF] End processing HTTP request after 358.4207ms - 429
2024-12-16 21:21:12.425 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:12.423 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.426 +03:30 [INF] End processing HTTP request after 347.3678ms - 429
2024-12-16 21:21:12.504 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:12.568 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:12.589 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:12.568 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.642 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:12.653 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:12.427 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.701 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 659.8676ms.
2024-12-16 21:21:12.690 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:12.757 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:12.702 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.706 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.755 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 686.7914ms.
2024-12-16 21:21:12.730 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.763 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.758 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:12.436 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.483 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1179.7696ms.
2024-12-16 21:21:12.346 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.758 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1923.7451ms
2024-12-16 21:21:12.759 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:12.760 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.761 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.762 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:12.773 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:12.774 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:12.765 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.775 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:12.766 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:12.777 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:12.768 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.768 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:12.779 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:12.779 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:12.780 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:12.764 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.781 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.766 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.776 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.767 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.778 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:12.778 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2084.9499ms
2024-12-16 21:21:12.769 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.772 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.791 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:12.780 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 826.5178ms
2024-12-16 21:21:12.790 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.774 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:12.782 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.427 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.783 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:12.782 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.811 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.808 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.809 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.808 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:12.809 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:12.833 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:12.788 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:12.787 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.822 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.829 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:12.830 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1452.295ms
2024-12-16 21:21:12.831 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.832 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:12.834 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 845.141ms
2024-12-16 21:21:12.830 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.812 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.834 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:12.851 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.852 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.853 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.854 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.848 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:12.835 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.866 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:12.867 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.871 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.872 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.873 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.869 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.867 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.868 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1346.2914ms
2024-12-16 21:21:12.868 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.871 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1598.4608ms
2024-12-16 21:21:12.870 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.881 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.881 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:12.882 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.889 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.889 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.886 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.887 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.888 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:12.885 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.895 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.896 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.896 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.893 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.894 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:12.885 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:12.892 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.900 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.897 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:12.898 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.901 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.910 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:12.927 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.898 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:12.915 +03:30 [INF] Received HTTP response headers after 873.2651ms - 429
2024-12-16 21:21:12.899 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1659.1576ms
2024-12-16 21:21:12.893 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.928 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:12.928 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:12.929 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:12.930 +03:30 [INF] End processing HTTP request after 907.0308ms - 429
2024-12-16 21:21:12.933 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.934 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:12.935 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:12.946 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:12.934 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:12.964 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:13.006 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:13.021 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.018 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.019 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:13.037 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:13.037 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.087 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:13.107 +03:30 [INF] Received HTTP response headers after 271.7866ms - 429
2024-12-16 21:21:13.100 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1086.7744ms.
2024-12-16 21:21:13.073 +03:30 [INF] Received HTTP response headers after 937.4283ms - 429
2024-12-16 21:21:13.058 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:13.115 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:13.115 +03:30 [INF] Received HTTP response headers after 261.1438ms - 429
2024-12-16 21:21:13.116 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:13.118 +03:30 [INF] End processing HTTP request after 335.6196ms - 429
2024-12-16 21:21:13.120 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:13.124 +03:30 [INF] End processing HTTP request after 697.4612ms - 429
2024-12-16 21:21:13.124 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.243 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.316 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.268 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:13.269 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:13.366 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 600.8782ms.
2024-12-16 21:21:13.381 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:13.269 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:13.423 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.292 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:13.126 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.163 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:13.121 +03:30 [INF] End processing HTTP request after 1021.7805ms - 429
2024-12-16 21:21:13.123 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.428 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.426 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.421 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:13.417 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1091.6824ms.
2024-12-16 21:21:13.421 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:13.420 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.201 +03:30 [INF] Received HTTP response headers after 285.7424ms - 429
2024-12-16 21:21:13.427 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.470 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:13.429 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:13.440 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.514 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.514 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.516 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:13.519 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:13.565 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:13.520 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:13.521 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.578 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:13.577 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:13.538 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:13.521 +03:30 [INF] End processing HTTP request after 628.1564ms - 429
2024-12-16 21:21:13.592 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:13.593 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:13.638 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:13.658 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:13.680 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1653.3045ms
2024-12-16 21:21:13.681 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:13.592 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.636 +03:30 [INF] Received HTTP response headers after 613.5924ms - 429
2024-12-16 21:21:13.610 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:13.522 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.523 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:13.523 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:13.704 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.705 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.707 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:13.735 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1849.7703ms
2024-12-16 21:21:13.707 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:13.709 +03:30 [INF] End processing HTTP request after 775.144ms - 429
2024-12-16 21:21:13.710 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:13.770 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1751.7667ms
2024-12-16 21:21:13.811 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:13.831 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.881 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:13.848 +03:30 [INF] Received HTTP response headers after 269.6908ms - 429
2024-12-16 21:21:13.869 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:13.881 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:13.803 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.883 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.882 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2373.1957ms
2024-12-16 21:21:13.884 +03:30 [INF] End processing HTTP request after 462.7444ms - 429
2024-12-16 21:21:13.885 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:13.921 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:13.947 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:13.933 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1004.9773ms.
2024-12-16 21:21:13.965 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.005 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:13.908 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:14.020 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:14.021 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:13.720 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:13.713 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:13.576 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1479.4355ms.
2024-12-16 21:21:13.524 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:13.552 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:14.016 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:14.017 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:14.018 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:14.019 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:14.076 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 695.5152ms.
2024-12-16 21:21:14.065 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:14.097 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:14.098 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:14.098 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:14.023 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.024 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:14.027 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:14.101 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:14.102 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:14.102 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:14.103 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:14.103 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:14.022 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:13.770 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 883.1962ms.
2024-12-16 21:21:13.711 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.099 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:14.099 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.100 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2181.0976ms
2024-12-16 21:21:14.110 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.029 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.111 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.096 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:14.113 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.114 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.106 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.115 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.108 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:14.109 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1278.8661ms
2024-12-16 21:21:14.094 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:14.097 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:14.115 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.116 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.107 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:14.109 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.111 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2815.503ms
2024-12-16 21:21:14.135 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:14.137 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:14.137 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.134 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.138 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.139 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:14.133 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:14.106 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2102.9076ms
2024-12-16 21:21:14.028 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.112 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.153 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.153 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:14.154 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.155 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2057.846ms
2024-12-16 21:21:14.155 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.156 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:14.173 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:14.174 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:14.174 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:14.167 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:14.168 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:14.168 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:14.169 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:14.194 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.195 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.196 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.196 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.167 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.193 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:14.193 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:14.207 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:14.175 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1384.5867ms
2024-12-16 21:21:14.157 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:14.159 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.192 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:14.204 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.205 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.206 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:14.215 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:14.215 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.216 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.209 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.210 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2555.4044ms
2024-12-16 21:21:14.212 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:14.213 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.214 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.221 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.207 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1306.579ms
2024-12-16 21:21:14.217 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.220 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.235 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.208 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.235 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.234 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.173 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:14.247 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2150.1189ms
2024-12-16 21:21:14.217 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:14.220 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.248 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.249 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1607.0889ms
2024-12-16 21:21:14.250 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.254 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:14.258 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:14.259 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:14.260 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.260 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.255 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:14.262 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.263 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.263 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.257 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.254 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:14.261 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.266 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.267 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.269 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.268 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:14.277 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.277 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.279 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.281 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.280 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:14.289 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.289 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:14.289 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.290 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:14.293 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.293 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.296 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.297 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.297 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.294 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.295 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.305 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.316 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.295 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.319 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.331 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.332 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.334 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.333 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.347 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:14.348 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.349 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:14.350 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.350 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.351 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:14.352 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:14.361 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:14.361 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:14.362 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:14.363 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.364 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.365 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.363 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.366 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:14.365 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:14.399 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:14.399 +03:30 [INF] Received HTTP response headers after 258.9617ms - 429
2024-12-16 21:21:14.402 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:14.403 +03:30 [INF] End processing HTTP request after 303.3744ms - 429
2024-12-16 21:21:14.403 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.414 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:14.441 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:14.464 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:14.475 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:14.488 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:14.505 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:14.505 +03:30 [INF] Received HTTP response headers after 268.8006ms - 429
2024-12-16 21:21:14.506 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.553 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 530.3303ms.
2024-12-16 21:21:14.520 +03:30 [INF] End processing HTTP request after 299.97ms - 429
2024-12-16 21:21:14.507 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:14.553 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:14.579 +03:30 [INF] Received HTTP response headers after 259.3677ms - 429
2024-12-16 21:21:14.603 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.579 +03:30 [INF] Received HTTP response headers after 273.0555ms - 429
2024-12-16 21:21:14.614 +03:30 [INF] End processing HTTP request after 318.8975ms - 429
2024-12-16 21:21:14.603 +03:30 [INF] Received HTTP response headers after 268.908ms - 429
2024-12-16 21:21:14.650 +03:30 [INF] End processing HTTP request after 360.3082ms - 429
2024-12-16 21:21:14.648 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:14.648 +03:30 [INF] Received HTTP response headers after 281.2126ms - 429
2024-12-16 21:21:14.757 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:14.774 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:14.828 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:14.863 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:14.774 +03:30 [INF] End processing HTTP request after 410.9793ms - 429
2024-12-16 21:21:14.927 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 646.2557ms.
2024-12-16 21:21:14.927 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:14.977 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:14.997 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:14.903 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:14.875 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 582.0848ms.
2024-12-16 21:21:14.734 +03:30 [INF] Received HTTP response headers after 512.6963ms - 429
2024-12-16 21:21:14.670 +03:30 [INF] End processing HTTP request after 337.3995ms - 429
2024-12-16 21:21:14.555 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.020 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.022 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.086 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.023 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.024 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.019 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:15.027 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.113 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.183 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.127 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.170 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.127 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.128 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.183 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 820.924ms.
2024-12-16 21:21:15.184 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.029 +03:30 [INF] End processing HTTP request after 814.9103ms - 429
2024-12-16 21:21:15.125 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:15.200 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.201 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.290 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.198 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.289 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.370 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.202 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.203 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.204 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.204 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.205 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.357 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:15.349 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1030.7345ms.
2024-12-16 21:21:15.374 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.374 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.375 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.377 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.377 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.378 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.379 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.430 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.431 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.432 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.452 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.453 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1235.6678ms
2024-12-16 21:21:15.432 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.433 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.450 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.450 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.381 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.482 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.430 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1224.7844ms.
2024-12-16 21:21:15.418 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.485 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.485 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.485 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.486 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.486 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.366 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.477 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.477 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.479 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.507 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.512 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1627.5593ms
2024-12-16 21:21:15.490 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.479 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.480 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.481 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.516 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.520 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.522 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.482 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.482 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.381 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.483 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.487 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1225.9972ms
2024-12-16 21:21:15.053 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:14.566 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:14.648 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:15.260 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.549 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.541 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.542 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.543 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.540 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.540 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.544 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.544 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.547 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.548 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.550 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.551 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.579 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.304 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.489 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.603 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1389.6324ms.
2024-12-16 21:21:15.603 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2311.0051ms
2024-12-16 21:21:15.604 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.605 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.606 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.607 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.608 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.609 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.610 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.611 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.614 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.614 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.615 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.616 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.618 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.618 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.619 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:15.623 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.624 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.627 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.628 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.629 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.630 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.631 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1298.0458ms
2024-12-16 21:21:15.632 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1515.873ms
2024-12-16 21:21:15.632 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.633 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.634 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.635 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.636 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.637 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.641 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:15.642 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.643 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.644 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.644 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.645 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.646 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.647 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.648 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.649 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.650 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.650 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.653 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.654 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.657 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.658 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.659 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.660 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.661 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.662 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.663 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2112.17ms
2024-12-16 21:21:15.664 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2394.2271ms
2024-12-16 21:21:15.665 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.668 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2662.6602ms
2024-12-16 21:21:15.669 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.656 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:15.680 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.655 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:15.698 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2764.3168ms
2024-12-16 21:21:15.688 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.689 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.690 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.690 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.693 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.693 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.727 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.698 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.699 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.700 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:15.687 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.735 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.735 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:15.736 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.737 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.738 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.739 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.739 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.740 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.741 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3756.4845ms
2024-12-16 21:21:15.742 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2983.8861ms
2024-12-16 21:21:15.743 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.743 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:15.747 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.749 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.749 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:15.750 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.751 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.752 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.753 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.754 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.755 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.762 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.766 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.767 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.767 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.768 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.769 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.779 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.763 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:15.764 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.764 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.765 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.788 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.788 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.789 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.790 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.796 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.797 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.800 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.791 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.792 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.792 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.796 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.793 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1678.7065ms
2024-12-16 21:21:15.794 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.794 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.795 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:15.809 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.801 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.811 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.803 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.804 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.814 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.802 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.804 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.805 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.805 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.806 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.807 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.808 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:15.831 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.800 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:15.822 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.822 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.823 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.824 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.834 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.834 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:15.826 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.846 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.847 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.828 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2558.9853ms
2024-12-16 21:21:15.830 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.831 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.851 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.833 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.843 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.844 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.844 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.855 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.845 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.847 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.827 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.867 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.864 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.888 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.866 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.889 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.868 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.913 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.915 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.876 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.828 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.850 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.917 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.917 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:15.920 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.933 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.958 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:15.958 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.854 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.810 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:15.855 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:15.960 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:15.961 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:15.962 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.963 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.967 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.966 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.983 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.964 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:15.965 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:15.984 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:15.985 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:15.987 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.002 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:15.988 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:15.989 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:16.005 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:16.006 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:16.019 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.007 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:16.027 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:16.028 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.029 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.030 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:16.031 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:16.032 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.033 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.034 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:16.034 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:16.035 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.036 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.037 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.041 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.038 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:16.050 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:16.050 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:16.059 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:16.060 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:16.061 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:16.062 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.063 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:16.064 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:16.065 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.065 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.066 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.069 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:16.069 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.070 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.071 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.085 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.072 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:16.106 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:16.107 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:16.109 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:16.110 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:16.111 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.111 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:16.112 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.113 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.125 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:16.131 +03:30 [INF] Received HTTP response headers after 254.4354ms - 429
2024-12-16 21:21:16.132 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.137 +03:30 [INF] End processing HTTP request after 332.3791ms - 429
2024-12-16 21:21:16.138 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.149 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:16.167 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:16.194 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:16.205 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:16.210 +03:30 [INF] Received HTTP response headers after 289.8907ms - 429
2024-12-16 21:21:16.211 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.226 +03:30 [INF] End processing HTTP request after 420.8903ms - 429
2024-12-16 21:21:16.232 +03:30 [INF] Received HTTP response headers after 263.887ms - 429
2024-12-16 21:21:16.232 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:16.259 +03:30 [INF] End processing HTTP request after 293.7395ms - 429
2024-12-16 21:21:16.241 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.226 +03:30 [INF] Received HTTP response headers after 291.5134ms - 429
2024-12-16 21:21:16.320 +03:30 [INF] End processing HTTP request after 407.0212ms - 429
2024-12-16 21:21:16.368 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:16.369 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:16.459 +03:30 [INF] Received HTTP response headers after 345.4517ms - 429
2024-12-16 21:21:16.485 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.369 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:16.534 +03:30 [INF] End processing HTTP request after 423.8827ms - 429
2024-12-16 21:21:16.557 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.573 +03:30 [INF] Received HTTP response headers after 583.0804ms - 429
2024-12-16 21:21:16.605 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:16.622 +03:30 [INF] End processing HTTP request after 655.4972ms - 429
2024-12-16 21:21:16.645 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:16.668 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.733 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:16.724 +03:30 [INF] Received HTTP response headers after 821.8839ms - 429
2024-12-16 21:21:16.806 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:16.779 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.574 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.424 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.830 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 720.8788ms.
2024-12-16 21:21:16.831 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:16.830 +03:30 [INF] End processing HTTP request after 986.049ms - 429
2024-12-16 21:21:16.845 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.883 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:16.883 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:16.882 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 920.4691ms.
2024-12-16 21:21:16.905 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:16.871 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:16.389 +03:30 [INF] Received HTTP response headers after 315.6808ms - 429
2024-12-16 21:21:16.511 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.436 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.981 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:16.980 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.133 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1337.1409ms.
2024-12-16 21:21:16.979 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:16.978 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:16.980 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:17.135 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:17.133 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:16.978 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.195 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:17.180 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:17.076 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:16.982 +03:30 [INF] End processing HTTP request after 917.3759ms - 429
2024-12-16 21:21:17.210 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.211 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:17.209 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1375.7367ms.
2024-12-16 21:21:17.298 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:17.258 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.210 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.213 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:17.246 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:17.091 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1171.0639ms.
2024-12-16 21:21:17.134 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:16.622 +03:30 [INF] Received HTTP response headers after 361.3915ms - 429
2024-12-16 21:21:16.471 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 678.57ms.
2024-12-16 21:21:16.573 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:17.343 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.344 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.343 +03:30 [INF] Received HTTP response headers after 1452.6163ms - 429
2024-12-16 21:21:17.344 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:17.398 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.345 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.346 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.347 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:17.343 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:17.348 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.411 +03:30 [INF] End processing HTTP request after 1543.9231ms - 429
2024-12-16 21:21:17.410 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.412 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:17.501 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1470.8502ms
2024-12-16 21:21:17.525 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:17.412 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.413 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.413 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:17.414 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.463 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1402.3009ms.
2024-12-16 21:21:17.452 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.350 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.351 +03:30 [INF] End processing HTTP request after 1140.2802ms - 429
2024-12-16 21:21:17.352 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.549 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.548 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:17.625 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2259.1971ms
2024-12-16 21:21:17.549 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:17.700 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1844.7949ms.
2024-12-16 21:21:17.550 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.551 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.553 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:17.554 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:17.555 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.555 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.714 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.650 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:17.579 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.709 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:17.709 +03:30 [INF] Received HTTP response headers after 1621.5017ms - 429
2024-12-16 21:21:17.710 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.753 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:17.710 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.711 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1919.9397ms
2024-12-16 21:21:17.712 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:17.713 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:17.714 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.715 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.556 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.718 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.409 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1519.825ms.
2024-12-16 21:21:17.766 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1561.0444ms.
2024-12-16 21:21:17.766 +03:30 [INF] End processing HTTP request after 1700.0579ms - 429
2024-12-16 21:21:17.768 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.770 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:17.799 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.824 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:17.857 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.878 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:17.771 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.771 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.772 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:17.882 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:17.882 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:17.776 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.776 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.779 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.777 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.778 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.889 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.878 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.890 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.880 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2220.9653ms
2024-12-16 21:21:17.881 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2710.9779ms
2024-12-16 21:21:17.773 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:17.774 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.868 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:17.891 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2140.7862ms
2024-12-16 21:21:17.879 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:17.922 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.892 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.896 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:17.883 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:17.894 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:17.895 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.884 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2130.7575ms
2024-12-16 21:21:17.886 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.887 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.888 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.890 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.946 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1883.0478ms.
2024-12-16 21:21:17.946 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:17.947 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2657.4588ms
2024-12-16 21:21:17.947 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3020.3772ms
2024-12-16 21:21:17.949 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.958 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:17.961 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:17.959 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:17.950 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:17.966 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:17.967 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.964 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:17.964 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.982 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:17.951 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:17.951 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.952 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.955 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.956 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.956 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.957 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.983 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:17.983 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:17.983 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.985 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.988 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:17.989 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:17.990 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:17.991 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:17.992 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2995.4421ms
2024-12-16 21:21:17.993 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2442.4638ms
2024-12-16 21:21:17.993 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.994 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2450.7716ms
2024-12-16 21:21:17.995 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:17.997 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:17.997 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:17.998 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.001 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.001 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.002 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.011 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:18.012 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.010 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.033 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:18.013 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.032 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.032 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.003 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.004 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2041.0194ms
2024-12-16 21:21:18.006 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:18.007 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.008 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:18.009 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.009 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:18.051 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.051 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.053 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2086.9717ms
2024-12-16 21:21:18.054 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.055 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.066 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.064 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.065 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.056 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.085 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.086 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2825.935ms
2024-12-16 21:21:18.086 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.085 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.109 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.105 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.107 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.097 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.057 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.111 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:18.112 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.113 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.113 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.111 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.058 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.060 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.060 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3699.6689ms
2024-12-16 21:21:18.061 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:18.062 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3587.0209ms
2024-12-16 21:21:18.063 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2325.9325ms
2024-12-16 21:21:18.123 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.123 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.124 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.125 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.126 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.126 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.140 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.141 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.141 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.130 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:18.131 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2020.8849ms
2024-12-16 21:21:18.135 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.136 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.137 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.138 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.138 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.139 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.152 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.152 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.153 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.142 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.144 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.155 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.156 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.145 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.149 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.150 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.151 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.127 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.128 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2823.7263ms
2024-12-16 21:21:18.129 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:18.154 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.155 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.144 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.145 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2961.8422ms
2024-12-16 21:21:18.157 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.157 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.160 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.159 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.164 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.197 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.165 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.215 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.216 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.215 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.161 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.158 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.164 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.195 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.166 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2365.8173ms
2024-12-16 21:21:18.222 +03:30 [INF] Received HTTP response headers after 253.521ms - 429
2024-12-16 21:21:18.222 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.223 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.224 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.224 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.225 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.228 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.235 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.229 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.228 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:18.233 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.233 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.234 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.232 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.264 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.265 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.237 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.231 +03:30 [INF] End processing HTTP request after 285.1929ms - 429
2024-12-16 21:21:18.262 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:18.244 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.263 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.262 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.329 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.264 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.267 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.235 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.297 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.286 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:18.267 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.350 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:18.351 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.351 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.352 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.354 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.355 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.357 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.357 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.358 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.410 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 531.4117ms.
2024-12-16 21:21:18.410 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.411 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.412 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.420 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.413 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.414 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.429 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.430 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.429 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.439 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.415 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.416 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:18.448 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.447 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.449 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.450 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.465 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.465 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.446 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.464 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:18.418 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.419 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:18.446 +03:30 [INF] Received HTTP response headers after 268.4081ms - 429
2024-12-16 21:21:18.475 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.476 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.477 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.477 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.478 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.485 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.483 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.484 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.500 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.501 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.502 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.515 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.479 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:18.480 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.482 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:18.482 +03:30 [INF] End processing HTTP request after 337.1739ms - 429
2024-12-16 21:21:18.516 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.517 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.518 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.520 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:18.596 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.553 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.608 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.521 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:18.522 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:18.619 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:18.621 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.622 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.669 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.623 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.624 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:18.624 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:18.681 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 545.3783ms.
2024-12-16 21:21:18.683 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.684 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.684 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.689 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.685 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.686 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:18.698 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:18.696 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.696 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.697 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.698 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:18.700 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.700 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.703 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.699 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1355.1528ms
2024-12-16 21:21:18.687 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:18.717 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:18.718 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:18.718 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:18.716 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.714 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.715 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.715 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:18.719 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:18.721 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2351.3073ms
2024-12-16 21:21:18.721 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.726 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.727 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.728 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.722 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.737 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.723 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.752 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.761 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.762 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:18.742 +03:30 [INF] Received HTTP response headers after 254.5853ms - 429
2024-12-16 21:21:18.724 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:18.761 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.765 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.763 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:18.759 +03:30 [INF] Received HTTP response headers after 256.3333ms - 429
2024-12-16 21:21:18.763 +03:30 [INF] End processing HTTP request after 297.8921ms - 429
2024-12-16 21:21:18.784 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:18.778 +03:30 [INF] End processing HTTP request after 302.6105ms - 429
2024-12-16 21:21:18.795 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:18.764 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 880.6974ms
2024-12-16 21:21:18.815 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.834 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:18.845 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:18.856 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2486.9365ms
2024-12-16 21:21:18.916 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:18.975 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:18.991 +03:30 [INF] Received HTTP response headers after 540.8545ms - 429
2024-12-16 21:21:19.038 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.054 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.100 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.083 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.083 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.054 +03:30 [INF] End processing HTTP request after 696.7279ms - 429
2024-12-16 21:21:19.067 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 620.2376ms.
2024-12-16 21:21:19.118 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.119 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.180 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.205 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.251 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.235 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.251 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.122 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.263 +03:30 [INF] Received HTTP response headers after 561.8459ms - 429
2024-12-16 21:21:19.263 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.288 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.264 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.288 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.297 +03:30 [INF] End processing HTTP request after 608.228ms - 429
2024-12-16 21:21:19.298 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.299 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.393 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.418 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.418 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:19.370 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.427 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.425 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.483 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.406 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.418 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.349 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.488 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.310 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.297 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.321 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.278 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.125 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.297 +03:30 [INF] Received HTTP response headers after 554.4687ms - 429
2024-12-16 21:21:19.250 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:19.188 +03:30 [INF] Received HTTP response headers after 613.7782ms - 429
2024-12-16 21:21:19.483 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.484 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.482 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 798.1588ms.
2024-12-16 21:21:19.457 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.485 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.558 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.559 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.561 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:19.580 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.598 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.600 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:19.619 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:19.579 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.486 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.618 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.619 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.620 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:19.579 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.488 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.319 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.490 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.492 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.492 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.494 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.497 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.498 +03:30 [INF] End processing HTTP request after 783.6067ms - 429
2024-12-16 21:21:19.552 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1254.9285ms.
2024-12-16 21:21:19.650 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.649 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:19.647 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.643 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:19.641 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.643 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.645 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.639 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.639 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.646 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.771 +03:30 [INF] Received HTTP response headers after 1005.5636ms - 429
2024-12-16 21:21:19.742 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.648 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.649 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:19.717 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:19.716 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:19.651 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.774 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:19.665 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:19.784 +03:30 [INF] End processing HTTP request after 1023.0536ms - 429
2024-12-16 21:21:19.779 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.780 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:19.874 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:19.778 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:19.780 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.944 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:19.942 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:19.945 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1530.6021ms
2024-12-16 21:21:19.950 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:19.782 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.783 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.784 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.942 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:19.952 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:19.953 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:19.954 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.955 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:19.956 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.956 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.974 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.025 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.026 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.027 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2131.5303ms
2024-12-16 21:21:20.029 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.030 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.024 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1271.8224ms.
2024-12-16 21:21:19.785 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:19.786 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.787 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:19.789 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:19.792 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:19.793 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:19.851 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1151.3108ms.
2024-12-16 21:21:20.060 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.048 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.049 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.052 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.056 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.047 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.047 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.057 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:20.058 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.059 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.059 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.082 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.083 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.084 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.085 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.086 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.086 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.088 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.089 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.119 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.081 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.061 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.079 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.072 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:19.821 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:19.513 +03:30 [INF] End processing HTTP request after 1010.7894ms - 429
2024-12-16 21:21:19.117 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 667.1795ms.
2024-12-16 21:21:20.136 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.127 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.128 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.129 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.130 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.131 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.131 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.132 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.228 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:20.135 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.126 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.180 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.137 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.138 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.233 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.140 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.152 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:20.235 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.235 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.236 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:20.236 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.237 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.222 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:20.223 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.224 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.225 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.226 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.227 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.228 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.289 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.289 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.230 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.231 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.231 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.232 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.233 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.139 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.297 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.298 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:19.140 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:19.054 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.729 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:19.598 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:20.303 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.304 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.305 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.305 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.286 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.284 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.285 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.287 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.288 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.290 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.335 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.134 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.291 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.291 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.292 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.296 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.340 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.341 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.234 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:20.284 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1800.9118ms.
2024-12-16 21:21:20.238 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2072.46ms
2024-12-16 21:21:20.299 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.345 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.346 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:19.851 +03:30 [INF] Received HTTP response headers after 967.3245ms - 429
2024-12-16 21:21:20.329 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.330 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.330 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.352 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.352 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.353 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.354 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.336 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.331 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.351 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.334 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.334 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.229 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.368 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.338 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.339 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.371 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.372 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.297 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.298 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.343 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.377 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.345 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.348 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.301 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.302 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.350 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.349 +03:30 [INF] End processing HTTP request after 1533.9662ms - 429
2024-12-16 21:21:20.363 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.365 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.432 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:20.421 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.444 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.366 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.367 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.368 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.364 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.369 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1684.7505ms
2024-12-16 21:21:20.337 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.370 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.475 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.476 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.477 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.375 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.377 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.378 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2374.8935ms
2024-12-16 21:21:20.344 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:20.379 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2414.6465ms
2024-12-16 21:21:20.380 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.380 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.381 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.381 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.467 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:20.469 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.469 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.470 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.513 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:20.471 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.471 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.472 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.473 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.474 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.474 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.478 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.373 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.340 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.342 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.479 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.479 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2014.5264ms
2024-12-16 21:21:20.556 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.481 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.557 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.558 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:20.558 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:20.488 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.538 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1742.8261ms.
2024-12-16 21:21:20.544 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.545 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.546 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.585 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.548 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.549 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.549 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.550 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.590 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.592 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.552 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.553 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.594 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.555 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.555 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.557 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2445.9411ms
2024-12-16 21:21:20.480 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.559 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.486 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2288.8145ms
2024-12-16 21:21:20.487 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.487 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.565 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.565 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:20.586 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.587 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.588 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.588 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.623 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.623 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.589 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.592 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.551 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2544.2722ms
2024-12-16 21:21:20.552 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.593 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.595 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.554 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.596 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.596 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.599 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4230.9233ms
2024-12-16 21:21:20.599 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2384.2594ms
2024-12-16 21:21:20.602 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.602 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.603 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:20.639 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.633 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.634 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.632 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.692 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.632 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.696 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.635 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.637 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.695 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.694 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.697 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.634 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.706 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.707 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.705 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.705 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.638 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.639 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.674 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.642 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.643 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.646 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.646 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2685.5264ms
2024-12-16 21:21:20.674 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.682 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:20.604 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.605 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:20.716 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.716 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.717 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.718 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.718 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.732 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.731 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.731 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.744 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.719 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.720 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.721 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.721 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.722 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.746 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.747 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.748 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.748 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.749 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.761 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.762 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.763 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.777 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.789 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.791 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.750 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.790 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.774 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.802 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.803 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.759 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.802 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.801 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.801 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.812 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.820 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.811 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.751 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.759 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.811 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.825 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.826 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.728 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.822 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.821 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.813 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.820 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.824 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.836 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.836 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.835 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.824 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.835 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.723 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.723 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2740.5881ms
2024-12-16 21:21:20.828 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.729 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:20.730 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:20.853 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:20.854 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:20.845 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.855 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.846 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.847 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.847 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.864 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.856 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.886 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.888 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.845 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.890 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.902 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.848 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.848 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.849 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.851 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.852 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:20.854 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.730 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:20.819 +03:30 [INF] Received HTTP response headers after 253.4604ms - 429
2024-12-16 21:21:20.903 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.904 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.905 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.905 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.931 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:20.942 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.906 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:20.950 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:20.962 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.909 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.909 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:20.910 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:20.910 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:20.947 +03:30 [INF] Received HTTP response headers after 264.4716ms - 429
2024-12-16 21:21:20.911 +03:30 [INF] End processing HTTP request after 441.736ms - 429
2024-12-16 21:21:20.964 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.965 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:20.981 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:20.994 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:20.994 +03:30 [INF] Received HTTP response headers after 261.2225ms - 429
2024-12-16 21:21:21.022 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:21.049 +03:30 [INF] End processing HTTP request after 342.4271ms - 429
2024-12-16 21:21:21.081 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:21.022 +03:30 [INF] Received HTTP response headers after 258.6232ms - 429
2024-12-16 21:21:21.144 +03:30 [INF] End processing HTTP request after 400.9227ms - 429
2024-12-16 21:21:21.119 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:21.040 +03:30 [INF] Received HTTP response headers after 262.257ms - 429
2024-12-16 21:21:21.183 +03:30 [INF] End processing HTTP request after 436.2416ms - 429
2024-12-16 21:21:21.143 +03:30 [INF] Received HTTP response headers after 267.7056ms - 429
2024-12-16 21:21:21.172 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.221 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:21.335 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.250 +03:30 [INF] End processing HTTP request after 414.4888ms - 429
2024-12-16 21:21:21.301 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.352 +03:30 [INF] Received HTTP response headers after 487.1839ms - 429
2024-12-16 21:21:21.335 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.434 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 739.3673ms.
2024-12-16 21:21:21.434 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.526 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.478 +03:30 [INF] End processing HTTP request after 641.4473ms - 429
2024-12-16 21:21:21.209 +03:30 [INF] Received HTTP response headers after 278.2349ms - 429
2024-12-16 21:21:21.526 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:21.527 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:21.524 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:21.456 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.619 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:21.619 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:21.660 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:21.672 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:21.672 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 849.7458ms.
2024-12-16 21:21:21.619 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:21.525 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.692 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:21.691 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:21.693 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:21.691 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:21.709 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.749 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:21.751 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:21.753 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:21.749 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 935.9362ms.
2024-12-16 21:21:21.539 +03:30 [INF] End processing HTTP request after 690.8783ms - 429
2024-12-16 21:21:21.173 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:21.772 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:21.773 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:21.774 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:21.867 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.774 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:21.833 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.822 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:21.775 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:21.874 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:21.874 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:21.875 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:21.209 +03:30 [INF] Received HTTP response headers after 297.3432ms - 429
2024-12-16 21:21:21.352 +03:30 [INF] Received HTTP response headers after 345.942ms - 429
2024-12-16 21:21:21.877 +03:30 [INF] End processing HTTP request after 912.5707ms - 429
2024-12-16 21:21:21.386 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:21.821 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.871 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.868 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1642.8256ms
2024-12-16 21:21:21.995 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.922 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:21.869 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:21.871 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:21.929 +03:30 [INF] Received HTTP response headers after 978.4411ms - 429
2024-12-16 21:21:21.872 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.873 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:21.875 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:22.025 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:21.773 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.022 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.019 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.018 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.021 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.022 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:22.023 +03:30 [INF] End processing HTTP request after 1117.4643ms - 429
2024-12-16 21:21:22.023 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.039 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.040 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:22.041 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2790.7687ms
2024-12-16 21:21:22.042 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.107 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.065 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:22.043 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:22.130 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.065 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.148 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.150 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.151 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.152 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.153 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1601.5969ms
2024-12-16 21:21:22.168 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:22.024 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.204 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.205 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:22.206 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.226 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.206 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.207 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.204 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1355.428ms.
2024-12-16 21:21:22.225 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.225 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.025 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1436.1873ms
2024-12-16 21:21:21.940 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.250 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:21.867 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.245 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.303 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.244 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.245 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.246 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3191.678ms
2024-12-16 21:21:22.247 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:22.248 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.249 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.249 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.251 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.027 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:21.789 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:22.304 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.243 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.341 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.304 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.305 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:22.309 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:22.344 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.344 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.343 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.354 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:22.364 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:22.365 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:22.311 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2893.2692ms
2024-12-16 21:21:22.312 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:22.329 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.363 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.364 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.363 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:22.362 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.366 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:22.310 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.391 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.303 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1478.1736ms.
2024-12-16 21:21:21.876 +03:30 [INF] End processing HTTP request after 986.0394ms - 429
2024-12-16 21:21:22.018 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.393 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:21.352 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.392 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.389 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.386 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.386 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.390 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.390 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1835.5939ms
2024-12-16 21:21:22.554 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.310 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.385 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:22.385 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.458 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:22.541 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1590.8152ms.
2024-12-16 21:21:21.972 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1241.1594ms.
2024-12-16 21:21:21.240 +03:30 [INF] Received HTTP response headers after 349.8489ms - 429
2024-12-16 21:21:20.966 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:20.967 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:20.967 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.586 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:21.006 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:20.969 +03:30 [INF] End processing HTTP request after 345.8025ms - 429
2024-12-16 21:21:21.094 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.586 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.577 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.576 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.696 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.575 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.723 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.578 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.579 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.580 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.581 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:22.581 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.582 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:22.729 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:22.729 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:22.730 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:22.583 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:22.584 +03:30 [INF] End processing HTTP request after 1728.5223ms - 429
2024-12-16 21:21:22.585 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.623 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.577 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.720 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.722 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.725 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.797 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.821 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:22.822 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.725 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3641.9176ms
2024-12-16 21:21:22.726 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.836 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.728 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.728 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.730 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2550.3415ms
2024-12-16 21:21:22.573 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.582 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:22.832 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.833 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.831 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:22.831 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.865 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:22.836 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.727 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.837 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:22.899 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.900 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.901 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.902 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.903 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.752 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.764 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:22.590 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.908 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.591 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.719 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.684 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2263.5758ms.
2024-12-16 21:21:22.890 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2004.3461ms.
2024-12-16 21:21:22.896 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:22.892 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.893 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.894 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:22.897 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.898 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.963 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.964 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:22.965 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.966 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.966 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.967 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.573 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1854.987ms.
2024-12-16 21:21:22.961 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.962 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.962 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:22.979 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:22.963 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.977 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:22.978 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:22.960 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:22.992 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.976 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:22.899 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.905 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.838 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:22.839 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:22.936 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:23.008 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:22.976 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:23.010 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.010 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.011 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.011 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.012 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:20.968 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:22.909 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:22.960 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2372.7959ms.
2024-12-16 21:21:22.913 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:22.853 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.001 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.002 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.003 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:23.003 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.004 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.018 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.019 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.023 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:23.033 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.043 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.006 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.041 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.042 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.043 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.041 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:23.005 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.056 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.007 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:23.062 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:23.062 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:23.063 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:23.013 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2676.6195ms
2024-12-16 21:21:22.731 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.065 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.065 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.066 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.066 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.013 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.014 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.015 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:23.016 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.018 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.057 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.058 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.059 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.093 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.059 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:23.094 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.060 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.061 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.064 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.007 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3969.3694ms
2024-12-16 21:21:23.009 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:22.892 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.065 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.070 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2736.0923ms
2024-12-16 21:21:22.820 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:22.906 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:23.104 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.106 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.105 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.107 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.108 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.109 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.111 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.111 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.112 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3763.4088ms
2024-12-16 21:21:23.113 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.134 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:22.907 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:22.908 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.071 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4385.4373ms
2024-12-16 21:21:23.072 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.073 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.184 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.179 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.181 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.182 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:23.184 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.185 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.186 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.186 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.222 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.217 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.218 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.219 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:23.221 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.235 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.236 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.225 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.233 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.234 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.235 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:23.266 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.249 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.268 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:23.216 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.232 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.223 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.249 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.191 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3902.957ms
2024-12-16 21:21:23.180 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2324.4726ms.
2024-12-16 21:21:23.191 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.192 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.193 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.194 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.283 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2506.013ms
2024-12-16 21:21:23.278 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.279 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:23.278 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.279 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.280 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.300 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.301 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:23.302 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.300 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.283 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2688.858ms
2024-12-16 21:21:23.287 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:23.287 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.288 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.299 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.291 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5160.4917ms
2024-12-16 21:21:23.315 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.315 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.316 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.314 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.333 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.333 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.350 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.362 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.347 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.314 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.331 +03:30 [INF] Received HTTP response headers after 255.6916ms - 429
2024-12-16 21:21:23.317 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2884.6875ms
2024-12-16 21:21:23.318 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.319 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.320 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.323 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.323 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.336 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.215 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:23.196 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.074 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.075 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.232 +03:30 [INF] Received HTTP response headers after 252.4354ms - 429
2024-12-16 21:21:23.365 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.365 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.366 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.367 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.367 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.368 +03:30 [INF] End processing HTTP request after 326.5574ms - 429
2024-12-16 21:21:23.382 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.383 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.433 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.455 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.433 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.384 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.393 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.479 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.480 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.482 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.517 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.496 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.478 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:23.523 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:23.533 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:23.562 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:23.524 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.534 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.517 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.370 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4073.7418ms
2024-12-16 21:21:23.588 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.586 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:23.589 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.590 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.586 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 567.2589ms.
2024-12-16 21:21:23.600 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:23.602 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.603 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.598 +03:30 [INF] Received HTTP response headers after 249.0331ms - 429
2024-12-16 21:21:23.618 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:23.618 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.616 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:23.637 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:23.637 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:23.629 +03:30 [INF] End processing HTTP request after 314.7062ms - 429
2024-12-16 21:21:23.591 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.656 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:23.657 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:23.719 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:23.655 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:23.746 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.382 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.523 +03:30 [INF] Received HTTP response headers after 274.0251ms - 429
2024-12-16 21:21:23.371 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:23.749 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.749 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.373 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.375 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.375 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:23.376 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.376 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.753 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.378 +03:30 [INF] End processing HTTP request after 415.63ms - 429
2024-12-16 21:21:23.744 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:23.745 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:23.744 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.825 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.849 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:23.881 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:23.746 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:23.867 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 566.0479ms.
2024-12-16 21:21:23.677 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:23.849 +03:30 [INF] Received HTTP response headers after 805.1621ms - 429
2024-12-16 21:21:23.904 +03:30 [INF] End processing HTTP request after 871.5635ms - 429
2024-12-16 21:21:23.748 +03:30 [INF] End processing HTTP request after 531.8514ms - 429
2024-12-16 21:21:23.902 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.901 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:23.900 +03:30 [INF] Received HTTP response headers after 564.2151ms - 429
2024-12-16 21:21:23.991 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:24.012 +03:30 [INF] End processing HTTP request after 710.2118ms - 429
2024-12-16 21:21:24.047 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:23.959 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:24.092 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:24.102 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:24.131 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.131 +03:30 [INF] Received HTTP response headers after 527.794ms - 429
2024-12-16 21:21:24.102 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:23.902 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:24.171 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.904 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.071 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:23.747 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.172 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1786.171ms
2024-12-16 21:21:24.166 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:24.168 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.169 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.217 +03:30 [INF] Received HTTP response headers after 579.0126ms - 429
2024-12-16 21:21:24.211 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:24.169 +03:30 [INF] End processing HTTP request after 635.6884ms - 429
2024-12-16 21:21:24.171 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.231 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.232 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:24.232 +03:30 [INF] End processing HTTP request after 630.2117ms - 429
2024-12-16 21:21:24.234 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.319 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.319 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.383 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.318 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:24.413 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:24.404 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:24.331 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:24.430 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.432 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:24.431 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.481 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 894.4035ms.
2024-12-16 21:21:24.341 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.318 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:24.229 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.488 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.540 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:24.489 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:24.489 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.487 +03:30 [INF] Received HTTP response headers after 2157.5293ms - 429
2024-12-16 21:21:24.490 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.487 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.491 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.540 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1044.4963ms.
2024-12-16 21:21:24.517 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.253 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.557 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.558 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.903 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.549 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.546 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.550 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:24.552 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.577 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.578 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.590 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.552 +03:30 [INF] End processing HTTP request after 3379.4815ms - 429
2024-12-16 21:21:24.592 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.593 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:24.642 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.611 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.695 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:24.694 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:24.554 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:24.713 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.714 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:24.714 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.740 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:24.554 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.555 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.556 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.765 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.766 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:24.767 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.765 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3646.6286ms.
2024-12-16 21:21:24.767 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:24.768 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.556 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:24.576 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.166 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:24.211 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.788 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.789 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:24.790 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.792 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.792 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:24.793 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.787 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.844 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.845 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.846 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:24.847 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:24.872 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:24.873 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:24.794 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:24.795 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.844 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1566.1221ms.
2024-12-16 21:21:24.809 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2952.722ms
2024-12-16 21:21:24.577 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:24.173 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:24.229 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1224.6873ms.
2024-12-16 21:21:24.878 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:24.870 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:24.871 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.872 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:24.900 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:24.901 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:24.902 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:24.868 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.788 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:24.874 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.875 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.876 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.890 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:24.907 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:24.047 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:23.750 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:24.899 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:24.899 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:24.903 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.873 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:24.964 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:24.867 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.903 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.904 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:24.904 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.905 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.970 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:24.898 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:24.897 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:24.909 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:24.973 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:24.924 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4446.5494ms
2024-12-16 21:21:23.372 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:23.372 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:23.751 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:23.751 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:24.962 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:24.963 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:24.964 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:24.965 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4322.4181ms
2024-12-16 21:21:24.848 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:24.966 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:24.967 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.968 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:24.969 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:24.971 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:24.998 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:24.972 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:24.973 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:25.001 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.187 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.962 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1782.1144ms.
2024-12-16 21:21:24.974 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.978 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.978 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.008 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.008 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:23.752 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:23.754 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:23.377 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:23.892 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:24.992 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:24.993 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.993 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:24.994 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.995 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1679.6118ms
2024-12-16 21:21:24.995 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:24.996 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:24.997 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:24.998 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.999 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.061 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.062 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.063 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.063 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5980.0683ms
2024-12-16 21:21:25.064 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.065 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:25.065 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.066 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:24.906 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:25.000 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:25.004 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:24.973 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:25.005 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:25.005 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:25.077 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.077 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.078 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.080 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2215.5254ms
2024-12-16 21:21:25.083 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:25.118 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.085 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2020.8174ms
2024-12-16 21:21:25.075 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.076 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.085 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:25.086 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2043.2529ms
2024-12-16 21:21:25.087 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:25.088 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:25.006 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5695.7031ms
2024-12-16 21:21:25.007 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.009 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:24.990 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.124 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.113 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.114 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.114 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.143 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.119 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.084 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.120 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.122 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.123 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.123 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:25.142 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3078.2171ms
2024-12-16 21:21:25.125 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.126 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2289.1946ms
2024-12-16 21:21:25.111 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:25.111 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:25.129 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.141 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.157 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.156 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.156 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.158 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.159 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.160 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3825.2093ms
2024-12-16 21:21:25.161 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.165 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.165 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:25.168 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.168 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.169 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:25.170 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:25.132 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:23.752 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.193 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3360.6521ms
2024-12-16 21:21:25.182 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.183 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.184 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.185 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.223 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.223 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.185 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.188 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.189 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.236 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.236 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.235 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.254 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.269 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.235 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.237 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.252 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.190 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:25.191 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.194 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.195 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:25.180 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.181 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.219 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:25.199 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:25.010 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:25.011 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4883.6795ms
2024-12-16 21:21:25.011 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:25.061 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2167.3412ms.
2024-12-16 21:21:25.282 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.282 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.283 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.284 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.284 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.285 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2386.8158ms
2024-12-16 21:21:25.286 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.287 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:25.287 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:25.288 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.289 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.290 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:25.291 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:25.292 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5164.0632ms
2024-12-16 21:21:25.293 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.316 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:25.316 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:25.317 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.317 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.318 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.334 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.348 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.319 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.319 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.320 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.321 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.322 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:25.323 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:25.323 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.324 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.324 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.326 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.349 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.350 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.351 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.384 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.352 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.352 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4180.3748ms
2024-12-16 21:21:25.353 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.354 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.354 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2461.138ms
2024-12-16 21:21:25.355 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.368 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:25.387 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.386 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.387 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.390 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.408 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.408 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.418 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.418 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.391 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.392 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.406 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:25.371 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.326 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.331 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5912.5902ms
2024-12-16 21:21:25.332 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:25.429 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.429 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.430 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.431 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.431 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.447 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.433 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:25.434 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.434 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6041.3161ms
2024-12-16 21:21:25.333 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:25.444 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.445 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.445 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.458 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.446 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.448 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.432 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3510.0607ms
2024-12-16 21:21:25.448 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:25.468 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.467 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.467 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.491 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.507 +03:30 [INF] Received HTTP response headers after 269.0845ms - 429
2024-12-16 21:21:25.507 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.510 +03:30 [INF] End processing HTTP request after 349.6189ms - 429
2024-12-16 21:21:25.511 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.520 +03:30 [INF] Received HTTP response headers after 265.5181ms - 429
2024-12-16 21:21:25.469 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.470 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:25.573 +03:30 [INF] End processing HTTP request after 350.3894ms - 429
2024-12-16 21:21:25.620 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:25.585 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.597 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.478 +03:30 [INF] Received HTTP response headers after 499.1356ms - 429
2024-12-16 21:21:25.708 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.666 +03:30 [INF] Received HTTP response headers after 310.3321ms - 429
2024-12-16 21:21:25.746 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 623.9704ms.
2024-12-16 21:21:25.748 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:25.700 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:25.772 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.773 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.773 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:25.458 +03:30 [INF] Received HTTP response headers after 878.9825ms - 429
2024-12-16 21:21:25.443 +03:30 [INF] Received HTTP response headers after 1959.9158ms - 429
2024-12-16 21:21:25.443 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:25.452 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:25.770 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:25.770 +03:30 [INF] End processing HTTP request after 481.2625ms - 429
2024-12-16 21:21:25.771 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.771 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:25.794 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:25.774 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:25.721 +03:30 [INF] End processing HTTP request after 2347.9206ms - 429
2024-12-16 21:21:25.849 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:25.905 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:25.478 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:25.917 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 733.6425ms.
2024-12-16 21:21:25.917 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:25.997 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.009 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:25.997 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:26.043 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:26.043 +03:30 [INF] Received HTTP response headers after 671.8172ms - 429
2024-12-16 21:21:25.926 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:26.033 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:25.953 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:26.092 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.115 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1885.389ms
2024-12-16 21:21:26.091 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.116 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:26.090 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 909.9683ms.
2024-12-16 21:21:26.134 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:26.093 +03:30 [INF] End processing HTTP request after 759.1746ms - 429
2024-12-16 21:21:26.094 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:26.175 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2742.5293ms
2024-12-16 21:21:26.176 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:26.177 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:26.189 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:26.171 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2847.5209ms.
2024-12-16 21:21:26.270 +03:30 [INF] Received HTTP response headers after 877.1849ms - 429
2024-12-16 21:21:26.271 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.271 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:26.270 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.287 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:26.293 +03:30 [INF] End processing HTTP request after 969.9398ms - 429
2024-12-16 21:21:26.294 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:26.294 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.359 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:26.379 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1533.6656ms
2024-12-16 21:21:26.390 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:26.423 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:26.347 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1030.7462ms.
2024-12-16 21:21:26.293 +03:30 [INF] Received HTTP response headers after 742.046ms - 429
2024-12-16 21:21:26.437 +03:30 [INF] End processing HTTP request after 929.3199ms - 429
2024-12-16 21:21:26.108 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:26.436 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:26.434 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.435 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.435 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2333.3112ms
2024-12-16 21:21:26.541 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3349.1365ms
2024-12-16 21:21:26.577 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1288.5495ms.
2024-12-16 21:21:26.459 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.565 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.321 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.584 +03:30 [INF] Received HTTP response headers after 1105.4041ms - 429
2024-12-16 21:21:26.585 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:26.584 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:26.624 +03:30 [INF] End processing HTTP request after 1165.9315ms - 429
2024-12-16 21:21:26.586 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:26.636 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.637 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6907.8878ms
2024-12-16 21:21:26.640 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:26.658 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:26.714 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:26.635 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1144.4285ms.
2024-12-16 21:21:26.600 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:26.732 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:25.449 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:25.776 +03:30 [INF] End processing HTTP request after 1287.4069ms - 429
2024-12-16 21:21:25.777 +03:30 [INF] End processing HTTP request after 2409.9379ms - 429
2024-12-16 21:21:26.734 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:26.730 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:26.730 +03:30 [INF] Received HTTP response headers after 1237.2837ms - 429
2024-12-16 21:21:26.773 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:26.801 +03:30 [INF] End processing HTTP request after 1355.5334ms - 429
2024-12-16 21:21:26.821 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.730 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.876 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3742.2731ms
2024-12-16 21:21:26.731 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.942 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:26.953 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1876.4381ms
2024-12-16 21:21:26.995 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7939.7546ms
2024-12-16 21:21:27.021 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1576.8761ms.
2024-12-16 21:21:27.032 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:27.009 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.040 +03:30 [INF] Received HTTP response headers after 1705.2819ms - 429
2024-12-16 21:21:27.040 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.077 +03:30 [INF] End processing HTTP request after 1795.577ms - 429
2024-12-16 21:21:27.054 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2513.7545ms
2024-12-16 21:21:27.090 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.149 +03:30 [INF] Received HTTP response headers after 876.4784ms - 429
2024-12-16 21:21:26.732 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.090 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1659.9432ms.
2024-12-16 21:21:27.150 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.176 +03:30 [INF] End processing HTTP request after 1082.2972ms - 429
2024-12-16 21:21:27.192 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:26.733 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.206 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:27.207 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.208 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.342 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.355 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.340 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:27.211 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.368 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.372 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.367 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.367 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2098.4953ms.
2024-12-16 21:21:27.407 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2172.2522ms
2024-12-16 21:21:27.408 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.235 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:26.440 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:26.755 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:26.994 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:26.896 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:27.424 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:27.422 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.421 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.421 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.526 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.420 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1494.1307ms.
2024-12-16 21:21:27.423 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.424 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6569.3623ms
2024-12-16 21:21:27.530 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.426 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:27.499 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3066.9826ms.
2024-12-16 21:21:25.778 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:25.778 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.525 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 4178.5245ms.
2024-12-16 21:21:27.526 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.499 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3167.9379ms
2024-12-16 21:21:27.527 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.538 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.548 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.529 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2292.1799ms
2024-12-16 21:21:27.531 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7932.5359ms
2024-12-16 21:21:27.466 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:27.549 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.548 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2425.0565ms
2024-12-16 21:21:27.548 +03:30 [INF] Received HTTP response headers after 1672.6572ms - 429
2024-12-16 21:21:27.529 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.549 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.532 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:27.533 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.535 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.534 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:27.534 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.552 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.553 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.566 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.556 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.557 +03:30 [INF] End processing HTTP request after 1785.5604ms - 429
2024-12-16 21:21:27.558 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.559 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3348.1457ms
2024-12-16 21:21:27.580 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.556 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.663 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2760.2807ms
2024-12-16 21:21:27.636 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.625 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.566 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.567 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:27.560 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.561 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.563 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.564 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:27.564 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.662 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:27.568 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3465.9021ms
2024-12-16 21:21:27.664 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.665 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.667 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.668 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.725 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.669 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.670 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.670 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.728 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.672 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5428.2707ms
2024-12-16 21:21:27.730 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.722 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.723 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3404.8261ms
2024-12-16 21:21:27.724 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.724 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.735 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.735 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.727 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:27.669 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.733 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.731 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.721 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1973.2596ms.
2024-12-16 21:21:27.734 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2286.5511ms
2024-12-16 21:21:27.757 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.726 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.741 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:27.767 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.767 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.768 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:27.769 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.770 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.766 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:27.728 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.729 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.671 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:27.730 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6395.1452ms
2024-12-16 21:21:27.797 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.797 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:27.809 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:27.798 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.799 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:27.810 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:27.811 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:27.811 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.802 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:27.813 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.806 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:27.808 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.808 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.797 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.819 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.810 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.800 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4435.3641ms
2024-12-16 21:21:27.820 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.839 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.866 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.861 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.812 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.876 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.818 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.878 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.879 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.880 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.809 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:27.814 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3990.154ms
2024-12-16 21:21:27.805 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:27.814 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:27.818 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.862 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.864 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.887 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.867 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.868 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.892 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.893 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.873 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2552.289ms
2024-12-16 21:21:27.875 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.800 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.876 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.877 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.861 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:27.902 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.902 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.903 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.882 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.885 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4979.4447ms
2024-12-16 21:21:27.886 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:27.886 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.887 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.865 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.908 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.890 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.891 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.871 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.913 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.893 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.894 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.911 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.889 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.912 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.912 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:27.933 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.933 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.951 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.970 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.952 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.932 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.913 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:27.907 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:27.994 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:27.995 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:27.996 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:27.997 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:27.895 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:27.998 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:27.999 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:27.900 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.001 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.002 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.881 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:27.904 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4554.3835ms
2024-12-16 21:21:27.991 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.989 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.990 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:27.991 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.992 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.022 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.023 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.023 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.993 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:27.997 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:27.872 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.046 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.047 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.898 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.000 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.049 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.050 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.006 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.904 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.895 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.048 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:28.051 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.044 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.042 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.044 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.041 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.041 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.045 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.046 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.048 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:27.925 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4407.9341ms
2024-12-16 21:21:28.105 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.104 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.106 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.107 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.108 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.134 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.111 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.079 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.103 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.096 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:27.899 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.140 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.086 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.086 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:27.801 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:27.905 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:27.906 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.145 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.129 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.131 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.132 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.133 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.133 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.108 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.135 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.137 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.138 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:28.139 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.147 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.148 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.149 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.153 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.154 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.153 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.155 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.147 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.165 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.140 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.182 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.183 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.184 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.184 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.185 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.144 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6322.8351ms
2024-12-16 21:21:28.174 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.175 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.175 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.197 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.178 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.199 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.180 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.181 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.173 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.181 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.141 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:27.880 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:28.142 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.206 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.196 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.197 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.198 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.178 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.228 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.179 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.201 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.201 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.202 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.205 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.194 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.216 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.143 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.144 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.146 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:27.907 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.224 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.225 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.226 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.226 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.227 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.200 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.229 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.231 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.231 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.247 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.233 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.240 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.241 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.242 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.246 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.245 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.247 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.261 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.262 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.235 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.240 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.239 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:28.235 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.265 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.237 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.237 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.238 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:28.258 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.258 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.259 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.260 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.260 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.263 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.256 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.303 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.257 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.234 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.263 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.305 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.264 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.298 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.299 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.319 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.321 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.301 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.301 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.302 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.303 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.232 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.327 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.328 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.329 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.329 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.266 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.331 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.332 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.332 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.320 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.334 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.322 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.335 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.325 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.335 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.300 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.348 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.349 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.326 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.330 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.346 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.347 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.350 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.324 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.364 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.365 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.347 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.375 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.374 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.374 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.326 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.388 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.304 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.386 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.385 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.387 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.412 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.413 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.388 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.386 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.398 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.363 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.398 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.305 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.420 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.421 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.333 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.236 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.268 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.424 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.424 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.414 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.414 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.415 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.446 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.416 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.448 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.469 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.469 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.418 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.419 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.419 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.422 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.264 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.317 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.423 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.423 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:28.478 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.479 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.470 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.471 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.471 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.489 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.480 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.490 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.473 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.499 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.518 +03:30 [INF] Received HTTP response headers after 251.6492ms - 429
2024-12-16 21:21:28.519 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.500 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.513 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.520 +03:30 [INF] End processing HTTP request after 376.6068ms - 429
2024-12-16 21:21:28.521 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.534 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.474 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.587 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.612 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.635 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:28.634 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.638 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.692 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 890.7255ms.
2024-12-16 21:21:28.700 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.600 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:28.475 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.668 +03:30 [INF] Received HTTP response headers after 268.5618ms - 429
2024-12-16 21:21:28.600 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.475 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.477 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:28.477 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.480 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:28.567 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.600 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.567 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.547 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.499 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.706 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:28.707 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:28.705 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.708 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.709 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:28.705 +03:30 [INF] Received HTTP response headers after 271.5511ms - 429
2024-12-16 21:21:28.709 +03:30 [INF] End processing HTTP request after 334.3149ms - 429
2024-12-16 21:21:28.711 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.732 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:28.729 +03:30 [INF] Received HTTP response headers after 280.5424ms - 429
2024-12-16 21:21:28.760 +03:30 [INF] Received HTTP response headers after 259.4035ms - 429
2024-12-16 21:21:28.797 +03:30 [INF] Received HTTP response headers after 275.3987ms - 429
2024-12-16 21:21:28.809 +03:30 [INF] End processing HTTP request after 337.7033ms - 429
2024-12-16 21:21:28.730 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:28.845 +03:30 [INF] Received HTTP response headers after 494.7378ms - 429
2024-12-16 21:21:28.866 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:28.876 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.914 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:28.891 +03:30 [INF] End processing HTTP request after 587.9037ms - 429
2024-12-16 21:21:28.832 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.866 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:28.946 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:28.946 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.007 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.838 +03:30 [INF] Received HTTP response headers after 281.5415ms - 429
2024-12-16 21:21:28.833 +03:30 [INF] End processing HTTP request after 352.6767ms - 429
2024-12-16 21:21:28.938 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.031 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.034 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.204 +03:30 [INF] Received HTTP response headers after 898.4539ms - 429
2024-12-16 21:21:29.033 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:29.034 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.233 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.066 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:29.032 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.035 +03:30 [INF] End processing HTTP request after 515.6881ms - 429
2024-12-16 21:21:29.166 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.255 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.183 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 764.6008ms.
2024-12-16 21:21:29.251 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3142.3058ms
2024-12-16 21:21:29.252 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.250 +03:30 [INF] End processing HTTP request after 986.652ms - 429
2024-12-16 21:21:29.249 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 946.6313ms.
2024-12-16 21:21:29.398 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.399 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.441 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:29.489 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6152.4103ms
2024-12-16 21:21:29.489 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.508 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.513 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:29.510 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:29.252 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.254 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.569 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.568 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.568 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1333.268ms.
2024-12-16 21:21:29.570 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:29.364 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.385 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.398 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 927.4444ms.
2024-12-16 21:21:29.592 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.590 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.593 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:29.594 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:29.589 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.589 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:29.595 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.622 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:29.648 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.647 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:29.649 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:29.649 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:29.650 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.651 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.646 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1146.9179ms.
2024-12-16 21:21:29.398 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:28.730 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:28.731 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:28.782 +03:30 [INF] End processing HTTP request after 368.5788ms - 429
2024-12-16 21:21:28.762 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:29.670 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:29.671 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.673 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:29.673 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:29.674 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:29.675 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.675 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.669 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.788 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.788 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:29.789 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:29.789 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1743.635ms
2024-12-16 21:21:29.790 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:29.676 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:29.712 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:29.817 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:29.678 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:29.679 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:29.810 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.812 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:29.849 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.813 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:29.814 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.815 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:29.853 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:29.853 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:29.854 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:29.855 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:29.678 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:29.848 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.779 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.692 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:29.850 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:29.850 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:29.851 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:29.852 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2130.173ms
2024-12-16 21:21:29.856 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:29.808 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:29.809 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.817 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:29.921 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:29.921 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:29.922 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:29.922 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:29.889 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:28.732 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.733 +03:30 [INF] End processing HTTP request after 320.0405ms - 429
2024-12-16 21:21:28.832 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:29.914 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:29.915 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.041 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:29.916 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1864.8044ms
2024-12-16 21:21:29.918 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:29.919 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:29.920 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.920 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:29.925 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1624.4972ms
2024-12-16 21:21:29.817 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:29.857 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:29.849 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:29.858 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:29.913 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1501.1524ms.
2024-12-16 21:21:29.926 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:29.927 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.052 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1688.4666ms.
2024-12-16 21:21:28.746 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.711 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.712 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:28.713 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:28.714 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:28.715 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.716 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.718 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.721 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.723 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:28.434 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:28.298 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:28.496 +03:30 [INF] Received HTTP response headers after 488.6516ms - 429
2024-12-16 21:21:28.928 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:29.009 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:30.063 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:30.064 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.066 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.066 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.068 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.144 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.145 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.071 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.071 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.072 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.073 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:30.074 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.075 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.075 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:30.076 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.077 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.078 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:30.079 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.079 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.157 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.157 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.158 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.083 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.143 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.142 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.143 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2518.7224ms
2024-12-16 21:21:30.145 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.168 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.169 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.176 +03:30 [INF] Received HTTP response headers after 358.0891ms - 429
2024-12-16 21:21:30.068 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.197 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.146 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.147 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2285.6348ms
2024-12-16 21:21:30.148 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1948.1645ms
2024-12-16 21:21:30.149 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:30.202 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.152 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.153 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:30.154 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.154 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.195 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.196 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.197 +03:30 [INF] End processing HTTP request after 1466.3378ms - 429
2024-12-16 21:21:30.195 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.198 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.269 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.216 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.218 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.304 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.199 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.201 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:30.306 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.307 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.308 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.309 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.206 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:30.302 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:30.303 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.304 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.302 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.291 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.069 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.305 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.328 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.201 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.203 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1972.1721ms
2024-12-16 21:21:30.151 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.205 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.386 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.215 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.215 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.142 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1755.0185ms.
2024-12-16 21:21:30.378 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.379 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.378 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1671.3646ms.
2024-12-16 21:21:30.398 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.380 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.381 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.381 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.382 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.383 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.384 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2522.4477ms
2024-12-16 21:21:30.384 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.385 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.387 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.321 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:30.388 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.397 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.397 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:30.156 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:30.156 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.167 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.408 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.407 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.408 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:30.409 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.410 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.411 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.441 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.442 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.443 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:30.445 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.412 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.413 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.414 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:30.415 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2681.6487ms
2024-12-16 21:21:30.416 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.418 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.455 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.456 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.456 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:30.459 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.454 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.455 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.459 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.460 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.461 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.483 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.483 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.418 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:30.419 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.420 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.421 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:30.421 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:30.440 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.433 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.080 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.081 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.082 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.167 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.085 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.086 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.087 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.087 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.088 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.089 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.090 +03:30 [INF] End processing HTTP request after 2280.2508ms - 429
2024-12-16 21:21:30.091 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.508 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.493 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.493 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.494 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:30.494 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.495 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.496 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.498 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.499 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.500 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.625 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.502 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.502 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.503 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.504 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.621 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.621 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:30.622 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.622 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.623 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.624 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.625 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.626 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.501 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.647 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.643 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.671 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.645 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.644 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.646 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.647 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.686 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2355.5367ms
2024-12-16 21:21:30.685 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.669 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.701 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.668 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.660 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.627 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.628 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2387.0465ms
2024-12-16 21:21:30.642 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.504 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:30.505 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:30.700 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.701 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.699 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.702 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.648 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.705 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.705 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.706 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.707 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.709 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:30.720 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:30.505 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.506 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.729 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.507 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.721 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2859.841ms
2024-12-16 21:21:30.722 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.723 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.723 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.724 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.746 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.748 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.725 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.726 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.726 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.762 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.728 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:30.728 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.729 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.507 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.744 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.541 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.509 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.512 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.766 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2539.9252ms
2024-12-16 21:21:30.759 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.760 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.757 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.758 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.760 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.761 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.764 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.727 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2865.9488ms
2024-12-16 21:21:30.765 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:30.766 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.788 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:30.767 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.768 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.768 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.789 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.790 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.790 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.791 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.792 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.793 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.795 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.798 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2599.6242ms
2024-12-16 21:21:30.788 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.799 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:30.800 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.801 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.788 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.771 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.513 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.820 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:30.811 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.813 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.814 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.814 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.815 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.816 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.817 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.818 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.852 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.852 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.853 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.854 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.873 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.875 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.894 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.896 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.854 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:30.855 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.865 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.894 +03:30 [INF] Received HTTP response headers after 265.2777ms - 429
2024-12-16 21:21:30.873 +03:30 [INF] Received HTTP response headers after 287.5631ms - 429
2024-12-16 21:21:30.866 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3004.8949ms
2024-12-16 21:21:30.819 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2957.4367ms
2024-12-16 21:21:30.819 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:30.842 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.821 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.810 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.811 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.822 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.841 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.825 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.514 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.918 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.907 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.905 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:30.906 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.965 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.907 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:30.965 +03:30 [INF] Received HTTP response headers after 257.588ms - 429
2024-12-16 21:21:30.908 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:30.909 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.910 +03:30 [INF] End processing HTTP request after 490.6337ms - 429
2024-12-16 21:21:30.910 +03:30 [INF] End processing HTTP request after 454.4611ms - 429
2024-12-16 21:21:30.968 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.967 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.023 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:31.050 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.968 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:31.151 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.193 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:31.202 +03:30 [INF] Received HTTP response headers after 255.6438ms - 429
2024-12-16 21:21:30.969 +03:30 [INF] End processing HTTP request after 465.4088ms - 429
2024-12-16 21:21:30.970 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:31.216 +03:30 [INF] End processing HTTP request after 320.1524ms - 429
2024-12-16 21:21:31.241 +03:30 [INF] Received HTTP response headers after 569.0419ms - 429
2024-12-16 21:21:31.299 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.390 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.391 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.405 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.321 +03:30 [INF] End processing HTTP request after 678.5345ms - 429
2024-12-16 21:21:31.433 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.442 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.443 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.441 +03:30 [INF] Received HTTP response headers after 347.6996ms - 200
2024-12-16 21:21:31.444 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.515 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.433 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:31.214 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:31.539 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.540 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.541 +03:30 [INF] End processing HTTP request after 573.0066ms - 200
2024-12-16 21:21:31.541 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.538 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:31.542 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.601 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:31.598 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.599 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.600 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:31.655 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1034.6082ms.
2024-12-16 21:21:31.655 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.598 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 724.5817ms.
2024-12-16 21:21:31.569 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:31.215 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:31.403 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:31.241 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:30.970 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:31.675 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:31.677 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:31.678 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:31.759 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:31.675 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:31.678 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:31.679 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:31.681 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:31.780 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:31.778 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:31.778 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:31.781 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:31.805 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.806 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:31.821 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.784 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:31.804 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:31.805 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:31.681 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:31.827 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:31.739 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1319.8676ms.
2024-12-16 21:21:31.822 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:31.823 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.822 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.823 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:31.824 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:31.825 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:31.826 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:31.682 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:31.840 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:31.711 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:31.739 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:31.176 +03:30 [INF] Received HTTP response headers after 300.5966ms - 429
2024-12-16 21:21:31.841 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:31.842 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:31.873 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:31.843 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.846 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:31.847 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:31.876 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:31.877 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:31.841 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:31.848 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:31.850 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:31.850 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.881 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.882 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:31.883 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.040 +03:30 [INF] Received HTTP response headers after 310.0983ms - 429
2024-12-16 21:21:31.875 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:31.874 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:31.875 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.876 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:31.878 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1682.6025ms
2024-12-16 21:21:31.847 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.848 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:31.879 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.880 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.880 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:31.873 +03:30 [INF] Received HTTP response headers after 65.7599ms - 200
2024-12-16 21:21:31.863 +03:30 [INF] End processing HTTP request after 1049.531ms - 429
2024-12-16 21:21:31.175 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:31.897 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.898 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:31.985 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:31.895 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:31.896 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:32.030 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:31.901 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:31.901 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:31.902 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:31.902 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:31.903 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:31.904 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:31.894 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:31.904 +03:30 [INF] End processing HTTP request after 226.9527ms - 200
2024-12-16 21:21:32.042 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:32.042 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1654.0532ms.
2024-12-16 21:21:31.191 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:32.061 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.061 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.060 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.062 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.063 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2549.5277ms
2024-12-16 21:21:32.064 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.167 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.167 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.169 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.169 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.065 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:32.065 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.066 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.067 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:32.067 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.118 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1327.317ms.
2024-12-16 21:21:32.093 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.166 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1724.7205ms.
2024-12-16 21:21:31.894 +03:30 [INF] End processing HTTP request after 1388.3797ms - 429
2024-12-16 21:21:30.946 +03:30 [INF] Received HTTP response headers after 259.7533ms - 429
2024-12-16 21:21:32.182 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.181 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.180 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.180 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.253 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.178 +03:30 [INF] Received HTTP response headers after 326.7353ms - 200
2024-12-16 21:21:32.179 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:32.182 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1537.354ms
2024-12-16 21:21:32.183 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.184 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.278 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.279 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.277 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.279 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:32.280 +03:30 [INF] End processing HTTP request after 1309.8739ms - 200
2024-12-16 21:21:32.281 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.282 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.300 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.185 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:32.185 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.186 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.187 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.188 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.277 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:32.200 +03:30 [INF] End processing HTTP request after 1577.2359ms - 429
2024-12-16 21:21:32.311 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.310 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:32.459 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.392 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:32.312 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.313 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:32.314 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.315 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2396.3932ms
2024-12-16 21:21:32.316 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.309 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.316 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3894.5282ms
2024-12-16 21:21:32.319 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.321 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.460 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.311 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.461 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.462 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.462 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:32.463 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.465 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.466 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.466 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.467 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.478 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:32.321 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:32.322 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.401 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1968.4616ms.
2024-12-16 21:21:32.459 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:30.916 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.486 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.480 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.481 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.482 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.482 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.483 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:32.485 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.542 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.543 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:32.544 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.544 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.565 +03:30 [INF] Received HTTP response headers after 736.8382ms - 200
2024-12-16 21:21:32.574 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.574 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.575 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.565 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.541 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.487 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.488 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.488 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4627.1784ms
2024-12-16 21:21:32.480 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.585 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.585 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.587 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.584 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.584 +03:30 [INF] End processing HTTP request after 902.7767ms - 200
2024-12-16 21:21:32.588 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.589 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.590 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.591 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.489 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:32.600 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.601 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.601 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.603 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.604 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:32.605 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:32.606 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.607 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:32.620 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.621 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.622 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:32.664 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.622 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.623 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:32.624 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.668 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.669 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.620 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.599 +03:30 [INF] Received HTTP response headers after 53.8371ms - 200
2024-12-16 21:21:32.600 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.656 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1691.3157ms.
2024-12-16 21:21:32.619 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:32.489 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:32.490 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:32.676 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:32.541 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2046.1227ms.
2024-12-16 21:21:32.505 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.678 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:30.941 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:30.919 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:30.919 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:30.920 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.921 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:30.940 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:30.924 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.515 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.917 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.665 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.666 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.665 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.667 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.667 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:32.721 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.721 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.747 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.722 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.747 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.671 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.643 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.749 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.748 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.749 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.761 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.774 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.781 +03:30 [INF] Received HTTP response headers after 46.5179ms - 200
2024-12-16 21:21:32.799 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.751 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.747 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:32.760 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.761 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.643 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.672 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.814 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.815 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.675 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.675 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:32.676 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:32.677 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:32.491 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.677 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:32.679 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.720 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.680 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.680 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.681 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.682 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.682 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.683 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.702 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.695 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:30.516 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.827 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:32.809 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.808 +03:30 [INF] End processing HTTP request after 185.5887ms - 200
2024-12-16 21:21:32.808 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.810 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.811 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.812 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.812 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.813 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.815 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.673 +03:30 [INF] End processing HTTP request after 210.6618ms - 200
2024-12-16 21:21:32.856 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.851 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.852 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.855 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.856 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.857 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.858 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.674 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:32.816 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.817 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2357.9504ms
2024-12-16 21:21:32.820 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:32.821 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:32.822 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.824 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:32.824 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.825 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.826 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.827 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.850 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.879 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.879 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.914 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.880 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.881 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.922 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:32.921 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.878 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:32.943 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:32.942 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.975 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:32.975 +03:30 [INF] Received HTTP response headers after 367.2854ms - 200
2024-12-16 21:21:32.942 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:32.882 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.984 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:32.984 +03:30 [INF] End processing HTTP request after 496.7576ms - 200
2024-12-16 21:21:32.983 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.983 +03:30 [INF] Received HTTP response headers after 339.1867ms - 200
2024-12-16 21:21:32.883 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:32.877 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.883 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.884 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:33.009 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:32.887 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4179.0842ms
2024-12-16 21:21:33.010 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.888 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:32.889 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:33.011 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:32.890 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.891 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.013 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:32.912 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.004 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.005 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.005 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.002 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:33.006 +03:30 [INF] End processing HTTP request after 405.8866ms - 200
2024-12-16 21:21:33.003 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.007 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.008 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.008 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:33.009 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:33.023 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.024 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.024 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.025 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.026 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.026 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.027 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.028 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.886 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.010 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5149.179ms
2024-12-16 21:21:32.888 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2823.5144ms
2024-12-16 21:21:33.047 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.048 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.049 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.062 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.050 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.050 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.051 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.052 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.052 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.046 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:33.046 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:33.053 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4186.5574ms
2024-12-16 21:21:33.062 +03:30 [INF] Received HTTP response headers after 338.7087ms - 200
2024-12-16 21:21:33.062 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.011 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:33.012 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:32.890 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.012 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.022 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:32.921 +03:30 [INF] Received HTTP response headers after 453.0506ms - 200
2024-12-16 21:21:33.022 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:32.828 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:32.829 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:32.830 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:32.831 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:32.850 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:32.834 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:30.516 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.093 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4216.5716ms
2024-12-16 21:21:33.083 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.091 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1522.6574ms.
2024-12-16 21:21:33.082 +03:30 [INF] Received HTTP response headers after 319.9831ms - 200
2024-12-16 21:21:33.082 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.083 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.084 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.086 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.126 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.127 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:33.127 +03:30 [INF] End processing HTTP request after 406.1047ms - 200
2024-12-16 21:21:33.128 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.129 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.087 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.088 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.091 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2182.5598ms.
2024-12-16 21:21:33.089 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.090 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2390.4415ms
2024-12-16 21:21:33.092 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:33.092 +03:30 [INF] End processing HTTP request after 469.8571ms - 200
2024-12-16 21:21:33.125 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:33.093 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:33.094 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:33.095 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.096 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.096 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.097 +03:30 [INF] End processing HTTP request after 912.0111ms - 200
2024-12-16 21:21:33.098 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.101 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.102 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.102 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.103 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.104 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.123 +03:30 [INF] Received HTTP response headers after 59.9944ms - 200
2024-12-16 21:21:33.106 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:30.619 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:30.519 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:33.150 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.152 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:33.153 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.154 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.155 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.149 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:33.149 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.155 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.157 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.158 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:33.158 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.159 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.160 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:33.161 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.161 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:33.162 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:33.164 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3308.2078ms
2024-12-16 21:21:33.168 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.169 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.170 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.171 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.172 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.173 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.252 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.252 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:33.253 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.253 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.255 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.255 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:33.256 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.257 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.258 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.260 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:33.261 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.261 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:33.263 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.263 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.265 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.268 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5028.4637ms
2024-12-16 21:21:33.269 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.270 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.324 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.272 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.272 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.309 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.309 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:33.310 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.311 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.347 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.347 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:33.363 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.311 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.312 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.313 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.314 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.315 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.369 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.370 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:33.369 +03:30 [INF] Received HTTP response headers after 413.4996ms - 200
2024-12-16 21:21:33.371 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.372 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.374 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.375 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.315 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:33.318 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.319 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 4252.8349ms
2024-12-16 21:21:33.320 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.385 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.386 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2594.8067ms
2024-12-16 21:21:33.387 +03:30 [INF] End processing HTTP request after 530.5733ms - 200
2024-12-16 21:21:33.416 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.388 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.417 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:33.417 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.389 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.389 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.390 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.384 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.384 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.391 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:33.394 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.403 +03:30 [INF] Received HTTP response headers after 54.6068ms - 200
2024-12-16 21:21:33.403 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.321 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.322 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.426 +03:30 [INF] Received HTTP response headers after 321.1554ms - 200
2024-12-16 21:21:33.427 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3226.1203ms
2024-12-16 21:21:33.427 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.426 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.428 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.429 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.430 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.430 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.431 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.432 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:33.432 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.433 +03:30 [INF] End processing HTTP request after 180.4088ms - 200
2024-12-16 21:21:33.436 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.323 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.323 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4491.6471ms
2024-12-16 21:21:33.325 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.271 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.450 +03:30 [INF] End processing HTTP request after 2934.6147ms - 200
2024-12-16 21:21:33.453 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.453 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.474 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.454 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.455 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.456 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.456 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.457 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.458 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:33.459 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.460 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.449 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.461 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5908.4705ms
2024-12-16 21:21:33.471 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.473 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.347 +03:30 [INF] Received HTTP response headers after 403.3245ms - 200
2024-12-16 21:21:33.337 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.298 +03:30 [INF] Received HTTP response headers after 167.8951ms - 200
2024-12-16 21:21:33.489 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.488 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.489 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.490 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.491 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.491 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.515 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.516 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.516 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.517 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.526 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.492 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.493 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2991.4242ms
2024-12-16 21:21:33.494 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.495 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.496 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.500 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.501 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.501 +03:30 [INF] End processing HTTP request after 621.9634ms - 200
2024-12-16 21:21:33.514 +03:30 [INF] End processing HTTP request after 463.7479ms - 200
2024-12-16 21:21:33.289 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.571 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.176 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.177 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.178 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.181 +03:30 [INF] End processing HTTP request after 157.1395ms - 200
2024-12-16 21:21:33.183 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.251 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5442.1578ms.
2024-12-16 21:21:33.202 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:30.092 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:33.561 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.562 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.562 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.563 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.564 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.584 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.584 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.567 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.568 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.568 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.587 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.570 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:33.587 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.581 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.582 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.583 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.583 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.585 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.565 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.566 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.586 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.569 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.590 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.572 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.174 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.573 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.574 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.574 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.614 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.615 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.577 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:33.580 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:33.602 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.603 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.604 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.636 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.606 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.646 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.646 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.671 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.606 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.607 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:33.674 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.673 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.608 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.609 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.602 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.609 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.610 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:33.611 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.684 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.686 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.683 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.720 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.683 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 5070.8915ms
2024-12-16 21:21:33.687 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.688 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.689 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.690 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.706 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.612 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.612 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.613 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.616 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.576 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.577 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:33.636 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:33.636 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.722 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.723 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.728 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.729 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.730 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.731 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.731 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.732 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.733 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.734 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.735 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.736 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:33.737 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:33.738 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.739 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:33.742 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.743 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.743 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.744 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.745 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.746 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.747 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.748 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.749 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.750 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.751 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.754 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:33.754 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:33.755 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.773 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:33.773 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.774 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.775 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.775 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.816 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.831 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.776 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.777 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.779 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.780 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.781 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.782 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.783 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.783 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:33.784 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:33.785 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.786 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:33.843 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:33.844 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.844 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.845 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.847 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.848 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.849 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.850 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.851 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.851 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.852 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.853 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:33.854 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:33.854 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:33.865 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.866 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.867 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.868 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.869 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.888 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.897 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:33.878 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.879 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.877 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.908 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.897 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.934 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.921 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.935 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.899 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:33.869 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.870 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.871 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.873 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.946 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:33.947 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.947 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.876 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:33.941 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:33.941 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:33.942 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.943 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.943 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:33.944 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.007 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.019 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.013 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.944 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.043 +03:30 [INF] Received HTTP response headers after 1150.787ms - 200
2024-12-16 21:21:34.049 +03:30 [INF] Received HTTP response headers after 613.1897ms - 200
2024-12-16 21:21:34.054 +03:30 [INF] End processing HTTP request after 1373.5523ms - 200
2024-12-16 21:21:34.043 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.052 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:33.945 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.948 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:33.874 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:33.875 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:33.876 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:33.949 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:34.071 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:34.063 +03:30 [INF] Received HTTP response headers after 588.5592ms - 200
2024-12-16 21:21:34.064 +03:30 [INF] End processing HTTP request after 800.3672ms - 200
2024-12-16 21:21:34.065 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.073 +03:30 [INF] End processing HTTP request after 645.377ms - 200
2024-12-16 21:21:34.075 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.081 +03:30 [INF] Received HTTP response headers after 807.5521ms - 200
2024-12-16 21:21:34.063 +03:30 [INF] Received HTTP response headers after 561.2857ms - 200
2024-12-16 21:21:34.065 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.066 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.067 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.068 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.068 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.092 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.088 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.088 +03:30 [INF] Received HTTP response headers after 684.991ms - 200
2024-12-16 21:21:34.089 +03:30 [INF] End processing HTTP request after 991.6528ms - 200
2024-12-16 21:21:34.116 +03:30 [INF] End processing HTTP request after 746.9658ms - 200
2024-12-16 21:21:34.119 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.090 +03:30 [INF] End processing HTTP request after 817.6569ms - 200
2024-12-16 21:21:34.091 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.124 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.126 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.124 +03:30 [INF] Received HTTP response headers after 433.3076ms - 200
2024-12-16 21:21:34.136 +03:30 [INF] Received HTTP response headers after 609.1181ms - 200
2024-12-16 21:21:34.091 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.103 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.102 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:34.102 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.069 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7335.5613ms
2024-12-16 21:21:34.070 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:34.072 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:34.144 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.144 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:34.145 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.146 +03:30 [INF] End processing HTTP request after 555.6574ms - 200
2024-12-16 21:21:34.146 +03:30 [INF] End processing HTTP request after 690.1689ms - 200
2024-12-16 21:21:34.154 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.175 +03:30 [INF] Received HTTP response headers after 528.1563ms - 200
2024-12-16 21:21:34.175 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.182 +03:30 [INF] Received HTTP response headers after 522.9903ms - 200
2024-12-16 21:21:34.194 +03:30 [INF] End processing HTTP request after 591.6469ms - 200
2024-12-16 21:21:34.195 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.154 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:34.148 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.149 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.202 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.203 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.201 +03:30 [INF] Received HTTP response headers after 494.5827ms - 200
2024-12-16 21:21:34.214 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.227 +03:30 [INF] End processing HTTP request after 553.7907ms - 200
2024-12-16 21:21:34.202 +03:30 [INF] End processing HTTP request after 618.7066ms - 200
2024-12-16 21:21:34.203 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.213 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:34.213 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.149 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:34.235 +03:30 [INF] Received HTTP response headers after 448.8815ms - 200
2024-12-16 21:21:34.235 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.237 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.248 +03:30 [INF] End processing HTTP request after 506.2709ms - 200
2024-12-16 21:21:34.250 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.263 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.237 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.238 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.238 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:34.270 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.270 +03:30 [INF] Received HTTP response headers after 166.4852ms - 200
2024-12-16 21:21:34.286 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.270 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.293 +03:30 [INF] End processing HTTP request after 218.3662ms - 200
2024-12-16 21:21:34.271 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.293 +03:30 [INF] Received HTTP response headers after 704.6835ms - 200
2024-12-16 21:21:34.330 +03:30 [INF] Received HTTP response headers after 174.8949ms - 200
2024-12-16 21:21:34.324 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.343 +03:30 [INF] End processing HTTP request after 217.1044ms - 200
2024-12-16 21:21:34.343 +03:30 [INF] Received HTTP response headers after 128.4302ms - 200
2024-12-16 21:21:34.349 +03:30 [INF] Received HTTP response headers after 166.9391ms - 200
2024-12-16 21:21:34.367 +03:30 [INF] End processing HTTP request after 171.4114ms - 200
2024-12-16 21:21:34.374 +03:30 [INF] Received HTTP response headers after 404.2213ms - 200
2024-12-16 21:21:34.332 +03:30 [INF] End processing HTTP request after 763.7009ms - 200
2024-12-16 21:21:34.274 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.247 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:34.240 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.150 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.151 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.152 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:34.153 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:34.382 +03:30 [INF] End processing HTTP request after 237.4548ms - 200
2024-12-16 21:21:34.382 +03:30 [INF] Received HTTP response headers after 1055.5698ms - 200
2024-12-16 21:21:34.383 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1716.6524ms.
2024-12-16 21:21:34.383 +03:30 [INF] End processing HTTP request after 461.6932ms - 200
2024-12-16 21:21:34.384 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.384 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.385 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:34.391 +03:30 [INF] End processing HTTP request after 1220.9276ms - 200
2024-12-16 21:21:34.392 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.395 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.391 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1806.0724ms.
2024-12-16 21:21:34.395 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.398 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.386 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.386 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.387 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 13381.8107ms
2024-12-16 21:21:34.415 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.414 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.416 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.417 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.417 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.420 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.439 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.439 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.468 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.480 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.438 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1834.0853ms.
2024-12-16 21:21:34.481 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1628.9803ms.
2024-12-16 21:21:34.481 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.438 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1625.7205ms.
2024-12-16 21:21:34.440 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.441 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.498 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.499 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.500 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.501 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.503 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.481 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2414.1997ms.
2024-12-16 21:21:34.468 +03:30 [INF] Received HTTP response headers after 476.6776ms - 200
2024-12-16 21:21:34.414 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1947.9764ms.
2024-12-16 21:21:34.434 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.388 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:34.389 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:34.518 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3599.8684ms.
2024-12-16 21:21:34.520 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.522 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.523 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2243.8985ms
2024-12-16 21:21:34.524 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.525 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.526 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.526 +03:30 [INF] End processing HTTP request after 591.439ms - 200
2024-12-16 21:21:34.528 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.528 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.530 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:34.532 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.536 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.537 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.532 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.538 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.538 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.540 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.541 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.543 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.530 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:34.556 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:34.556 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:34.557 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.558 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.558 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3167.4553ms
2024-12-16 21:21:34.559 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.559 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.560 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.561 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.561 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.562 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.563 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:34.564 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:34.565 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.565 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:34.566 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.570 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.570 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.576 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.607 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.587 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.570 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.575 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.607 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2031.4605ms
2024-12-16 21:21:34.611 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2441.4053ms
2024-12-16 21:21:34.571 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2404.7884ms
2024-12-16 21:21:34.572 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.572 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.573 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:34.623 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.622 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.622 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.644 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.645 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2822.9501ms
2024-12-16 21:21:34.618 +03:30 [INF] Received HTTP response headers after 345.432ms - 200
2024-12-16 21:21:34.642 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3343.4783ms
2024-12-16 21:21:34.621 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.624 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.624 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.626 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:34.574 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.575 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.574 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:34.652 +03:30 [INF] Received HTTP response headers after 210.1958ms - 200
2024-12-16 21:21:34.653 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6319.7508ms
2024-12-16 21:21:34.656 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.657 +03:30 [INF] End processing HTTP request after 453.7285ms - 200
2024-12-16 21:21:34.666 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.684 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.659 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.660 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2175.484ms
2024-12-16 21:21:34.697 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.697 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 6836.0289ms
2024-12-16 21:21:34.698 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.728 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.708 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.737 +03:30 [INF] Received HTTP response headers after 341.1695ms - 200
2024-12-16 21:21:34.740 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.741 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.750 +03:30 [INF] Received HTTP response headers after 329.8709ms - 200
2024-12-16 21:21:34.751 +03:30 [INF] End processing HTTP request after 476.7272ms - 200
2024-12-16 21:21:34.794 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.795 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.804 +03:30 [INF] Received HTTP response headers after 345.2483ms - 200
2024-12-16 21:21:34.776 +03:30 [INF] End processing HTTP request after 535.5238ms - 200
2024-12-16 21:21:34.744 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3310.587ms
2024-12-16 21:21:34.661 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3282.0138ms
2024-12-16 21:21:34.662 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.665 +03:30 [INF] End processing HTTP request after 269.9098ms - 200
2024-12-16 21:21:34.663 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:34.663 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:34.664 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.665 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:34.806 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.841 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.831 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.853 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:34.852 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.832 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.832 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.840 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.806 +03:30 [INF] End processing HTTP request after 408.5354ms - 200
2024-12-16 21:21:34.890 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:34.892 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.888 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.889 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.922 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:34.923 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:34.894 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.896 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.898 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.899 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.900 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.888 +03:30 [INF] Received HTTP response headers after 406.3775ms - 200
2024-12-16 21:21:34.921 +03:30 [INF] Received HTTP response headers after 627.6529ms - 200
2024-12-16 21:21:34.914 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.831 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.841 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.807 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:34.841 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.806 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1783.6583ms.
2024-12-16 21:21:34.945 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.840 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.815 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1467.5478ms.
2024-12-16 21:21:34.840 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.812 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.813 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3905.339ms
2024-12-16 21:21:34.932 +03:30 [INF] Received HTTP response headers after 625.5485ms - 200
2024-12-16 21:21:34.933 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:34.934 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:34.933 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.980 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:34.979 +03:30 [INF] End processing HTTP request after 728.7469ms - 200
2024-12-16 21:21:34.935 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.935 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.936 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.937 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.937 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.938 +03:30 [INF] End processing HTTP request after 498.6486ms - 200
2024-12-16 21:21:34.939 +03:30 [INF] End processing HTTP request after 668.1497ms - 200
2024-12-16 21:21:34.939 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.940 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:34.941 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:34.941 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:34.942 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:34.947 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:34.806 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1375.3909ms.
2024-12-16 21:21:34.947 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:34.948 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:34.949 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:34.978 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:34.957 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.016 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.004 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.002 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.003 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.005 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.007 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.009 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.010 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.011 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.014 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:35.015 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.036 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.038 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.038 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.039 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.066 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.067 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.097 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.039 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.040 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.107 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.108 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.109 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.107 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.129 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.041 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.042 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.154 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.156 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.156 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.158 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.159 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.154 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.191 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.065 +03:30 [INF] Received HTTP response headers after 1526.2302ms - 200
2024-12-16 21:21:35.058 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.035 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.017 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:35.018 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.218 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.221 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.222 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.222 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.223 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.224 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.225 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.218 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.226 +03:30 [INF] End processing HTTP request after 1737.5373ms - 200
2024-12-16 21:21:35.227 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.228 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.258 +03:30 [INF] Received HTTP response headers after 756.0549ms - 200
2024-12-16 21:21:35.258 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.260 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.261 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.262 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.263 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.263 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.264 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.265 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.251 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.018 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.020 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.021 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.022 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.024 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.034 +03:30 [INF] Received HTTP response headers after 685.1517ms - 200
2024-12-16 21:21:35.027 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:34.841 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1341.5206ms.
2024-12-16 21:21:34.840 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.839 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.832 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:34.815 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3623.2119ms
2024-12-16 21:21:34.840 +03:30 [INF] Received HTTP response headers after 591.0132ms - 200
2024-12-16 21:21:34.841 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:34.827 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:34.831 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.290 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.290 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.292 +03:30 [INF] End processing HTTP request after 875.7451ms - 200
2024-12-16 21:21:35.292 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.293 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.294 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.295 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.296 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.297 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.297 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.298 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.302 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.302 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.303 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.304 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.305 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.306 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.306 +03:30 [INF] End processing HTTP request after 1035.3533ms - 200
2024-12-16 21:21:35.307 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 5457.7385ms
2024-12-16 21:21:35.308 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.323 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.324 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1671.7101ms.
2024-12-16 21:21:35.325 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.328 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.329 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.331 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.332 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.333 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2246.3183ms.
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1621.0843ms.
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5254.7285ms.
2024-12-16 21:21:35.321 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.320 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1465.8631ms.
2024-12-16 21:21:35.334 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.334 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.335 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.336 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.336 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.337 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.343 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1779.9811ms.
2024-12-16 21:21:35.309 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.310 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.312 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.317 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.317 +03:30 [INF] End processing HTTP request after 1103.5834ms - 200
2024-12-16 21:21:35.318 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:35.319 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.319 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.344 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.344 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.345 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.346 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.347 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.348 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.349 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.350 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.351 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.352 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.355 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.357 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.357 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.359 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.359 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.360 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.361 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.362 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.362 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.363 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.364 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.364 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.366 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.367 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.367 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.368 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.369 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.369 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:35.371 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.372 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.373 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.412 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.375 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.376 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.378 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.383 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.384 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.385 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.386 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.387 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.387 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.389 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.391 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.394 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.395 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.396 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.398 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.399 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.400 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4891.5423ms
2024-12-16 21:21:35.400 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.401 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.402 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.403 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.405 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.374 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.375 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.408 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.409 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.410 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.411 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 4996.6544ms
2024-12-16 21:21:35.424 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.452 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.426 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.427 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.428 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.429 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.430 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.433 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.434 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.435 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.436 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.437 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.437 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.438 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.439 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.440 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.440 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.442 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.444 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.446 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.446 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.450 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2446.3364ms
2024-12-16 21:21:35.451 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.452 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.453 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.453 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.454 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.488 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.476 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.477 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.479 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.480 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.481 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.482 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.483 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.484 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.485 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.486 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.486 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.487 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.534 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.489 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.489 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.490 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.491 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:35.492 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2609.0256ms
2024-12-16 21:21:35.493 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.495 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.496 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.497 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.476 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.497 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.524 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.533 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.455 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.468 +03:30 [INF] Received HTTP response headers after 651.8544ms - 200
2024-12-16 21:21:35.425 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.574 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:35.570 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.575 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.620 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.621 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.576 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.576 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.578 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.579 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.580 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.581 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.581 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.582 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.582 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.583 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.584 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.585 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.586 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.587 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 7725.9108ms
2024-12-16 21:21:35.588 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.589 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.589 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:35.590 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.591 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.591 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.594 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.622 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.623 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.624 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2235.4681ms
2024-12-16 21:21:35.625 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.626 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.626 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.627 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.628 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.629 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.633 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.634 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.635 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.636 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.637 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.637 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.638 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.640 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.641 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:35.642 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.642 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2977.0523ms
2024-12-16 21:21:35.643 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.644 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:35.595 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.596 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.617 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.607 +03:30 [INF] End processing HTTP request after 1033.1439ms - 200
2024-12-16 21:21:35.621 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2040.0478ms.
2024-12-16 21:21:35.617 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.425 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.475 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.663 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.664 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2984.5414ms
2024-12-16 21:21:35.665 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.666 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.667 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.700 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.668 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.669 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.670 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.670 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.671 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.672 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.673 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4871.8793ms
2024-12-16 21:21:35.674 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2242.6356ms
2024-12-16 21:21:35.675 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7789.2583ms
2024-12-16 21:21:35.678 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.679 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.680 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2113.6932ms
2024-12-16 21:21:35.681 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.682 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.683 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3842.4252ms
2024-12-16 21:21:35.684 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.712 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.711 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.711 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 2963.79ms
2024-12-16 21:21:35.713 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.714 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.715 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.716 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.717 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.717 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.718 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.719 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.720 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.721 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.722 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.722 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.723 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.724 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.686 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.687 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.688 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2538.9519ms
2024-12-16 21:21:35.698 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.699 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.689 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.689 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.690 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.694 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:35.695 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:35.755 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:35.755 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:35.755 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:35.727 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.729 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.730 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.731 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.733 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.734 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.779 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.779 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.803 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.735 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.809 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:35.810 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.808 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:35.821 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.820 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.820 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.837 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.836 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.837 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.736 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.737 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.844 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.844 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.739 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 7878.1141ms
2024-12-16 21:21:35.740 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3120.322ms
2024-12-16 21:21:35.740 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 12887.4484ms
2024-12-16 21:21:35.741 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.742 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.743 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3262.706ms
2024-12-16 21:21:35.743 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.744 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.757 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.758 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.745 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.746 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.747 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.751 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.751 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:35.752 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.752 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.753 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.754 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:35.756 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:35.695 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.696 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.697 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.839 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:35.839 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.840 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.872 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.841 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.842 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.843 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.845 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.738 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.882 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.883 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.884 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.884 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.881 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.896 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:35.897 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.898 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.913 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.886 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.895 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.923 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:35.923 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.924 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.937 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:35.956 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.922 +03:30 [INF] Received HTTP response headers after 1297.242ms - 200
2024-12-16 21:21:35.924 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.935 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:35.936 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:35.896 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.739 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:35.847 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.852 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.978 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.979 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.031 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:35.977 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:35.979 +03:30 [INF] End processing HTTP request after 1418.0649ms - 200
2024-12-16 21:21:35.980 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.981 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.038 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.037 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.053 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.054 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:36.039 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.054 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2156.5288ms.
2024-12-16 21:21:36.051 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.981 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.984 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:35.985 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.031 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.037 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.055 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.056 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:36.056 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.057 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:36.068 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:36.068 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:36.058 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.061 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.065 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.066 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:36.094 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.066 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:36.068 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:36.054 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:36.058 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.093 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.104 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.103 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:36.105 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:36.105 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:36.107 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.129 +03:30 [INF] Received HTTP response headers after 1227.8081ms - 200
2024-12-16 21:21:36.102 +03:30 [INF] Received HTTP response headers after 1335.5548ms - 200
2024-12-16 21:21:36.120 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.061 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.063 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:36.065 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.854 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.854 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.137 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.137 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:36.138 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:36.139 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:36.141 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.141 +03:30 [INF] End processing HTTP request after 1335.763ms - 200
2024-12-16 21:21:36.142 +03:30 [INF] End processing HTTP request after 1444.4468ms - 200
2024-12-16 21:21:36.143 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.143 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.146 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.146 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:21:36.161 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:35.855 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.857 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:35.858 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.175 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:36.173 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.174 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:36.175 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2606.4875ms
2024-12-16 21:21:36.176 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.179 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.179 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.213 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.214 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.212 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:36.215 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.215 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:36.180 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.252 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.253 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.254 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:36.291 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.256 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:21:36.276 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:36.252 +03:30 [INF] Received HTTP response headers after 430.4657ms - 200
2024-12-16 21:21:36.252 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.277 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.183 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.172 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.183 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.297 +03:30 [INF] Received HTTP response headers after 396.4352ms - 200
2024-12-16 21:21:36.299 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.308 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.300 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 5512.6433ms
2024-12-16 21:21:36.301 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.306 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2067.4709ms.
2024-12-16 21:21:36.306 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2151.6356ms.
2024-12-16 21:21:36.302 +03:30 [INF] End processing HTTP request after 522.5414ms - 200
2024-12-16 21:21:36.303 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.303 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:36.304 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.307 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:36.307 +03:30 [INF] End processing HTTP request after 464.8421ms - 200
2024-12-16 21:21:36.309 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.298 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.311 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:36.311 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.312 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:36.345 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:36.345 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:36.346 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:36.307 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.184 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.212 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.194 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.337 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:36.339 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:36.341 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.342 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.343 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.361 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.361 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.362 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:36.317 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:21:36.358 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:36.359 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.360 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.383 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:36.382 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:36.392 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.416 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.344 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:36.346 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:36.418 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:36.374 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:36.317 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.422 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.337 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.415 +03:30 [INF] Received HTTP response headers after 1372.6948ms - 200
2024-12-16 21:21:36.416 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.393 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.415 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.417 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:36.421 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2640.2754ms
2024-12-16 21:21:36.316 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:36.422 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:36.358 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.443 +03:30 [INF] End processing HTTP request after 1503.9583ms - 200
2024-12-16 21:21:36.444 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.445 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.445 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.483 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.447 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:36.448 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.449 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:36.469 +03:30 [INF] Received HTTP response headers after 74.9448ms - 200
2024-12-16 21:21:36.443 +03:30 [INF] Received HTTP response headers after 1214.2202ms - 200
2024-12-16 21:21:36.463 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.437 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.338 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.347 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.347 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.489 +03:30 [INF] Received HTTP response headers after 39.4705ms - 200
2024-12-16 21:21:36.490 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.524 +03:30 [INF] End processing HTTP request after 150.7598ms - 200
2024-12-16 21:21:36.490 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:36.491 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:36.492 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 7924.6794ms
2024-12-16 21:21:36.492 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:36.493 +03:30 [INF] End processing HTTP request after 134.2382ms - 200
2024-12-16 21:21:36.493 +03:30 [INF] End processing HTTP request after 1551.917ms - 200
2024-12-16 21:21:36.494 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:36.495 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.495 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.504 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.357 +03:30 [INF] Received HTTP response headers after 287.9096ms - 429
2024-12-16 21:21:36.350 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.858 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:35.859 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:36.550 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.542 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.543 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:36.544 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:36.546 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:36.546 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:36.583 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:36.582 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:36.584 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:36.596 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:36.549 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:36.549 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.572 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:36.551 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.609 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:36.608 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:36.609 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.607 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.610 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:36.630 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.631 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:36.632 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.611 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:36.612 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.630 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:36.622 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.541 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.552 +03:30 [INF] End processing HTTP request after 570.3646ms - 429
2024-12-16 21:21:36.554 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.640 +03:30 [INF] Received HTTP response headers after 362.8601ms - 429
2024-12-16 21:21:36.642 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:36.641 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.745 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.643 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.781 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:36.698 +03:30 [INF] End processing HTTP request after 485.6158ms - 429
2024-12-16 21:21:36.641 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2860.9158ms
2024-12-16 21:21:36.787 +03:30 [INF] Received HTTP response headers after 364.2437ms - 429
2024-12-16 21:21:36.788 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:36.848 +03:30 [INF] End processing HTTP request after 530.4678ms - 429
2024-12-16 21:21:36.788 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.871 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:36.892 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.946 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.870 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:36.809 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:36.956 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:36.958 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:36.957 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:37.035 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:37.008 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 834.864ms.
2024-12-16 21:21:36.995 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 8395.6119ms
2024-12-16 21:21:36.644 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:36.645 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:36.648 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:36.648 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:36.657 +03:30 [INF] Received HTTP response headers after 616.4999ms - 429
2024-12-16 21:21:37.058 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 755.4605ms.
2024-12-16 21:21:37.060 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:37.059 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:37.085 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:37.061 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:37.063 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:37.064 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:37.096 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:37.094 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:37.094 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:37.097 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:37.122 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:37.123 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:37.121 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:37.117 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:37.134 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:37.135 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:37.133 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:37.134 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:37.064 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:37.065 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:37.085 +03:30 [INF] Received HTTP response headers after 868.6994ms - 429
2024-12-16 21:21:37.078 +03:30 [INF] End processing HTTP request after 1153.9296ms - 429
2024-12-16 21:21:36.768 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.144 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:37.145 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:37.252 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:37.146 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:37.321 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1691.6393ms
2024-12-16 21:21:37.322 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:37.146 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:37.143 +03:30 [INF] Received HTTP response headers after 374.5359ms - 429
2024-12-16 21:21:37.144 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:37.147 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:37.148 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:37.149 +03:30 [INF] End processing HTTP request after 1006.0013ms - 429
2024-12-16 21:21:37.319 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.275 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1338.8906ms.
2024-12-16 21:21:37.336 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:37.332 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:37.485 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.333 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:37.485 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2654.5182ms
2024-12-16 21:21:37.332 +03:30 [INF] Received HTTP response headers after 861.3551ms - 429
2024-12-16 21:21:37.561 +03:30 [INF] Received HTTP response headers after 1452.8181ms - 429
2024-12-16 21:21:37.334 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:37.334 +03:30 [INF] End processing HTTP request after 704.4517ms - 429
2024-12-16 21:21:37.335 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:37.568 +03:30 [INF] Received HTTP response headers after 502.7855ms - 429
2024-12-16 21:21:37.569 +03:30 [INF] End processing HTTP request after 1152.4272ms - 429
2024-12-16 21:21:37.636 +03:30 [INF] End processing HTTP request after 1014.1137ms - 429
2024-12-16 21:21:37.569 +03:30 [INF] End processing HTTP request after 1518.0927ms - 429
2024-12-16 21:21:37.570 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:37.660 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.807 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.763 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1784.8599ms
2024-12-16 21:21:37.592 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:37.947 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:37.992 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:37.981 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:38.069 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2088.6915ms.
2024-12-16 21:21:38.018 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1601.9861ms.
2024-12-16 21:21:38.094 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.018 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2395.2941ms
2024-12-16 21:21:37.982 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1373.3495ms.
2024-12-16 21:21:38.126 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1575.2954ms.
2024-12-16 21:21:38.127 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.128 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:37.971 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:37.446 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:37.337 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:37.552 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1431.4434ms.
2024-12-16 21:21:37.472 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1558.4633ms.
2024-12-16 21:21:37.400 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:36.757 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:36.572 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.139 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.140 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.141 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.138 +03:30 [INF] Received HTTP response headers after 4116.8964ms - 429
2024-12-16 21:21:38.138 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.144 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.144 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.145 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.146 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.147 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.148 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:36.564 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:35.860 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.860 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:35.861 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.862 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3396.5559ms
2024-12-16 21:21:35.862 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.864 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 7264.7328ms
2024-12-16 21:21:35.866 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.178 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3793.2027ms.
2024-12-16 21:21:38.178 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2447.374ms.
2024-12-16 21:21:38.160 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.160 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.161 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.162 +03:30 [INF] End processing HTTP request after 4218.4649ms - 429
2024-12-16 21:21:38.163 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.181 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.182 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.182 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.183 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.183 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.210 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.178 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2340.7989ms.
2024-12-16 21:21:38.178 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4029.0614ms.
2024-12-16 21:21:38.164 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.164 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.165 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.167 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.168 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.170 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.157 +03:30 [INF] Received HTTP response headers after 643.3634ms - 429
2024-12-16 21:21:38.159 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.171 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:38.172 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.284 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.282 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.284 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.285 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.285 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.282 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:38.286 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.316 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.314 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.361 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.317 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.318 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.319 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2836.7056ms
2024-12-16 21:21:38.377 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.287 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.290 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.380 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.380 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.292 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.293 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.384 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.384 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.385 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.295 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.314 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.306 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.172 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.173 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.175 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:38.176 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.291 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:38.374 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.373 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.375 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.376 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2161.9975ms
2024-12-16 21:21:38.377 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3546.2365ms
2024-12-16 21:21:38.373 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 4474.4837ms.
2024-12-16 21:21:38.334 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.379 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.381 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.291 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.383 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.385 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2805.8045ms
2024-12-16 21:21:38.293 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.428 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.294 +03:30 [INF] End processing HTTP request after 972.3572ms - 429
2024-12-16 21:21:38.386 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.419 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:38.420 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.513 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4662.3414ms
2024-12-16 21:21:38.420 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2742.4134ms
2024-12-16 21:21:38.421 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.423 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:38.424 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.533 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.425 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.425 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.535 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:38.426 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.427 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.428 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.430 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.294 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.452 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.387 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.388 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.388 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:38.389 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.529 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.526 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:38.529 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.530 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2691.4395ms
2024-12-16 21:21:38.531 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.534 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.424 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.534 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.536 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4753.7072ms
2024-12-16 21:21:38.418 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.537 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.563 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 10015.8998ms
2024-12-16 21:21:38.563 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3217.447ms
2024-12-16 21:21:38.564 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3732.8503ms
2024-12-16 21:21:38.566 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:38.568 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.628 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.569 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2271.0988ms
2024-12-16 21:21:38.569 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.570 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.579 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:38.538 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.539 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3707.4648ms
2024-12-16 21:21:38.539 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.540 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.525 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:38.541 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.629 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.623 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:38.624 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.625 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:38.627 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.628 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:38.568 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.713 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.711 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:38.712 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 3880.6757ms
2024-12-16 21:21:38.714 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.737 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.630 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:38.631 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 10132.7031ms
2024-12-16 21:21:38.632 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:38.622 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:38.632 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:38.637 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3155.8778ms
2024-12-16 21:21:38.637 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.687 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1541.6783ms.
2024-12-16 21:21:38.652 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.541 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.542 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.562 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.740 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:38.732 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.737 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:38.731 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.786 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.724 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.687 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2850.8175ms
2024-12-16 21:21:38.738 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3309.307ms
2024-12-16 21:21:38.780 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:38.742 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:38.806 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:38.804 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.805 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.808 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:38.811 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.824 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.743 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.744 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3164.8578ms
2024-12-16 21:21:38.744 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:38.745 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.746 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.786 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:38.762 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.554 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.418 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:38.407 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.179 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:38.180 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:35.867 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:35.868 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:35.868 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:21:35.869 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:38.842 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:38.843 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.844 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.844 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5272.6085ms
2024-12-16 21:21:38.845 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 4014.2557ms
2024-12-16 21:21:38.846 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.849 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4016.4164ms
2024-12-16 21:21:38.850 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.851 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:38.852 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.853 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.854 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.855 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.857 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.859 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.860 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.861 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.862 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.877 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5566.7334ms
2024-12-16 21:21:35.870 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:35.870 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:35.871 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:38.100 +03:30 [INF] Received HTTP response headers after 808.4669ms - 429
2024-12-16 21:21:38.879 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:38.880 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.880 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.881 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.884 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:38.886 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4053.5369ms
2024-12-16 21:21:38.886 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:38.889 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.890 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.890 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.891 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.892 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.902 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.900 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.903 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.904 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 10336.9373ms
2024-12-16 21:21:38.905 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:38.907 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:38.949 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:38.948 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.950 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.963 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.909 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.965 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.965 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.919 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.893 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:38.894 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.894 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.895 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:38.972 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.973 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:38.974 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.898 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:38.899 +03:30 [INF] End processing HTTP request after 1764.3615ms - 429
2024-12-16 21:21:38.961 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.962 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:39.009 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:39.040 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:38.964 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:39.075 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.960 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:38.908 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.966 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.910 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:38.948 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:38.969 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.970 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.971 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.972 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:39.084 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:38.896 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:38.897 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:38.898 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.072 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:39.073 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:39.074 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:39.127 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:39.076 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.960 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.077 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:39.077 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.078 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.079 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:39.082 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.082 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:39.083 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.155 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2545.8003ms
2024-12-16 21:21:39.152 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:39.151 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:39.153 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.154 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.156 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.157 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.158 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:39.159 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.173 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.085 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:38.975 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.085 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 6338.4645ms
2024-12-16 21:21:39.086 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.150 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2027.8576ms.
2024-12-16 21:21:39.182 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:39.183 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:39.184 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.184 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.185 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.186 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.187 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.188 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.189 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:39.191 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.192 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.193 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.195 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.199 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.200 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:39.201 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:39.202 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3147.6381ms
2024-12-16 21:21:39.203 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.204 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.205 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.206 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.209 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.224 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.225 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.226 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.250 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.211 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.212 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:39.213 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.219 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:39.213 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.214 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.216 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.217 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.218 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:39.262 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:39.249 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.244 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.251 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.252 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.254 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.256 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.256 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:39.257 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.258 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.259 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.260 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.247 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.264 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:39.265 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.265 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.266 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.278 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.280 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.293 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.267 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.268 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:39.269 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.270 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:39.271 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.273 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.276 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.277 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.279 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:39.305 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.305 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.306 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.307 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.308 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.308 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.319 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.320 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.318 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.344 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.320 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.333 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.333 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:39.309 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.310 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:39.334 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.344 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.344 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.345 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.346 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.347 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.366 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.366 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.368 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.371 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.397 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:39.398 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.412 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.436 +03:30 [INF] Received HTTP response headers after 625.1242ms - 429
2024-12-16 21:21:39.437 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.439 +03:30 [INF] End processing HTTP request after 698.9487ms - 429
2024-12-16 21:21:39.450 +03:30 [INF] Received HTTP response headers after 361.0129ms - 429
2024-12-16 21:21:39.397 +03:30 [INF] Received HTTP response headers after 531.7588ms - 200
2024-12-16 21:21:39.487 +03:30 [INF] End processing HTTP request after 3617.257ms - 429
2024-12-16 21:21:39.505 +03:30 [INF] End processing HTTP request after 3751.5191ms - 200
2024-12-16 21:21:39.411 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:39.386 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.574 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:39.602 +03:30 [INF] Received HTTP response headers after 626.8467ms - 429
2024-12-16 21:21:39.694 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:39.706 +03:30 [INF] End processing HTTP request after 3835.7923ms - 429
2024-12-16 21:21:39.734 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1102.0533ms.
2024-12-16 21:21:39.744 +03:30 [INF] Received HTTP response headers after 517.2567ms - 429
2024-12-16 21:21:39.800 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:39.835 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 4139.1234ms.
2024-12-16 21:21:39.870 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:39.813 +03:30 [INF] End processing HTTP request after 626.88ms - 429
2024-12-16 21:21:39.596 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.881 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:39.882 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:39.882 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:40.019 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:39.995 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:39.894 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:40.019 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 4322.0585ms.
2024-12-16 21:21:40.007 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.021 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:40.055 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.357 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:39.357 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:39.312 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:39.313 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.315 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:39.317 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:39.317 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:40.079 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 924.779ms.
2024-12-16 21:21:40.079 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.080 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:40.081 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:40.081 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:40.082 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:40.083 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:40.083 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:40.084 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:40.090 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.091 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:40.091 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2947.862ms
2024-12-16 21:21:40.087 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.092 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.092 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.107 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.085 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:40.103 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:40.103 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:40.120 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:40.122 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:40.104 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.105 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.106 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.093 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:40.129 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:40.130 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5600.2348ms
2024-12-16 21:21:40.145 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:40.130 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4067.1229ms
2024-12-16 21:21:40.131 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:40.152 +03:30 [INF] Received HTTP response headers after 753.2169ms - 429
2024-12-16 21:21:40.153 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5622.3073ms
2024-12-16 21:21:40.152 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.157 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:40.128 +03:30 [INF] Received HTTP response headers after 759.4665ms - 429
2024-12-16 21:21:40.143 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:40.102 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:40.102 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:40.118 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:40.163 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.164 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 11236.0623ms
2024-12-16 21:21:40.162 +03:30 [INF] Received HTTP response headers after 747.9819ms - 429
2024-12-16 21:21:40.185 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 11175.8091ms
2024-12-16 21:21:40.164 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:40.162 +03:30 [INF] End processing HTTP request after 818.4766ms - 429
2024-12-16 21:21:40.165 +03:30 [INF] End processing HTTP request after 844.3242ms - 429
2024-12-16 21:21:40.196 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:40.193 +03:30 [INF] Received HTTP response headers after 610.0531ms - 429
2024-12-16 21:21:40.196 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:40.468 +03:30 [INF] End processing HTTP request after 1096.9925ms - 429
2024-12-16 21:21:40.573 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:40.532 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:40.193 +03:30 [INF] End processing HTTP request after 827.1091ms - 429
2024-12-16 21:21:40.650 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:40.226 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1799.0085ms
2024-12-16 21:21:40.737 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.748 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:40.781 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:40.803 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:40.844 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:40.872 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1526.3329ms.
2024-12-16 21:21:40.748 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.560 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:40.693 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1386.6497ms.
2024-12-16 21:21:40.924 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4617.1434ms
2024-12-16 21:21:40.922 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:40.923 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.921 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1576.946ms.
2024-12-16 21:21:40.973 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1654.5502ms.
2024-12-16 21:21:40.938 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.165 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:40.166 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:40.176 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:40.185 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:40.086 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:40.086 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3342.7329ms
2024-12-16 21:21:40.981 +03:30 [INF] Received HTTP response headers after 1530.5908ms - 429
2024-12-16 21:21:40.981 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.982 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.983 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.984 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:40.986 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.987 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:40.987 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.988 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:40.988 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:40.989 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:40.990 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:40.991 +03:30 [INF] End processing HTTP request after 1578.1461ms - 429
2024-12-16 21:21:40.991 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:40.992 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.032 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:41.053 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:40.993 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:40.996 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:41.088 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.089 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.089 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:40.999 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:40.999 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.091 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.001 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4690.4459ms
2024-12-16 21:21:41.086 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:41.087 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:41.113 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:41.088 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.086 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:41.090 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:41.120 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:41.120 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:41.121 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.135 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2058.8759ms
2024-12-16 21:21:40.997 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:40.998 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:40.998 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.091 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.174 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.171 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:41.172 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2206.094ms
2024-12-16 21:21:41.206 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:41.208 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.211 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:41.173 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:41.171 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1773.9039ms.
2024-12-16 21:21:41.203 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2779.7913ms
2024-12-16 21:21:41.175 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.176 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.113 +03:30 [INF] Received HTTP response headers after 981.8754ms - 429
2024-12-16 21:21:41.000 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:41.119 +03:30 [INF] Received HTTP response headers after 1011.8775ms - 429
2024-12-16 21:21:41.212 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:41.212 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:41.215 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:41.213 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:41.212 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5485.3259ms
2024-12-16 21:21:41.214 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:41.252 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:41.217 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:41.217 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:41.267 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:41.268 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:41.270 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2085.136ms
2024-12-16 21:21:41.296 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.311 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.270 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.296 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:41.279 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:41.218 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.326 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:41.266 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:41.219 +03:30 [INF] End processing HTTP request after 1126.8475ms - 429
2024-12-16 21:21:41.220 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:21:41.330 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.322 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.321 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:41.395 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:41.323 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2756.9078ms
2024-12-16 21:21:41.325 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6761.0923ms.
2024-12-16 21:21:41.457 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.456 +03:30 [INF] Received HTTP response headers after 277.1801ms - 429
2024-12-16 21:21:41.465 +03:30 [INF] Received HTTP response headers after 287.7388ms - 429
2024-12-16 21:21:41.465 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:41.323 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.325 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.325 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2436.539ms
2024-12-16 21:21:41.327 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:41.261 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:41.475 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:41.475 +03:30 [INF] End processing HTTP request after 475.9738ms - 429
2024-12-16 21:21:41.476 +03:30 [INF] End processing HTTP request after 488.4826ms - 429
2024-12-16 21:21:41.492 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:41.477 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:41.478 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:41.480 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.543 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.543 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.616 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:41.626 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:41.661 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:41.675 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.729 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 741.5494ms.
2024-12-16 21:21:41.626 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.553 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:41.575 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.481 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.491 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:41.491 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.372 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.448 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:41.437 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:41.800 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2616.2434ms
2024-12-16 21:21:41.797 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.798 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:41.796 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1629.9831ms.
2024-12-16 21:21:41.799 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:41.856 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.802 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.804 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6163.4394ms
2024-12-16 21:21:41.805 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:41.806 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.807 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.838 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.220 +03:30 [INF] End processing HTTP request after 1128.138ms - 429
2024-12-16 21:21:41.869 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1788.0406ms.
2024-12-16 21:21:41.873 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:21:41.870 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.871 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:41.961 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.872 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:41.917 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 8064.7804ms
2024-12-16 21:21:41.874 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3248.4205ms
2024-12-16 21:21:41.874 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:41.975 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.877 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:41.973 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:41.972 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:41.974 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.012 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:41.985 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 14177.5842ms
2024-12-16 21:21:41.985 +03:30 [INF] Received HTTP response headers after 892.8154ms - 429
2024-12-16 21:21:42.001 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.001 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.026 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.878 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:41.879 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.894 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:42.029 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.029 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.030 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.030 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.020 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.032 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.024 +03:30 [INF] End processing HTTP request after 1024.7271ms - 429
2024-12-16 21:21:42.025 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.023 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:21:42.053 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.026 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.877 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.076 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.075 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.019 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.032 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2947.8401ms
2024-12-16 21:21:42.019 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.144 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:21:42.115 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.156 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.156 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.157 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.155 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:42.115 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.165 +03:30 [INF] Received HTTP response headers after 504.4117ms - 429
2024-12-16 21:21:42.166 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.166 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7327.0175ms
2024-12-16 21:21:42.167 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.209 +03:30 [INF] End processing HTTP request after 665.7927ms - 429
2024-12-16 21:21:42.165 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.220 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.223 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.297 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.223 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.219 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1231.0566ms.
2024-12-16 21:21:42.245 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.185 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.091 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.027 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.310 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.309 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.311 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3227.7345ms
2024-12-16 21:21:42.308 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:42.311 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:42.329 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.330 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.330 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.358 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.383 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.313 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.328 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.327 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.028 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.380 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 888.2121ms.
2024-12-16 21:21:42.384 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.405 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:42.381 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.382 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.383 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7542.6967ms
2024-12-16 21:21:42.414 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.426 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.384 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.428 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.428 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:41.882 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.430 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.420 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.420 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.422 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.423 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.424 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.425 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.434 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.433 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.427 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3451.9096ms
2024-12-16 21:21:42.312 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.429 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.459 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.431 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.432 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.031 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.430 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:41.972 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:42.455 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.456 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.456 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.457 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.514 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.458 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.460 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.386 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.518 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.461 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.462 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3207.8176ms
2024-12-16 21:21:42.462 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.512 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2429.9692ms.
2024-12-16 21:21:42.513 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.512 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.513 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.515 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.457 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.516 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.518 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.519 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.460 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.520 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.521 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.532 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:42.539 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.540 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:42.541 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.543 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.552 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.544 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7712.6329ms
2024-12-16 21:21:42.551 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.552 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.570 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.543 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1338.146ms
2024-12-16 21:21:42.545 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.545 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.546 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.546 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.578 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.579 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.580 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.581 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.578 +03:30 [INF] Received HTTP response headers after 264.2747ms - 429
2024-12-16 21:21:42.583 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.584 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.547 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.548 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6861.8347ms
2024-12-16 21:21:42.550 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.549 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.612 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.612 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.613 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.604 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.604 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.605 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2409.1808ms
2024-12-16 21:21:42.605 +03:30 [INF] End processing HTTP request after 728.4631ms - 429
2024-12-16 21:21:42.606 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:42.616 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.615 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.603 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.614 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.658 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.628 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.704 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.705 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.706 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.609 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.702 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.703 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.700 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.703 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.700 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:42.714 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.725 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.724 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.724 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.765 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.726 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.740 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:42.607 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:42.602 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.602 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.715 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.611 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.611 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.613 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.777 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 972.1703ms.
2024-12-16 21:21:42.777 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:42.778 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.779 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.780 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.780 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.789 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.790 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.791 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.789 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:42.801 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.782 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.810 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.811 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.812 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.839 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:42.841 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.810 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.813 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:42.839 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.825 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.784 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.784 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.785 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.787 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.787 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.788 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3819.2964ms
2024-12-16 21:21:42.842 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:42.842 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.843 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.844 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.844 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:42.846 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.846 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.847 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.850 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.851 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.851 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.852 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.853 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.855 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.855 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.856 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:42.857 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.857 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:42.858 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.858 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.859 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.866 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:42.867 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.868 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.868 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:42.869 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:42.870 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.860 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.861 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.864 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.865 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.865 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7521.9178ms
2024-12-16 21:21:42.880 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.880 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.881 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.882 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.883 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.896 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.884 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:42.884 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:42.909 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.910 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:42.921 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.934 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.894 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:42.895 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:42.937 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.887 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.887 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.891 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:42.929 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.931 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:42.932 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.935 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.959 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:42.961 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.930 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2787.5703ms
2024-12-16 21:21:42.885 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:42.936 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.937 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:42.972 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.973 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.974 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.972 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.998 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.014 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:42.998 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.974 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:42.997 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:42.977 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:42.988 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.016 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.016 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.035 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:43.016 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.017 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.018 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4838.2765ms
2024-12-16 21:21:43.019 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.033 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:42.886 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:42.938 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.058 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.059 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.894 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.044 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.046 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:43.071 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.045 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.081 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.082 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.048 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.071 +03:30 [INF] Received HTTP response headers after 257.4627ms - 429
2024-12-16 21:21:43.055 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.056 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.057 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.062 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.087 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.087 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:42.949 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.080 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.079 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.082 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:43.047 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.098 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.099 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.128 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:43.117 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:43.131 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.044 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.083 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.083 +03:30 [INF] End processing HTTP request after 303.4236ms - 429
2024-12-16 21:21:43.084 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.150 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.149 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:43.225 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.254 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.149 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.151 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.152 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.252 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:43.178 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.265 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.263 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.266 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.266 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.305 +03:30 [INF] Received HTTP response headers after 286.1954ms - 429
2024-12-16 21:21:43.267 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.285 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:43.085 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.086 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.097 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:42.958 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:43.261 +03:30 [INF] Received HTTP response headers after 262.5518ms - 429
2024-12-16 21:21:43.044 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.097 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.079 +03:30 [INF] Received HTTP response headers after 252.4239ms - 429
2024-12-16 21:21:43.063 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.335 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.335 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 595.2463ms.
2024-12-16 21:21:43.337 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.338 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.339 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.340 +03:30 [INF] End processing HTTP request after 403.7418ms - 429
2024-12-16 21:21:43.341 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.353 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.351 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.452 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.414 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.357 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.358 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:43.451 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:43.452 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:43.454 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.455 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:43.525 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:43.474 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:43.525 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 630.3088ms.
2024-12-16 21:21:43.371 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.352 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:43.536 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.535 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:43.535 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:43.538 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.539 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:43.553 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:43.553 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:43.554 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:43.345 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:43.346 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.347 +03:30 [INF] End processing HTTP request after 385.9622ms - 429
2024-12-16 21:21:43.348 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.343 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.552 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.550 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.550 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:43.551 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.619 +03:30 [INF] Received HTTP response headers after 501.6185ms - 429
2024-12-16 21:21:43.602 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.554 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:43.548 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:43.549 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:43.343 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:43.580 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.344 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.556 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.557 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.561 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.349 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.454 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.350 +03:30 [INF] End processing HTTP request after 560.3378ms - 429
2024-12-16 21:21:43.350 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.653 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.654 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.734 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.749 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.654 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.762 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.780 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.782 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.783 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.655 +03:30 [INF] End processing HTTP request after 638.7975ms - 429
2024-12-16 21:21:43.656 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.690 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.785 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.786 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.783 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.877 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:43.807 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:43.879 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.881 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.935 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.909 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:43.937 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.938 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:43.657 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:43.658 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:43.658 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:43.941 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:43.941 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:43.749 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.878 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.735 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.948 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.661 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.661 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:43.663 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:43.934 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.936 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:43.963 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.881 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:43.982 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:43.933 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 919.296ms.
2024-12-16 21:21:43.938 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.854 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.777 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.991 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:43.992 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:43.991 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:43.993 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:43.993 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.994 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.996 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.939 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1421.4013ms
2024-12-16 21:21:44.004 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.943 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:43.761 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:43.659 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:43.944 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.998 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:43.999 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.999 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.001 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:44.020 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:44.021 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:44.003 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.997 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.005 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2128.2427ms
2024-12-16 21:21:43.940 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.005 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1489.2052ms
2024-12-16 21:21:44.007 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.008 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:44.012 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.946 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.948 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.660 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.949 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:43.962 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:43.653 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:44.019 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.019 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.068 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.020 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.095 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:44.111 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.110 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.021 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:44.001 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.018 +03:30 [INF] Received HTTP response headers after 255.4417ms - 429
2024-12-16 21:21:44.002 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.036 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.023 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.024 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.097 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.027 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.028 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.029 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.113 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.114 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.118 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.145 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:44.120 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:44.121 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:44.121 +03:30 [INF] End processing HTTP request after 467.4923ms - 429
2024-12-16 21:21:44.123 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.160 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:44.158 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:44.255 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:44.254 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.254 +03:30 [INF] Received HTTP response headers after 303.6493ms - 429
2024-12-16 21:21:44.293 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.279 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:44.159 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.291 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.254 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.161 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1349.3375ms
2024-12-16 21:21:44.162 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.301 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.290 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:44.253 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.296 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.294 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.295 +03:30 [INF] End processing HTTP request after 738.5431ms - 429
2024-12-16 21:21:44.296 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.353 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.352 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.375 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.297 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.441 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.441 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:44.457 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.442 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:44.528 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1183.2405ms.
2024-12-16 21:21:44.467 +03:30 [INF] Received HTTP response headers after 337.0783ms - 429
2024-12-16 21:21:44.456 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.299 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.536 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.537 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:44.536 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.538 +03:30 [INF] End processing HTTP request after 597.5638ms - 429
2024-12-16 21:21:44.300 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.557 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.641 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:44.559 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.556 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.641 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.558 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:44.678 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.556 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.693 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.694 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.302 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.589 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.691 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.692 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:44.714 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:44.690 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1032.167ms.
2024-12-16 21:21:44.690 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.301 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.290 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.352 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 801.4869ms.
2024-12-16 21:21:44.329 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.720 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.126 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.127 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.129 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.293 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.142 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2816.8363ms
2024-12-16 21:21:44.144 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.722 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.713 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:44.714 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:44.692 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.715 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:44.750 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.777 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:44.717 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.711 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.712 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.780 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.711 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.777 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:44.751 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:44.775 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:44.776 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:44.778 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.779 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.798 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.718 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2292.4242ms
2024-12-16 21:21:44.719 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.806 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:44.807 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1946.1688ms
2024-12-16 21:21:44.808 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:44.808 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:44.810 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:44.811 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.812 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.806 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:44.720 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:44.828 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:44.828 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:44.829 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:44.829 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:44.830 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:44.724 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.732 +03:30 [INF] Received HTTP response headers after 636.5993ms - 429
2024-12-16 21:21:44.727 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.030 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.823 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.821 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.824 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.824 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:44.825 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.826 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.826 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.820 +03:30 [INF] Received HTTP response headers after 377.3226ms - 429
2024-12-16 21:21:44.827 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:44.820 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.831 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1699.811ms
2024-12-16 21:21:44.721 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.125 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.749 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.722 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.723 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.852 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.851 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3520.4352ms
2024-12-16 21:21:44.852 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.853 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:44.879 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:44.882 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.896 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:44.894 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:44.853 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:44.854 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:44.855 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.856 +03:30 [INF] End processing HTTP request after 559.3955ms - 429
2024-12-16 21:21:44.856 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.900 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1902.6921ms
2024-12-16 21:21:44.900 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.898 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.898 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:44.964 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.901 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:44.904 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.905 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:44.925 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:44.857 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.987 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.987 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.989 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.989 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2372.8239ms
2024-12-16 21:21:44.990 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:44.991 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:44.992 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.986 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:45.004 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.005 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.006 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.007 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.010 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:45.011 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.012 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.012 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.005 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:45.052 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.858 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.859 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.085 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.860 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.086 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.878 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.831 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.088 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.850 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.842 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:44.030 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.031 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.095 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.096 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:44.034 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.076 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.077 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.078 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.124 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.079 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.080 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.080 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.081 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.075 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 796.0244ms.
2024-12-16 21:21:45.083 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.083 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.084 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2242.5486ms
2024-12-16 21:21:45.086 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:44.859 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.087 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:44.878 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.087 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.091 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.147 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:45.143 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:45.142 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.142 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.143 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.193 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.194 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.144 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.145 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.146 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.193 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:45.147 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.148 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.150 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:45.151 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.152 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.153 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.154 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.184 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.192 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:44.832 +03:30 [INF] End processing HTTP request after 813.1803ms - 429
2024-12-16 21:21:45.093 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.218 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.218 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.216 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.361 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.217 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.219 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.220 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.221 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.222 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:45.224 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.225 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.227 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.228 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.229 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.229 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.373 +03:30 [INF] Received HTTP response headers after 380.4506ms - 429
2024-12-16 21:21:45.374 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.373 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.375 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.375 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.404 +03:30 [INF] End processing HTTP request after 547.6202ms - 429
2024-12-16 21:21:45.405 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.405 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.474 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.423 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.423 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.376 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.377 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.377 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:45.512 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:45.513 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:45.379 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.380 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.403 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.403 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.230 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.231 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.232 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.360 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:45.261 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.521 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.522 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.507 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:45.508 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.508 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.509 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.510 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.511 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.512 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.514 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1734.1758ms
2024-12-16 21:21:45.378 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.379 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.627 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 800.3517ms.
2024-12-16 21:21:45.627 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.628 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.629 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.630 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.631 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.651 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:45.652 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.653 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.654 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.631 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.632 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.650 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.650 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.519 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.520 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.521 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.550 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.575 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.522 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.523 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.574 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1575.6873ms.
2024-12-16 21:21:45.526 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.094 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.094 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.115 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.666 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:45.667 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.667 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.669 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.664 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.665 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.670 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.670 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2654.4441ms
2024-12-16 21:21:45.671 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.702 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:45.704 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.704 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.705 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.706 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:45.707 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.707 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.672 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.673 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:45.673 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.674 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.720 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:45.721 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.722 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.722 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.723 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.724 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.724 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.746 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:45.747 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.748 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.749 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.750 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.717 +03:30 [INF] Received HTTP response headers after 834.4231ms - 429
2024-12-16 21:21:45.760 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:45.761 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.779 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1840.92ms
2024-12-16 21:21:45.762 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.763 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.759 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.759 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.777 +03:30 [INF] End processing HTTP request after 953.3985ms - 429
2024-12-16 21:21:45.788 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.787 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.838 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2794.3134ms
2024-12-16 21:21:45.788 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.789 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.786 +03:30 [INF] Received HTTP response headers after 473.0402ms - 429
2024-12-16 21:21:45.790 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:45.799 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.719 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:45.725 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.745 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.745 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.895 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.895 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.896 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.897 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.679 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:45.885 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:45.883 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.886 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:45.907 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.887 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:45.888 +03:30 [INF] End processing HTTP request after 694.3844ms - 429
2024-12-16 21:21:45.889 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.918 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:45.917 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.917 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:45.919 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:45.941 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.891 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.004 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.006 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.020 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.006 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.021 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.007 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.004 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:46.021 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.038 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.039 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.039 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.091 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.040 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.088 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 945.7046ms.
2024-12-16 21:21:46.089 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.019 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:45.883 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:45.891 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.104 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.103 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.104 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.105 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.157 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.158 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.106 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:46.107 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.107 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.156 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1348.2746ms.
2024-12-16 21:21:46.168 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.170 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.167 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.167 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.171 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.172 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.145 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.893 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:45.894 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:45.906 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.746 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.193 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.678 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.195 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.906 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:45.680 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:45.681 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.201 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.702 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:45.694 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:44.032 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:44.033 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.204 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:44.054 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.186 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.187 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.188 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.188 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.189 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:46.214 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.215 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.215 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.225 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.224 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.224 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:46.190 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.185 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.244 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.243 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.243 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.244 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.264 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.266 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.279 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.245 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:46.263 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.264 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.284 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.284 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.191 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.192 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.192 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.194 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:45.675 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.198 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:45.678 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.199 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.200 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.201 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:45.682 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.202 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.203 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.204 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.213 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:45.107 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.280 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.281 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.280 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.281 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.282 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:46.316 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.334 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.335 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.335 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.283 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.285 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.185 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:46.336 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.316 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.318 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.333 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:46.333 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1511.5967ms
2024-12-16 21:21:46.337 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.190 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.286 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.364 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.365 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.365 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.366 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.367 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.367 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.291 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.358 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.359 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.360 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.361 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.362 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.362 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.355 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.356 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.391 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:46.377 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.286 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.393 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.394 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.395 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.289 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.290 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.377 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.398 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.295 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.400 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.296 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.297 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.315 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.307 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.315 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.214 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.405 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.386 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.387 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.418 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.419 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.389 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2134.556ms
2024-12-16 21:21:46.390 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.417 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.419 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.387 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.388 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:46.391 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.392 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:46.435 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:46.435 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:46.396 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.287 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.287 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.288 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.397 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.397 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.399 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.294 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:46.401 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.296 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.404 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.416 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.407 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.407 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.416 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.409 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:44.034 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:44.094 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1162.8843ms.
2024-12-16 21:21:43.664 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:43.665 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:43.666 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:43.760 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:43.679 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.443 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.433 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.431 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.432 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.434 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.431 +03:30 [INF] Received HTTP response headers after 339.2694ms - 429
2024-12-16 21:21:46.431 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.434 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.440 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2147.2465ms
2024-12-16 21:21:46.363 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.556 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.441 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.441 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.442 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.547 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.550 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.547 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.597 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.550 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.551 +03:30 [INF] End processing HTTP request after 530.1512ms - 429
2024-12-16 21:21:46.603 +03:30 [INF] Received HTTP response headers after 595.1765ms - 429
2024-12-16 21:21:46.604 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.661 +03:30 [INF] End processing HTTP request after 772.3049ms - 429
2024-12-16 21:21:46.604 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.622 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:46.702 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.732 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.775 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:46.702 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:46.552 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.787 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.786 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:46.786 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.838 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.788 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.837 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 831.1591ms.
2024-12-16 21:21:46.825 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.552 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.555 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.558 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.392 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.562 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.584 +03:30 [INF] Received HTTP response headers after 410.649ms - 429
2024-12-16 21:21:46.574 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.510 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.444 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.444 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.445 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.446 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:46.446 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.447 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.448 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.449 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.453 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.454 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.455 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:46.896 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.886 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1095.6177ms.
2024-12-16 21:21:46.885 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.886 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.887 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.888 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:46.889 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.891 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.892 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3109.2505ms
2024-12-16 21:21:46.893 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.927 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:46.927 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.928 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.944 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.953 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:46.954 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:46.933 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.933 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.941 +03:30 [INF] Received HTTP response headers after 674.8156ms - 429
2024-12-16 21:21:46.942 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.893 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.894 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.960 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.961 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.961 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.962 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.963 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.899 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.899 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:46.965 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:46.900 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.901 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:46.967 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.968 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.969 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.909 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.456 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.457 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.458 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:46.975 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.459 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.460 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.524 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3746.5112ms.
2024-12-16 21:21:46.480 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.952 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.954 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:46.953 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.930 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:46.932 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.955 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.957 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:47.000 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:47.001 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.959 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.963 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.997 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:46.995 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:47.022 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1877.3811ms
2024-12-16 21:21:46.997 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.998 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:47.031 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:46.999 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.002 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:46.958 +03:30 [INF] End processing HTTP request after 742.5439ms - 429
2024-12-16 21:21:46.959 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.030 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.029 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.096 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2805.4525ms
2024-12-16 21:21:47.031 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.117 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.032 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:47.126 +03:30 [INF] Received HTTP response headers after 541.6019ms - 429
2024-12-16 21:21:47.126 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.138 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:46.999 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:47.033 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:47.147 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.148 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.149 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.029 +03:30 [INF] Received HTTP response headers after 709.3952ms - 429
2024-12-16 21:21:47.022 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:46.894 +03:30 [INF] End processing HTTP request after 875.4306ms - 429
2024-12-16 21:21:46.895 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.145 +03:30 [INF] End processing HTTP request after 713.1928ms - 429
2024-12-16 21:21:47.144 +03:30 [INF] Received HTTP response headers after 582.3125ms - 429
2024-12-16 21:21:47.145 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.280 +03:30 [INF] End processing HTTP request after 993.0229ms - 429
2024-12-16 21:21:47.146 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.327 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.327 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:47.419 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.460 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.472 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1055.2753ms.
2024-12-16 21:21:47.512 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.373 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.147 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:47.150 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.034 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:47.525 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:47.524 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1331.5109ms.
2024-12-16 21:21:47.526 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.526 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.527 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:47.117 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.054 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:47.540 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:47.537 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:47.538 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:47.539 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.539 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:47.594 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:47.596 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:47.592 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1940.2349ms
2024-12-16 21:21:47.536 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:47.536 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.591 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1403.6407ms.
2024-12-16 21:21:47.566 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.150 +03:30 [INF] End processing HTTP request after 871.4591ms - 429
2024-12-16 21:21:47.151 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:47.607 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:47.611 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:47.666 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:47.696 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:47.606 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:47.607 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.612 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.613 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:47.614 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:47.615 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:47.616 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.726 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.628 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.747 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.745 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:47.745 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:47.746 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:47.747 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2864.9025ms
2024-12-16 21:21:47.748 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.803 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1538.5362ms
2024-12-16 21:21:47.804 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:47.804 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.802 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.749 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.816 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.752 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.818 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.766 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.814 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.814 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2434.1326ms
2024-12-16 21:21:47.842 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 1956.4256ms
2024-12-16 21:21:47.815 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.816 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.852 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:47.849 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.865 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:47.813 +03:30 [INF] Received HTTP response headers after 905.3392ms - 429
2024-12-16 21:21:47.813 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.817 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:47.875 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.876 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4185.5935ms
2024-12-16 21:21:47.878 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.873 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:47.879 +03:30 [INF] End processing HTTP request after 1471.8778ms - 429
2024-12-16 21:21:47.750 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:47.893 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.895 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:47.973 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.895 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.896 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:47.892 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:47.892 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:47.908 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:47.986 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:47.986 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.987 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:47.988 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:47.985 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.989 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.016 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:48.016 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.017 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:48.017 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.067 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:48.067 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.098 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.099 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:48.085 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:48.106 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:48.105 +03:30 [INF] Received HTTP response headers after 276.6275ms - 429
2024-12-16 21:21:48.065 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1758.6064ms.
2024-12-16 21:21:48.042 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:47.998 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:47.998 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:47.828 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:47.802 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1557.3858ms.
2024-12-16 21:21:47.849 +03:30 [INF] Received HTTP response headers after 846.6977ms - 429
2024-12-16 21:21:47.256 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:47.171 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.132 +03:30 [INF] End processing HTTP request after 1239.2994ms - 429
2024-12-16 21:21:48.125 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:48.123 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:48.240 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:48.124 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:48.126 +03:30 [INF] End processing HTTP request after 497.3219ms - 429
2024-12-16 21:21:48.127 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.265 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:48.264 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:48.265 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.331 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.128 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.128 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:48.129 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:48.356 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:48.132 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.262 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:48.200 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2309.7174ms.
2024-12-16 21:21:48.352 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:48.353 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.408 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:48.409 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:48.354 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:48.355 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:48.355 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.412 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:48.408 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:48.411 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:48.354 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:48.352 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:48.422 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.431 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.432 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:48.494 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.433 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:48.493 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1341.7026ms.
2024-12-16 21:21:48.430 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:48.430 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:48.358 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2609.7673ms
2024-12-16 21:21:48.129 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:48.359 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.508 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:48.508 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:48.508 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:48.509 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:46.897 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.898 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.964 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.966 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3312.4513ms
2024-12-16 21:21:46.900 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.967 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:46.972 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.502 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.501 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:48.502 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:48.504 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.505 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:48.506 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:48.501 +03:30 [INF] Received HTTP response headers after 648.3123ms - 429
2024-12-16 21:21:48.507 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.507 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.510 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2720.693ms
2024-12-16 21:21:48.407 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2014.271ms.
2024-12-16 21:21:48.384 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.158 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:46.920 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.511 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:48.512 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:48.513 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.514 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.515 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.902 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.907 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:46.926 +03:30 [INF] Received HTTP response headers after 1162.1025ms - 429
2024-12-16 21:21:46.972 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:46.973 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:48.541 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.535 +03:30 [INF] End processing HTTP request after 731.3196ms - 429
2024-12-16 21:21:48.528 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:48.529 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:48.609 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.662 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.530 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:48.532 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.533 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5500.6078ms
2024-12-16 21:21:48.534 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.536 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3638.4659ms
2024-12-16 21:21:48.537 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.673 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.674 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.693 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.675 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:48.675 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:48.697 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:48.697 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:48.673 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:48.682 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:48.695 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.695 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.696 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:48.698 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:48.676 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.678 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:48.748 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1002.009ms.
2024-12-16 21:21:48.748 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.694 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:48.537 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.538 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.768 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.540 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:48.571 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.542 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.756 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:48.757 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:48.786 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.786 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.787 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.788 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.765 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:48.785 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:48.758 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.758 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2197.0985ms
2024-12-16 21:21:48.761 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6432.9553ms
2024-12-16 21:21:48.763 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:48.805 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.820 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.806 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.802 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:48.842 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:48.808 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.819 +03:30 [INF] Received HTTP response headers after 733.8707ms - 429
2024-12-16 21:21:48.820 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:48.805 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.857 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:48.767 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.860 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.861 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:48.861 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:48.771 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.852 +03:30 [INF] Received HTTP response headers after 301.5979ms - 429
2024-12-16 21:21:48.853 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:48.854 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:48.855 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3704.9169ms
2024-12-16 21:21:48.856 +03:30 [INF] End processing HTTP request after 867.7426ms - 429
2024-12-16 21:21:48.856 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:48.888 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.886 +03:30 [INF] End processing HTTP request after 1977.8008ms - 429
2024-12-16 21:21:48.887 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.964 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.027 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:48.892 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:49.071 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.071 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.093 +03:30 [INF] Received HTTP response headers after 412.0061ms - 429
2024-12-16 21:21:49.119 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.093 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.142 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2687.6611ms.
2024-12-16 21:21:49.143 +03:30 [INF] End processing HTTP request after 635.7768ms - 429
2024-12-16 21:21:48.986 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.154 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:49.288 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.152 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:49.153 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.302 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:49.300 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1404.2774ms.
2024-12-16 21:21:48.930 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:48.858 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:48.765 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:48.885 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:48.767 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3757.1006ms
2024-12-16 21:21:48.769 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:49.359 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:49.356 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:49.354 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1224.3348ms.
2024-12-16 21:21:49.354 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:49.355 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.358 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:49.360 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:49.361 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.362 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:49.365 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:48.539 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:48.886 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.782 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:48.783 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.543 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.546 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.547 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5503.0909ms
2024-12-16 21:21:48.548 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.379 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:49.375 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:49.376 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:49.376 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:49.377 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:49.378 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:49.402 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:49.400 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:49.402 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:49.413 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:49.423 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:49.422 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:49.442 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6384.5119ms
2024-12-16 21:21:49.422 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:49.439 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:49.374 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:49.400 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2369.3255ms
2024-12-16 21:21:49.380 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:49.380 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.452 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:49.449 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.448 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:49.447 +03:30 [INF] Received HTTP response headers after 375.6013ms - 429
2024-12-16 21:21:49.450 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:49.453 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:49.453 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.373 +03:30 [INF] Received HTTP response headers after 915.9313ms - 429
2024-12-16 21:21:49.381 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:49.381 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:49.382 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.383 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:49.386 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.387 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:49.388 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.399 +03:30 [INF] Received HTTP response headers after 576.3345ms - 429
2024-12-16 21:21:49.392 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:48.526 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:48.527 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:48.548 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:48.549 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:48.550 +03:30 [INF] End processing HTTP request after 2827.0994ms - 429
2024-12-16 21:21:48.607 +03:30 [INF] Received HTTP response headers after 727.809ms - 429
2024-12-16 21:21:48.579 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:49.485 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:49.477 +03:30 [INF] End processing HTTP request after 590.2011ms - 429
2024-12-16 21:21:49.478 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.475 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:49.476 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7984.2658ms
2024-12-16 21:21:49.476 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:49.672 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:49.600 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:49.632 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2486.2964ms
2024-12-16 21:21:49.479 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.479 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3199.2549ms
2024-12-16 21:21:49.473 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:49.674 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.672 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:49.668 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.675 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:49.689 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.691 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2797.9713ms
2024-12-16 21:21:49.730 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:49.676 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.677 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:49.688 +03:30 [INF] Received HTTP response headers after 262.7217ms - 429
2024-12-16 21:21:49.688 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:49.473 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:49.480 +03:30 [INF] End processing HTTP request after 1125.078ms - 429
2024-12-16 21:21:49.483 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:49.742 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.743 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.815 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:49.741 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 888.6484ms.
2024-12-16 21:21:49.842 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4836.3585ms
2024-12-16 21:21:49.744 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:49.745 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3411.4572ms
2024-12-16 21:21:49.746 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.747 +03:30 [INF] End processing HTTP request after 370.4433ms - 429
2024-12-16 21:21:49.747 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.867 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:49.861 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:49.864 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:49.862 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:49.864 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:49.945 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.869 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.888 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:49.748 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:49.978 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:49.979 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:49.980 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:49.484 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.536 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:49.964 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:49.969 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.005 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.971 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:49.973 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:49.974 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.975 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:49.961 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.977 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.009 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.007 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.009 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:50.083 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:50.083 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:50.014 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.062 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.078 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.081 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.085 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:50.010 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.013 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.076 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 735.1638ms.
2024-12-16 21:21:49.982 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:49.841 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.771 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3580.0591ms
2024-12-16 21:21:50.100 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.100 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.103 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1442.0371ms
2024-12-16 21:21:50.158 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.104 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.106 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.098 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.177 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.176 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.175 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.175 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.107 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:50.099 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.108 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.157 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2028.5278ms.
2024-12-16 21:21:50.132 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:49.483 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:49.993 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.007 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:49.486 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.486 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.196 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.198 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.199 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2304.1744ms
2024-12-16 21:21:50.195 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.195 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.195 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.200 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:50.201 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.202 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.203 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:50.203 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5913.0291ms
2024-12-16 21:21:50.204 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:50.204 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.206 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:49.487 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.488 +03:30 [INF] End processing HTTP request after 683.0139ms - 429
2024-12-16 21:21:50.239 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.216 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.216 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.303 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.218 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.219 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.330 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.220 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.221 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:50.222 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.222 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.224 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:50.228 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.228 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:50.229 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.230 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.214 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.215 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.249 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:49.489 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.341 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.491 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.327 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.351 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.351 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.352 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.353 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.333 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.333 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:50.353 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.326 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.329 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.332 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.377 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.367 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.375 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.375 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.376 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.388 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.365 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:50.334 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.335 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.335 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:50.392 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:50.392 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:50.393 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:50.338 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.339 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.340 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.340 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.396 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.350 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.387 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.388 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.410 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.389 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.385 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.413 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.412 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.430 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.443 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.430 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.220 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.386 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.390 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:50.391 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.391 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.394 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3391.7275ms
2024-12-16 21:21:50.336 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.450 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.338 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.394 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.395 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.443 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.445 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.444 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.445 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.485 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.447 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.483 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.484 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.485 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.446 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.498 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.447 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1689.6519ms
2024-12-16 21:21:50.448 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.449 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.449 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.453 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.337 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5115.9266ms
2024-12-16 21:21:50.483 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.481 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.473 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.395 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.498 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.499 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.500 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.498 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.500 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.501 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.502 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.522 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.523 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.524 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.525 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.526 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.502 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.503 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.504 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4318.7463ms
2024-12-16 21:21:50.506 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.543 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.545 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.546 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.547 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.547 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.548 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.576 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.544 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2678.5852ms
2024-12-16 21:21:50.549 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.550 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.559 +03:30 [INF] Received HTTP response headers after 566.2859ms - 429
2024-12-16 21:21:50.594 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.594 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.595 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.596 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.597 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.598 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.600 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.601 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.575 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.507 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.508 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.509 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.522 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.521 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.411 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:50.326 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:50.409 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.609 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.612 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.613 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.613 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.680 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.615 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.616 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.617 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.618 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.666 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.610 +03:30 [INF] End processing HTTP request after 1124.9537ms - 429
2024-12-16 21:21:50.619 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.619 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6364.945ms
2024-12-16 21:21:50.704 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.678 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.679 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.681 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.614 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.682 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.776 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.777 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.778 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.797 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.808 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.809 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.683 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.683 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.684 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.685 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.809 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.807 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.807 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.795 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.796 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.810 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.812 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.775 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:50.776 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.822 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.823 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.823 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.824 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.825 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.826 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:50.826 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:50.821 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.876 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.877 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.878 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.880 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.880 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.881 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:50.821 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.875 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1491.8117ms.
2024-12-16 21:21:50.901 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.901 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.902 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.925 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.937 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.903 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:50.903 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.904 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.899 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:50.900 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.924 +03:30 [INF] Received HTTP response headers after 470.3911ms - 429
2024-12-16 21:21:50.917 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:50.863 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.953 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.620 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.620 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.622 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.956 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.957 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.678 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1893.0446ms.
2024-12-16 21:21:50.629 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:49.490 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:50.350 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.963 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.963 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:49.580 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.504 +03:30 [INF] End processing HTTP request after 1756.2919ms - 429
2024-12-16 21:21:49.492 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.950 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:50.946 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.946 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:50.944 +03:30 [INF] Received HTTP response headers after 434.908ms - 429
2024-12-16 21:21:51.094 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:50.947 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.948 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.949 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:51.031 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:50.950 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.951 +03:30 [INF] End processing HTTP request after 721.8533ms - 429
2024-12-16 21:21:50.952 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:51.108 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.110 +03:30 [INF] End processing HTTP request after 715.3843ms - 429
2024-12-16 21:21:51.200 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.113 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:51.297 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:51.115 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:51.116 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.326 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:51.326 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.120 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.323 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.322 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:51.360 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:51.322 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.422 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.338 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:51.421 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:51.420 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1081.1662ms.
2024-12-16 21:21:51.324 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:51.435 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:51.117 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:51.117 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:51.367 +03:30 [INF] Received HTTP response headers after 1013.359ms - 429
2024-12-16 21:21:51.225 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:51.132 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:51.442 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.443 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:51.442 +03:30 [INF] Received HTTP response headers after 1011.1012ms - 429
2024-12-16 21:21:51.444 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:51.444 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.445 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:51.446 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:51.447 +03:30 [INF] End processing HTTP request after 1226.3557ms - 429
2024-12-16 21:21:51.461 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:51.498 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.499 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:51.500 +03:30 [INF] End processing HTTP request after 1090.2553ms - 429
2024-12-16 21:21:51.604 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:51.501 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:51.615 +03:30 [INF] Received HTTP response headers after 1129.3647ms - 429
2024-12-16 21:21:51.632 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:51.655 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:51.501 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:51.502 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:51.699 +03:30 [INF] End processing HTTP request after 1253.8953ms - 429
2024-12-16 21:21:51.700 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:51.699 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:51.774 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:51.808 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:51.701 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:51.863 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5466.4557ms
2024-12-16 21:21:51.863 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1475.8491ms.
2024-12-16 21:21:51.891 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:51.721 +03:30 [INF] Received HTTP response headers after 796.137ms - 429
2024-12-16 21:21:51.714 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.503 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:51.604 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:51.497 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1292.9963ms.
2024-12-16 21:21:51.920 +03:30 [INF] End processing HTTP request after 1043.4892ms - 429
2024-12-16 21:21:51.917 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1486.2653ms.
2024-12-16 21:21:51.917 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.030 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:51.918 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:51.919 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:52.069 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:52.070 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:52.070 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:51.951 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.072 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:50.954 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:52.074 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:52.075 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:50.955 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:52.077 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:50.622 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:50.626 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:52.067 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.066 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 8288.9009ms
2024-12-16 21:21:52.068 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.089 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.071 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:52.066 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.098 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.098 +03:30 [INF] Received HTTP response headers after 1192.759ms - 429
2024-12-16 21:21:52.133 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.098 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.107 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:51.921 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:51.922 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:51.975 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1779.9738ms.
2024-12-16 21:21:52.073 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:51.526 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.076 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:50.775 +03:30 [INF] Received HTTP response headers after 378.9237ms - 429
2024-12-16 21:21:50.955 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.078 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:50.957 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:52.088 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:52.160 +03:30 [INF] End processing HTTP request after 1475.0265ms - 429
2024-12-16 21:21:52.160 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.161 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.225 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2215.2909ms
2024-12-16 21:21:52.246 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.161 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:52.159 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1336.8006ms.
2024-12-16 21:21:52.162 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:52.163 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:52.164 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.164 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.165 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.166 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:52.166 +03:30 [INF] End processing HTTP request after 1825.9483ms - 429
2024-12-16 21:21:52.167 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:52.274 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6599.3796ms
2024-12-16 21:21:52.268 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.267 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.332 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3439.6451ms
2024-12-16 21:21:52.269 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.430 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1764.3294ms.
2024-12-16 21:21:52.269 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:52.270 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.271 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:52.271 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:52.439 +03:30 [INF] Received HTTP response headers after 1100.7814ms - 429
2024-12-16 21:21:52.441 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.440 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2224.2658ms
2024-12-16 21:21:52.441 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:52.443 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.453 +03:30 [INF] End processing HTTP request after 1502.6943ms - 429
2024-12-16 21:21:52.454 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.455 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.494 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.523 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2851.0376ms
2024-12-16 21:21:52.474 +03:30 [INF] Received HTTP response headers after 1051.4852ms - 429
2024-12-16 21:21:52.556 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.556 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.564 +03:30 [INF] Received HTTP response headers after 995.6882ms - 429
2024-12-16 21:21:52.590 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.565 +03:30 [INF] End processing HTTP request after 1242.5428ms - 429
2024-12-16 21:21:52.467 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.451 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:52.613 +03:30 [INF] End processing HTTP request after 1171.0649ms - 429
2024-12-16 21:21:52.633 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.695 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.613 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1713.1009ms.
2024-12-16 21:21:52.614 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.777 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.705 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.824 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2716.255ms
2024-12-16 21:21:52.823 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.822 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1709.3844ms.
2024-12-16 21:21:52.851 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.654 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:52.452 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:52.273 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.273 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.311 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.275 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:52.379 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:52.330 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:52.874 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.877 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.874 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1453.2036ms.
2024-12-16 21:21:52.877 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.879 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2395.1503ms
2024-12-16 21:21:52.880 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:52.880 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:52.881 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.937 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.938 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.939 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.909 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:52.168 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:52.941 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:52.941 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:52.089 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:50.961 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:50.961 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:50.962 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:52.933 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.932 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4238.0921ms
2024-12-16 21:21:52.962 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:52.934 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:52.935 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.936 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.936 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:52.937 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:52.977 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.977 +03:30 [INF] Received HTTP response headers after 521.2095ms - 429
2024-12-16 21:21:52.993 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.978 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:52.979 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:52.979 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3115.6498ms
2024-12-16 21:21:52.991 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:52.939 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3565.1172ms
2024-12-16 21:21:52.882 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:52.882 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 8885.9808ms
2024-12-16 21:21:52.883 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:52.932 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2682.3774ms.
2024-12-16 21:21:52.940 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.942 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:52.186 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:52.178 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:52.943 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:52.944 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.011 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.011 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:50.964 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:50.996 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:49.493 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.016 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:51.107 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:49.515 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.014 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:52.995 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:52.996 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2661.724ms
2024-12-16 21:21:52.995 +03:30 [INF] End processing HTTP request after 725.4803ms - 429
2024-12-16 21:21:52.996 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.070 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.090 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.133 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4450.5547ms
2024-12-16 21:21:52.996 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.069 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:53.001 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.002 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.003 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6107.8258ms
2024-12-16 21:21:53.006 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.007 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.007 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.008 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.009 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.010 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.010 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:53.045 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.154 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.154 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:53.157 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.187 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.213 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.157 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:53.158 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.159 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5266.6135ms
2024-12-16 21:21:53.160 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.160 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.162 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.163 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.166 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.166 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.167 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.184 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:53.240 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1078.2576ms.
2024-12-16 21:21:53.241 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2364.3504ms
2024-12-16 21:21:53.241 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2560.6215ms
2024-12-16 21:21:53.242 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.245 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.248 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 9211.7454ms
2024-12-16 21:21:53.249 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.249 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.250 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.251 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.252 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.177 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4746.238ms
2024-12-16 21:21:52.969 +03:30 [INF] Received HTTP response headers after 1268.0196ms - 429
2024-12-16 21:21:52.961 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.015 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.267 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.268 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.269 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.269 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:53.270 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.302 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.303 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2859.7057ms
2024-12-16 21:21:53.304 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3085.4396ms
2024-12-16 21:21:53.323 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:53.273 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.273 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.333 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.338 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.332 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.274 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:53.350 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:53.278 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.266 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.279 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.280 +03:30 [INF] End processing HTTP request after 1835.3707ms - 429
2024-12-16 21:21:53.300 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.349 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.349 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.348 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.438 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:53.405 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.438 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.393 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.464 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.348 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.489 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.490 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.503 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.348 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.351 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.277 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.508 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.352 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.353 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5501.1338ms
2024-12-16 21:21:53.489 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2053.818ms.
2024-12-16 21:21:53.365 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.016 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.017 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:51.041 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5335.2459ms.
2024-12-16 21:21:53.068 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5454.7737ms.
2024-12-16 21:21:53.021 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:46.974 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:46.975 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.519 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:46.976 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:46.976 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:46.977 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.509 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.504 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1851.082ms
2024-12-16 21:21:53.541 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.506 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.507 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.507 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.352 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.509 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.514 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.514 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.515 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.516 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.516 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.517 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:53.518 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.519 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.520 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:46.458 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:53.521 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.540 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.542 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3043.5157ms
2024-12-16 21:21:53.505 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.542 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.543 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7144.0958ms
2024-12-16 21:21:53.588 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:53.602 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.544 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.585 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.545 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:53.548 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.549 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.549 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.550 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.603 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:53.603 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 9309.9893ms
2024-12-16 21:21:53.604 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.605 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.606 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:53.607 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.607 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.619 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.551 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.552 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.554 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:53.555 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.555 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.556 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.576 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:53.567 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.539 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:53.532 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:46.995 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:47.745 +03:30 [INF] Received HTTP response headers after 618.5561ms - 429
2024-12-16 21:21:53.622 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.624 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.625 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.626 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.627 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:53.628 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.629 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.629 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.630 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.630 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.631 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.632 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.633 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 10854.6647ms
2024-12-16 21:21:53.634 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.634 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.636 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.636 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:53.637 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:53.638 +03:30 [INF] End processing HTTP request after 6608.5114ms - 429
2024-12-16 21:21:53.642 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.643 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.644 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.687 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.699 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.765 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.645 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.646 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:53.647 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.647 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.648 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.769 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.768 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.769 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.771 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.772 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.649 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.649 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.650 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:53.651 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.653 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.654 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.655 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.656 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.785 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2988.6423ms
2024-12-16 21:21:53.782 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.782 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.783 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.801 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.784 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.800 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.780 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.781 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.785 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.787 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.788 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:53.788 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.818 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.819 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.820 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.821 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.656 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:53.811 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.812 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.811 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.814 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.814 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 3947.4091ms
2024-12-16 21:21:53.815 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.815 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.816 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.817 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.818 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:53.789 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 11566.2988ms
2024-12-16 21:21:53.790 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.799 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.792 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.822 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.657 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.764 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:53.830 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.835 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.831 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.832 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.830 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.833 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.874 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.835 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.905 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.906 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.922 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.907 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.908 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:53.920 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.836 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 8825.3784ms
2024-12-16 21:21:53.837 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6904.1673ms
2024-12-16 21:21:53.838 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.849 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.842 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.843 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.844 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.844 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:53.845 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:53.897 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 6901.7126ms.
2024-12-16 21:21:53.923 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.924 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.924 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:53.949 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.925 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.951 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.963 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.972 +03:30 [INF] Received HTTP response headers after 1024.7548ms - 429
2024-12-16 21:21:53.926 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:53.927 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.927 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:53.980 +03:30 [INF] End processing HTTP request after 3350.3317ms - 429
2024-12-16 21:21:53.979 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:53.979 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:54.000 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:54.020 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:54.031 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.989 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:54.083 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:53.988 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 9872.0374ms
2024-12-16 21:21:53.989 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 7968.6174ms
2024-12-16 21:21:54.082 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.064 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.082 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:54.084 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.094 +03:30 [INF] Received HTTP response headers after 1114.0392ms - 429
2024-12-16 21:21:54.129 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.128 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:54.164 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 3754.9258ms.
2024-12-16 21:21:54.165 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.178 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.186 +03:30 [INF] Received HTTP response headers after 695.3131ms - 429
2024-12-16 21:21:54.180 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.140 +03:30 [INF] End processing HTTP request after 1260.2243ms - 429
2024-12-16 21:21:54.193 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:54.194 +03:30 [INF] End processing HTTP request after 789.2684ms - 429
2024-12-16 21:21:54.193 +03:30 [INF] Received HTTP response headers after 912.275ms - 429
2024-12-16 21:21:54.102 +03:30 [INF] Received HTTP response headers after 849.0613ms - 429
2024-12-16 21:21:54.208 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:54.227 +03:30 [INF] End processing HTTP request after 3265.1011ms - 429
2024-12-16 21:21:54.261 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:54.243 +03:30 [INF] End processing HTTP request after 1233.7748ms - 429
2024-12-16 21:21:54.291 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:53.928 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:53.929 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.332 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:54.338 +03:30 [INF] Received HTTP response headers after 749.8797ms - 429
2024-12-16 21:21:54.346 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:54.359 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.456 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.400 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7999.777ms
2024-12-16 21:21:54.411 +03:30 [INF] End processing HTTP request after 905.4564ms - 429
2024-12-16 21:21:54.513 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:54.421 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.535 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.558 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 10797.5755ms
2024-12-16 21:21:54.599 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1248.9822ms.
2024-12-16 21:21:54.631 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.691 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2037.3563ms.
2024-12-16 21:21:54.725 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.724 +03:30 [INF] Received HTTP response headers after 1116.6567ms - 429
2024-12-16 21:21:54.805 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:54.759 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.773 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.816 +03:30 [INF] End processing HTTP request after 1302.3566ms - 429
2024-12-16 21:21:54.817 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:54.865 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1362.6691ms.
2024-12-16 21:21:54.867 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:54.895 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.904 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:54.938 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:54.816 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 5326.3727ms.
2024-12-16 21:21:54.841 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:54.748 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2569.3131ms.
2024-12-16 21:21:54.432 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:54.804 +03:30 [INF] Received HTTP response headers after 895.8276ms - 429
2024-12-16 21:21:53.930 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.930 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:53.931 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:53.934 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 11500.0503ms
2024-12-16 21:21:53.935 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:53.935 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.950 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:54.950 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:54.951 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:54.976 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2523.7421ms
2024-12-16 21:21:54.988 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:54.952 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.952 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:54.953 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:54.954 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:54.954 +03:30 [INF] End processing HTTP request after 1119.8131ms - 429
2024-12-16 21:21:54.955 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:55.011 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.011 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.047 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.010 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1645.7944ms.
2024-12-16 21:21:55.067 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4466.6458ms
2024-12-16 21:21:55.078 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3002.5289ms
2024-12-16 21:21:55.111 +03:30 [INF] Received HTTP response headers after 1158.5973ms - 429
2024-12-16 21:21:55.013 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.014 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.015 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.016 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:55.100 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.027 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:55.100 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:55.111 +03:30 [INF] End processing HTTP request after 1187.6469ms - 429
2024-12-16 21:21:55.111 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.166 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.178 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 4950.2406ms
2024-12-16 21:21:55.112 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.201 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.255 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.112 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.272 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.281 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.113 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.113 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:55.165 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1350.3786ms.
2024-12-16 21:21:55.128 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:54.956 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:54.957 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:55.282 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.281 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.304 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.281 +03:30 [INF] Received HTTP response headers after 1560.2843ms - 429
2024-12-16 21:21:55.341 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 8369.5392ms
2024-12-16 21:21:55.343 +03:30 [INF] End processing HTTP request after 1718.6357ms - 429
2024-12-16 21:21:55.283 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.375 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.375 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1452.6824ms.
2024-12-16 21:21:55.408 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 11659.1802ms
2024-12-16 21:21:55.431 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:55.465 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.387 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 11357.4375ms
2024-12-16 21:21:55.475 +03:30 [INF] Received HTTP response headers after 1310.8982ms - 429
2024-12-16 21:21:55.475 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.490 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.282 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.283 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.284 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:55.286 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:55.527 +03:30 [INF] End processing HTTP request after 1443.5168ms - 429
2024-12-16 21:21:55.528 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.527 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1922.5082ms.
2024-12-16 21:21:55.543 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.565 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:55.585 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.611 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.528 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 12689.618ms
2024-12-16 21:21:55.529 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4580.3354ms
2024-12-16 21:21:55.635 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.635 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.635 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.660 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2018.6574ms
2024-12-16 21:21:55.673 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.645 +03:30 [INF] Received HTTP response headers after 1709.2697ms - 429
2024-12-16 21:21:55.645 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.530 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.540 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:55.540 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.287 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:55.311 +03:30 [INF] Received HTTP response headers after 1195.8131ms - 429
2024-12-16 21:21:55.300 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:54.957 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:54.958 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:54.961 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.699 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1616.2507ms.
2024-12-16 21:21:55.699 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.700 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.712 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.702 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5335.4331ms
2024-12-16 21:21:55.703 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.710 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:55.711 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2716.572ms
2024-12-16 21:21:55.713 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2770.4538ms
2024-12-16 21:21:55.724 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:55.700 +03:30 [INF] End processing HTTP request after 1794.346ms - 429
2024-12-16 21:21:55.723 +03:30 [INF] Received HTTP response headers after 1528.0447ms - 429
2024-12-16 21:21:55.734 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.732 +03:30 [INF] Received HTTP response headers after 1276.2585ms - 429
2024-12-16 21:21:55.754 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:55.764 +03:30 [INF] End processing HTTP request after 1835.5596ms - 429
2024-12-16 21:21:55.785 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:55.732 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.841 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:55.850 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 5842.9008ms
2024-12-16 21:21:55.885 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2334.0016ms
2024-12-16 21:21:55.907 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.830 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:55.915 +03:30 [INF] Received HTTP response headers after 627.2796ms - 429
2024-12-16 21:21:55.916 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:55.962 +03:30 [INF] End processing HTTP request after 2031.7887ms - 429
2024-12-16 21:21:55.996 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 12261.4589ms
2024-12-16 21:21:56.008 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2159.4796ms.
2024-12-16 21:21:56.008 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2176.5099ms.
2024-12-16 21:21:56.069 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:55.744 +03:30 [INF] End processing HTTP request after 1579.3687ms - 429
2024-12-16 21:21:55.723 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7180.2283ms
2024-12-16 21:21:56.092 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.090 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.135 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.182 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.182 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.091 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.158 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.090 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:56.193 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.201 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.204 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.215 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.201 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.227 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.182 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:56.105 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.249 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.249 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2406.4124ms.
2024-12-16 21:21:56.250 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.278 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.250 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.254 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 12156.6539ms
2024-12-16 21:21:55.703 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:55.704 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:55.705 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:55.705 +03:30 [INF] End processing HTTP request after 1674.5712ms - 429
2024-12-16 21:21:55.707 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.304 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.305 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2749.2604ms
2024-12-16 21:21:56.303 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.354 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.356 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.391 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.306 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.303 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2175.034ms.
2024-12-16 21:21:56.308 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.309 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.309 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.310 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.323 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:55.708 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 14033.301ms
2024-12-16 21:21:55.709 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:55.709 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.403 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:56.404 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.405 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 13793.8584ms
2024-12-16 21:21:56.445 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.405 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.406 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2898.681ms
2024-12-16 21:21:56.407 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.410 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.410 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.411 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.471 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.470 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.491 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.471 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.472 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.473 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.474 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.488 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.412 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.469 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2468.2448ms.
2024-12-16 21:21:56.413 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.415 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.416 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.416 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.491 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.493 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.495 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.495 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.496 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6013.4651ms
2024-12-16 21:21:56.497 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.497 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.498 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 7006.6361ms
2024-12-16 21:21:56.499 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.500 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.501 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.502 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.503 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.503 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.505 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.506 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.507 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.508 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.510 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.510 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.513 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.514 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.524 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.522 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.521 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.523 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 13173.9438ms
2024-12-16 21:21:56.525 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.520 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.536 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 12658.345ms
2024-12-16 21:21:56.514 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.516 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.517 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.518 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.519 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.519 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.543 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.545 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.545 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.557 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.547 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.548 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.548 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.550 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.551 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.551 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:56.565 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:56.565 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:56.566 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:56.554 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 10122.1006ms
2024-12-16 21:21:56.555 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.556 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.568 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.560 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.546 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.561 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 14722.8566ms
2024-12-16 21:21:56.587 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.605 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.608 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.587 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.562 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2778.0545ms
2024-12-16 21:21:56.568 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.562 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.564 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.613 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.614 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.612 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.611 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.611 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.635 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.635 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6224.3804ms
2024-12-16 21:21:56.615 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.635 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.618 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.564 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.567 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2921.4659ms
2024-12-16 21:21:56.651 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.645 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:56.645 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.647 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.648 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.650 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.652 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.653 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.655 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.552 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.553 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.554 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.567 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.663 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:56.664 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.664 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:56.665 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.666 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.667 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.668 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.669 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.670 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.670 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 6148.6741ms
2024-12-16 21:21:56.675 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.676 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.677 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.678 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.679 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.675 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.682 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.674 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:56.671 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.672 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.673 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.710 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.702 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.703 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.704 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.744 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.704 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.764 +03:30 [INF] Received HTTP response headers after 288.7442ms - 429
2024-12-16 21:21:56.764 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.706 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.708 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.710 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.700 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.731 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.701 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.774 +03:30 [INF] End processing HTTP request after 464.8777ms - 429
2024-12-16 21:21:56.775 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.771 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.812 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.833 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.845 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.866 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.772 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.775 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.776 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.878 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:56.878 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.879 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.913 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.937 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:56.880 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.898 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.891 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.777 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.778 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.793 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:56.794 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.711 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.731 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:56.714 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.958 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.948 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1244.5026ms.
2024-12-16 21:21:56.949 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.950 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:56.950 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.951 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.952 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.953 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.967 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.968 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:56.956 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.956 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.957 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:56.965 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.962 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:56.963 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.964 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:56.965 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.966 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.969 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.954 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.955 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.969 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.972 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:56.959 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.673 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 10570.13ms
2024-12-16 21:21:56.979 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:56.981 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.981 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:56.982 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:56.979 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:56.983 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.984 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:56.984 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:56.985 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.986 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:56.986 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:56.992 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:56.998 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.998 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:57.034 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.002 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.003 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.004 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.005 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.006 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.007 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.026 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.009 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:56.988 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:56.989 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.046 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:56.999 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.034 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:57.035 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.036 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.037 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.038 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.038 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.039 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.043 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.044 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.058 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.057 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:57.057 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.056 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.059 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.059 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.060 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.086 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.086 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.044 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.045 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.082 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:57.083 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.101 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3263.1836ms
2024-12-16 21:21:57.084 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.113 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.081 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.084 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.085 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.087 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.116 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 13062.708ms
2024-12-16 21:21:57.115 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.116 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.117 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.118 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.137 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.138 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.139 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.127 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.135 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.061 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.081 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.064 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.101 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.098 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.055 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:56.997 +03:30 [INF] Received HTTP response headers after 265.9886ms - 429
2024-12-16 21:21:57.148 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.148 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.150 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.150 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.151 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.152 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.153 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.154 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.155 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.155 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.157 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.157 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.158 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.159 +03:30 [INF] End processing HTTP request after 483.4082ms - 429
2024-12-16 21:21:57.162 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.164 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.163 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.191 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.233 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.165 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.267 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.173 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.277 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.277 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.289 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.163 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.298 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.299 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.299 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.313 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.327 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.316 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.316 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.316 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.165 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.166 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.167 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.167 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.168 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.169 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.170 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.170 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.266 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:57.328 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.329 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.329 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.328 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.331 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.354 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.331 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.332 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.393 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.394 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.423 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.395 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.395 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.396 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.333 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.334 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.334 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.337 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.339 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.339 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.393 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 728.8276ms.
2024-12-16 21:21:57.434 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.433 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.459 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.435 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.436 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.437 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.464 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.461 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.476 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.479 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.481 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.482 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.479 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.433 +03:30 [INF] Received HTTP response headers after 345.399ms - 429
2024-12-16 21:21:57.433 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.438 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.439 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.441 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.442 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.443 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.513 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.514 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.515 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:57.517 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.513 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.517 +03:30 [INF] End processing HTTP request after 508.1608ms - 429
2024-12-16 21:21:57.519 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.550 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.545 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.570 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.546 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.547 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.627 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.549 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.572 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.593 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.552 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:57.639 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.639 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.660 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.641 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.641 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.638 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:57.657 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.669 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.668 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.670 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:57.668 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.710 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.727 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.666 +03:30 [INF] Received HTTP response headers after 365.5929ms - 429
2024-12-16 21:21:57.674 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:57.520 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.740 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.741 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.742 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.739 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.743 +03:30 [INF] End processing HTTP request after 570.1625ms - 429
2024-12-16 21:21:57.739 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 747.1595ms.
2024-12-16 21:21:57.900 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:57.874 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.876 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.877 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:57.977 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:57.976 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:57.879 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:57.932 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:57.763 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.754 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:57.995 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.522 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:57.544 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:57.527 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:57.462 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:57.456 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:57.988 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:57.988 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:57.989 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:57.990 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.040 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:58.064 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:57.991 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:58.064 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 902.4044ms.
2024-12-16 21:21:57.991 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:57.993 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:57.996 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:57.521 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:57.997 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:58.000 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:21:58.001 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.006 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:58.008 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:58.075 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:58.075 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:58.077 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.079 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:58.099 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:58.100 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:58.118 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.116 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.082 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:58.085 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:58.086 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.087 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.088 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:58.090 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.091 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.092 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:58.093 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:58.096 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:58.124 +03:30 [INF] Received HTTP response headers after 1022.4705ms - 429
2024-12-16 21:21:58.125 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:58.126 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.129 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.146 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:58.145 +03:30 [INF] End processing HTTP request after 1087.5818ms - 429
2024-12-16 21:21:58.163 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.169 +03:30 [INF] Received HTTP response headers after 1389.8049ms - 429
2024-12-16 21:21:58.170 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.201 +03:30 [INF] End processing HTTP request after 1490.9352ms - 429
2024-12-16 21:21:58.222 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.182 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:58.266 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.286 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.297 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:58.265 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:58.319 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.341 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:58.342 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.370 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.393 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1358.1445ms.
2024-12-16 21:21:58.422 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.435 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.130 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:58.446 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1772.4189ms.
2024-12-16 21:21:58.447 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:58.448 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.451 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:58.131 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:58.463 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:58.136 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.139 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:21:58.460 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:58.459 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:58.461 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.458 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:58.474 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:58.476 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:58.462 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:58.464 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2141.1145ms
2024-12-16 21:21:58.132 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:58.473 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:58.473 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:58.140 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.141 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:21:58.142 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.143 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.144 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:58.485 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:21:58.485 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:58.486 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:58.503 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:58.488 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:58.489 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.490 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:58.491 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:58.492 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.493 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.499 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:21:58.500 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:21:58.500 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:21:58.501 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:58.504 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:58.487 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:58.502 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:21:58.503 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.505 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:58.506 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 15054.4011ms
2024-12-16 21:21:58.509 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:58.537 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1732.197ms
2024-12-16 21:21:58.538 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:58.540 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.541 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.542 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1591.6252ms
2024-12-16 21:21:58.554 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.555 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:58.572 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2101.8889ms
2024-12-16 21:21:58.556 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:58.581 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:58.590 +03:30 [INF] Received HTTP response headers after 1125.6264ms - 429
2024-12-16 21:21:58.603 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3315.9203ms
2024-12-16 21:21:58.605 +03:30 [INF] End processing HTTP request after 1210.671ms - 429
2024-12-16 21:21:58.580 +03:30 [INF] Received HTTP response headers after 1171.903ms - 429
2024-12-16 21:21:58.613 +03:30 [INF] Received HTTP response headers after 969.1595ms - 429
2024-12-16 21:21:58.613 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.647 +03:30 [INF] End processing HTTP request after 1076.9064ms - 429
2024-12-16 21:21:58.670 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 15626.008ms
2024-12-16 21:21:58.626 +03:30 [INF] End processing HTTP request after 1460.5453ms - 429
2024-12-16 21:21:58.713 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:58.760 +03:30 [INF] Received HTTP response headers after 659.0981ms - 429
2024-12-16 21:21:58.844 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:58.891 +03:30 [INF] End processing HTTP request after 826.6458ms - 429
2024-12-16 21:21:58.913 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:58.569 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:21:58.938 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1609.9611ms.
2024-12-16 21:21:59.045 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1495.2197ms.
2024-12-16 21:21:59.076 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:59.099 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:59.089 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1936.0822ms.
2024-12-16 21:21:59.023 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 2512.7215ms
2024-12-16 21:21:58.553 +03:30 [INF] Received HTTP response headers after 1156.168ms - 429
2024-12-16 21:21:59.125 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:59.123 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:59.126 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:21:59.138 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:59.154 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:21:59.177 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:21:59.190 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:21:59.191 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:21:59.136 +03:30 [INF] End processing HTTP request after 1970.9232ms - 429
2024-12-16 21:21:58.553 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:21:59.189 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1199.867ms.
2024-12-16 21:22:06.510 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:05.496 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:26.756 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:21:59.194 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2137.6933ms
2024-12-16 21:22:13.100 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:08.539 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:11.073 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:01.948 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:02.964 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:10.058 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:07.524 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:21:59.189 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:22:03.982 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:22:09.044 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:00.943 +03:30 [INF] Received HTTP response headers after 2353.2005ms - 429
2024-12-16 21:22:00.423 +03:30 [INF] Received HTTP response headers after 1866.014ms - 429
2024-12-16 21:22:04.991 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:21:59.127 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:21:59.136 +03:30 [INF] Received HTTP response headers after 987.4323ms - 429
2024-12-16 21:21:59.277 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:21:59.206 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:26.763 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.755 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.757 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:22:12.089 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:26.758 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:26.760 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.762 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.765 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.775 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.777 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.752 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:26.779 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.780 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:26.784 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.785 +03:30 [INF] End processing HTTP request after 88245.0111ms - 429
2024-12-16 21:23:26.786 +03:30 [INF] End processing HTTP request after 88283.4537ms - 429
2024-12-16 21:23:26.859 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.854 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.855 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.034 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:26.856 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.857 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 400 null application/json; charset=utf-8 90246.2772ms
2024-12-16 21:23:26.858 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.924 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:26.853 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:27.057 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:26.864 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.865 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.867 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:26.868 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:26.869 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:26.870 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:27.050 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:27.049 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.046 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.142 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.233 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.055 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.056 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.058 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.255 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.261 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.254 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.265 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.291 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.334 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.337 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.333 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.322 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:26.862 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:27.059 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.060 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.060 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:27.064 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.215 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 90066.8171ms
2024-12-16 21:23:27.091 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.033 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:23:27.045 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:23:27.364 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.366 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.375 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.359 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.362 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.378 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.379 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.379 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.383 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.386 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:27.502 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.503 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.504 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.506 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.508 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.509 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.510 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.531 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.551 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.555 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.588 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.561 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.563 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.564 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.551 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.542 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:27.387 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.388 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.595 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.587 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.591 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.558 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.594 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.597 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.584 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.586 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.604 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.605 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:27.618 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 90967.5581ms
2024-12-16 21:23:27.629 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:27.631 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:27.634 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.637 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.628 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.638 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.648 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.649 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.651 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.627 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.388 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:27.445 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 88943.4492ms.
2024-12-16 21:23:27.796 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:27.798 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:27.800 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.802 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.804 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.806 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.811 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.814 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.816 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.795 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 90281.4673ms
2024-12-16 21:23:27.827 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:27.500 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 89014.7506ms.
2024-12-16 21:23:26.789 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:26.790 +03:30 [INF] End processing HTTP request after 88672.457ms - 429
2024-12-16 21:23:26.852 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 89700.3747ms.
2024-12-16 21:23:27.884 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:27.865 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:27.869 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:27.873 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.876 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.879 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:27.882 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:27.997 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.886 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:27.890 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:28.026 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:27.896 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:27.858 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:27.859 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:27.898 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:27.900 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:27.928 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:26.814 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:21:58.512 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:21:59.916 +03:30 [INF] Received HTTP response headers after 2472.2385ms - 429
2024-12-16 21:21:58.513 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:21:58.513 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:21:58.515 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:21:58.516 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:21:58.536 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:21:58.527 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:22:13.614 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:28.065 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:28.056 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:28.057 +03:30 [INF] End processing HTTP request after 90886.8096ms - 429
2024-12-16 21:23:28.014 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.016 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.011 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.012 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.349 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.266 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.308 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.017 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.018 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.021 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:28.024 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:28.028 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:27.893 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:28.029 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:28.038 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:28.044 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:28.047 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:28.048 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:28.010 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:23:28.054 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:28.375 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:28.352 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.351 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.353 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.357 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.359 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.361 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.362 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:28.363 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:28.364 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.365 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 91228.5152ms
2024-12-16 21:23:28.373 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:28.417 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:28.376 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:28.377 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:28.378 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:28.389 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:28.055 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.349 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
Refit.ApiException: Response status code does not indicate success: 429 (Too Many Requests).
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 384
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi.global::Cryptocurrency.Infrastructure.ServiceProxy.ICoinMarketCapApi.GetCryptoPriceAsync(String cryptoCode) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\ICoinMarketCapApi.g.cs:line 61
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 40
2024-12-16 21:23:28.058 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.452 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.454 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.447 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.448 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.451 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.456 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.457 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.458 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.459 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.463 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:28.468 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:28.469 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:28.470 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:28.471 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:28.446 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 90346.7399ms.
2024-12-16 21:23:28.536 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.535 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.534 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.672 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.604 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.532 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.532 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.537 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.695 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.697 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.697 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.698 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.699 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.547 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:28.690 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.691 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.693 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.694 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.694 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.538 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.539 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.540 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.543 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:28.725 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.547 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:28.689 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 91719.9411ms
2024-12-16 21:23:28.569 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:28.472 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:28.473 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.532 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 91373.5934ms.
2024-12-16 21:23:28.492 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:28.063 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.739 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.740 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.072 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:28.294 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 91786.917ms
2024-12-16 21:23:28.113 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:22:14.635 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:15.642 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:16.655 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:17.677 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:18.191 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:19.206 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:20.216 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:21.230 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:22.244 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:23.258 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:24.271 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:25.286 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:26.297 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:27.312 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:27.820 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:28.837 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:29.847 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:30.863 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:31.874 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:32.887 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:33.910 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:34.918 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:49.927 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:48.290 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:47.513 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:47.209 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:28.804 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.805 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:22:50.081 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:50.346 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:50.555 +03:30 [DBG] Connection id "0HN8TV87LTAQN" is closing.
2024-12-16 21:22:53.516 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:50.728 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:53.533 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:54.223 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:53.533 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:53.574 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:53.844 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:54.691 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:54.209 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:54.236 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:22:54.495 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:04.387 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:05.602 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:28.711 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:28.712 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:28.713 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.716 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.957 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:28.719 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.720 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.721 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.838 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:28.722 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.723 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.724 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:28.726 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.546 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:28.987 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 90817.7235ms
2024-12-16 21:23:28.997 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:28.997 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:28.999 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.000 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.015 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.016 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.003 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.012 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.013 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.014 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.001 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.028 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.028 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.038 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.052 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.026 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.054 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.069 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.039 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.002 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.027 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.004 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.004 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.006 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.007 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:29.082 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:28.728 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:28.731 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.070 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.071 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.153 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.204 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.072 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.073 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.260 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.075 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.274 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.079 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.080 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.283 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.284 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.285 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.222 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 91106.7385ms
2024-12-16 21:23:29.101 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 92609.3688ms
2024-12-16 21:23:28.734 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:28.735 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:28.736 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:28.737 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:28.738 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.743 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.136 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:29.279 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.278 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.282 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.286 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.081 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.311 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.312 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.313 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.339 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.323 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.324 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.083 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:29.344 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.343 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.347 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.361 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.361 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.349 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.350 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.010 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.287 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.291 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:29.294 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:29.297 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.363 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.365 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.428 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.503 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.519 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.362 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.521 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.535 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.366 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.538 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.571 +03:30 [INF] Received HTTP response headers after 515.707ms - 200
2024-12-16 21:23:29.563 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.575 +03:30 [INF] End processing HTTP request after 547.0058ms - 200
2024-12-16 21:23:29.574 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.581 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:29.579 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.599 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:29.561 +03:30 [INF] Received HTTP response headers after 521.1004ms - 200
2024-12-16 21:23:29.367 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.368 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 91888.5708ms
2024-12-16 21:23:29.371 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 92055.1972ms
2024-12-16 21:23:29.373 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:29.519 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 92628.6011ms
2024-12-16 21:23:29.410 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.298 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:29.299 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.310 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.310 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:28.066 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:28.746 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.619 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.602 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:29.601 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.604 +03:30 [INF] End processing HTTP request after 591.9527ms - 200
2024-12-16 21:23:29.662 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.663 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:29.606 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.665 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.667 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:29.614 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:29.615 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.617 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.618 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:29.636 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.670 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.671 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:29.691 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.669 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:29.672 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:29.723 +03:30 [INF] Received HTTP response headers after 461.6545ms - 200
2024-12-16 21:23:29.732 +03:30 [INF] Received HTTP response headers after 93.7561ms - 200
2024-12-16 21:23:29.744 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.791 +03:30 [INF] End processing HTTP request after 789.3433ms - 200
2024-12-16 21:23:29.880 +03:30 [INF] Received HTTP response headers after 555.5857ms - 200
2024-12-16 21:23:29.914 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:29.958 +03:30 [INF] End processing HTTP request after 656.9954ms - 200
2024-12-16 21:23:29.914 +03:30 [INF] Received HTTP response headers after 374.3227ms - 200
2024-12-16 21:23:29.811 +03:30 [INF] End processing HTTP request after 211.753ms - 200
2024-12-16 21:23:29.848 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.848 +03:30 [INF] Received HTTP response headers after 148.6934ms - 200
2024-12-16 21:23:29.840 +03:30 [INF] Received HTTP response headers after 317.9316ms - 200
2024-12-16 21:23:29.753 +03:30 [INF] Received HTTP response headers after 517.3128ms - 200
2024-12-16 21:23:29.958 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 92411.6204ms
2024-12-16 21:23:29.672 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 93364.0879ms
2024-12-16 21:23:29.674 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.699 +03:30 [INF] Received HTTP response headers after 476.2052ms - 200
2024-12-16 21:23:29.677 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:29.690 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.620 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.624 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.636 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:29.628 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:28.747 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:28.748 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.749 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.751 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.752 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.756 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.760 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.761 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.763 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.765 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.767 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.770 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.773 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.774 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.776 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.777 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.779 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.783 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.787 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.788 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.790 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.791 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.793 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.796 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.799 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.801 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.803 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.806 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:22:50.554 +03:30 [DBG] Connection id "0HN8TV87LTAQN" received FIN.
2024-12-16 21:22:49.674 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 21:23:28.808 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.811 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.813 +03:30 [DBG] Connection id "0HN8TV87LTAQN" is closed. The last processed stream ID was 13.
2024-12-16 21:23:28.815 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.817 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.818 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.820 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.821 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.823 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.826 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.829 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.831 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.833 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.834 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.836 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.837 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:28.884 +03:30 [INF] Received HTTP response headers after 708.8786ms - 200
2024-12-16 21:23:29.960 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:29.961 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:29.963 +03:30 [INF] End processing HTTP request after 600.2922ms - 200
2024-12-16 21:23:29.964 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:29.964 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 950.9308ms.
2024-12-16 21:23:29.965 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:29.967 +03:30 [INF] End processing HTTP request after 299.4276ms - 200
2024-12-16 21:23:29.968 +03:30 [INF] End processing HTTP request after 540.0005ms - 200
2024-12-16 21:23:29.969 +03:30 [INF] End processing HTTP request after 898.4475ms - 200
2024-12-16 21:23:29.971 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.975 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:29.978 +03:30 [INF] End processing HTTP request after 908.0842ms - 200
2024-12-16 21:23:30.080 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:30.076 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.077 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.106 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.078 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:30.047 +03:30 [DBG] Connection id "0HN8TV87LTAQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:23:30.081 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.084 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:30.086 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1089.0748ms.
2024-12-16 21:23:30.139 +03:30 [DBG] The connection queue processing loop for 0HN8TV87LTAQN completed.
2024-12-16 21:23:30.134 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.132 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.136 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.161 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.160 +03:30 [DBG] Connection id "0HN8TV87LTAQN" stopped.
2024-12-16 21:23:30.140 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:30.151 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:30.152 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.086 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:30.087 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:30.089 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:30.091 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 92975.1925ms
2024-12-16 21:23:30.159 +03:30 [INF] Received HTTP response headers after 51.3042ms - 200
2024-12-16 21:23:30.100 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:30.103 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:29.981 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:30.179 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.177 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.184 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:30.205 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.222 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:30.185 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:30.186 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:30.187 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:30.188 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.188 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.204 +03:30 [INF] Received HTTP response headers after 42.4487ms - 200
2024-12-16 21:23:30.192 +03:30 [INF] End processing HTTP request after 231.5256ms - 200
2024-12-16 21:23:30.193 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:30.225 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.226 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:30.227 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:30.228 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:30.230 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.232 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.235 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.242 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.304 +03:30 [INF] Received HTTP response headers after 50.4536ms - 200
2024-12-16 21:23:30.314 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.244 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:30.314 +03:30 [INF] Received HTTP response headers after 729.783ms - 200
2024-12-16 21:23:30.279 +03:30 [INF] Received HTTP response headers after 72.1646ms - 200
2024-12-16 21:23:30.318 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.316 +03:30 [INF] End processing HTTP request after 128.1954ms - 200
2024-12-16 21:23:30.448 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.362 +03:30 [INF] End processing HTTP request after 824.0736ms - 200
2024-12-16 21:23:30.380 +03:30 [INF] End processing HTTP request after 243.2113ms - 200
2024-12-16 21:23:30.245 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:30.247 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:30.469 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.468 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1104.7625ms.
2024-12-16 21:23:30.468 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:30.467 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2597.9333ms
2024-12-16 21:23:30.471 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:30.473 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1126.1138ms.
2024-12-16 21:23:30.489 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:30.250 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.473 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:30.238 +03:30 [INF] End processing HTTP request after 160.3822ms - 200
2024-12-16 21:23:30.240 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1402.0639ms.
2024-12-16 21:23:30.241 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:30.193 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.204 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:23:29.983 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:30.500 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:30.493 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.492 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.681 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:30.736 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.760 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:30.495 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:30.508 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:30.496 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:30.498 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.499 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.745 +03:30 [INF] Received HTTP response headers after 271.1618ms - 200
2024-12-16 21:23:30.502 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.505 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:30.508 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1233.497ms.
2024-12-16 21:23:30.510 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.511 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:30.512 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.806 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.807 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:30.861 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.810 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.811 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:30.814 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:30.815 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:30.817 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:30.868 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.864 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:30.870 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.871 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.872 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 85375.7899ms
2024-12-16 21:23:30.895 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:30.897 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.898 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:30.899 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.993 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:30.994 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.906 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.917 +03:30 [INF] Received HTTP response headers after 43.8945ms - 200
2024-12-16 21:23:30.917 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:30.818 +03:30 [INF] End processing HTTP request after 590.9933ms - 200
2024-12-16 21:23:30.806 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2941.2344ms
2024-12-16 21:23:30.819 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.860 +03:30 [INF] Received HTTP response headers after 591.3747ms - 200
2024-12-16 21:23:30.821 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:30.824 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:30.828 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:30.895 +03:30 [INF] Received HTTP response headers after 55.647ms - 200
2024-12-16 21:23:30.736 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 94217.4718ms
2024-12-16 21:23:30.535 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.985 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:29.987 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:29.988 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:29.991 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:29.992 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 93923.0429ms
2024-12-16 21:23:29.997 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:29.999 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.001 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.003 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.004 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.005 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:31.139 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:30.013 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.014 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.016 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.017 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:31.150 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:30.020 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.023 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.027 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.028 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.029 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.031 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:31.162 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:30.033 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.036 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.039 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.041 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.043 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.044 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.044 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:31.176 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:30.131 +03:30 [INF] Received HTTP response headers after 415.5027ms - 200
2024-12-16 21:23:30.051 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.053 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.054 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.240 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:30.057 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.058 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.058 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.059 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.060 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.062 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.064 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.065 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.066 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.070 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.071 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.073 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.074 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:30.075 +03:30 [INF] End processing HTTP request after 91563.3811ms - 200
2024-12-16 21:23:31.088 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2366.1928ms
2024-12-16 21:23:31.096 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.098 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.100 +03:30 [INF] End processing HTTP request after 602.416ms - 200
2024-12-16 21:23:31.101 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:31.103 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:31.106 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.107 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.108 +03:30 [INF] End processing HTTP request after 919.857ms - 200
2024-12-16 21:23:31.110 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.112 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:31.113 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:31.118 +03:30 [INF] End processing HTTP request after 924.2899ms - 200
2024-12-16 21:23:31.120 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.121 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:31.122 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:31.236 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.240 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.302 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:31.242 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.244 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:31.268 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:31.244 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1723.5987ms.
2024-12-16 21:23:31.246 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:31.250 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:31.303 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 89354.7918ms
2024-12-16 21:23:31.303 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.304 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.305 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:31.305 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:31.306 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:31.324 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:31.253 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:31.443 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.443 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.444 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.445 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.446 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:31.442 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2902.3369ms
2024-12-16 21:23:31.255 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.258 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2189.082ms.
2024-12-16 21:23:31.260 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.264 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:31.266 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:31.268 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2213.8753ms.
2024-12-16 21:23:31.258 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:31.270 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 108376.5608ms
2024-12-16 21:23:31.123 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:31.124 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:31.125 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:31.463 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.464 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.465 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.466 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.466 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:31.467 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.461 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 84950.8512ms
2024-12-16 21:23:31.468 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.469 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:31.470 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.471 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:31.471 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:31.472 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:31.473 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:31.479 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:31.479 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:31.481 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:31.493 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.494 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.495 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.496 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.497 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:31.498 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:31.501 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.504 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:31.505 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.506 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:31.507 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:31.508 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:31.530 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.527 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.529 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.598 +03:30 [INF] Received HTTP response headers after 310.7096ms - 200
2024-12-16 21:23:31.615 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.660 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.578 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.531 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.532 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:31.532 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 81474.4884ms
2024-12-16 21:23:31.533 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.534 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:31.535 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.536 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:31.539 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:31.677 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.674 +03:30 [INF] End processing HTTP request after 1689.7402ms - 200
2024-12-16 21:23:31.677 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.732 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.793 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:31.809 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.678 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.679 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.679 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:31.682 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.817 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:31.818 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.927 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:31.817 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.974 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.992 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.819 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.819 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.973 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3250.0679ms
2024-12-16 21:23:31.855 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.682 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:31.683 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.816 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3456.8531ms
2024-12-16 21:23:31.674 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3312.8789ms
2024-12-16 21:23:31.686 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:31.510 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.487 +03:30 [INF] Received HTTP response headers after 40.1313ms - 200
2024-12-16 21:23:31.816 +03:30 [INF] Received HTTP response headers after 304.6406ms - 200
2024-12-16 21:23:31.511 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:31.578 +03:30 [INF] Received HTTP response headers after 305.9794ms - 200
2024-12-16 21:23:31.524 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:31.365 +03:30 [INF] Received HTTP response headers after 536.1962ms - 200
2024-12-16 21:23:31.133 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.135 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.006 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.993 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.995 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.997 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.058 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.087 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.074 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.998 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:31.999 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.000 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.001 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:32.002 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.003 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.087 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.091 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.092 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.092 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:32.093 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.094 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:32.095 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.098 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:32.098 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.098 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.211 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.228 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.099 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 89135.0275ms
2024-12-16 21:23:32.100 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.139 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.096 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:32.004 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.004 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:32.041 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.007 +03:30 [INF] End processing HTTP request after 756.4963ms - 200
2024-12-16 21:23:32.008 +03:30 [INF] End processing HTTP request after 883.1831ms - 200
2024-12-16 21:23:32.012 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:32.013 +03:30 [INF] End processing HTTP request after 1478.7893ms - 200
2024-12-16 21:23:32.014 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:32.015 +03:30 [INF] End processing HTTP request after 1774.4173ms - 200
2024-12-16 21:23:32.040 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:32.018 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.136 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.253 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 83714.1577ms
2024-12-16 21:23:32.246 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:23:32.246 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.247 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.256 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:32.251 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.245 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3888.4036ms
2024-12-16 21:23:32.252 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.254 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:32.254 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:32.256 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.290 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.291 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.346 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.381 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.292 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:32.293 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.293 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.294 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.295 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 81221.2836ms
2024-12-16 21:23:32.313 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.256 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2071.8274ms.
2024-12-16 21:23:32.257 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:32.258 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:32.259 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:32.260 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:32.261 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:32.264 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:32.285 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:32.267 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:32.433 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:23:32.429 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.429 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.481 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.499 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.430 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.558 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.551 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.567 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.431 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.432 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:32.590 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.593 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.594 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.604 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 79504.3469ms
2024-12-16 21:23:32.433 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.452 +03:30 [INF] Received HTTP response headers after 477.6688ms - 200
2024-12-16 21:23:32.428 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 4075.228ms
2024-12-16 21:23:32.435 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.436 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:32.437 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.437 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:32.438 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.644 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.643 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:32.643 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.646 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.647 +03:30 [INF] End processing HTTP request after 829.8208ms - 200
2024-12-16 21:23:32.648 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.650 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.652 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:32.652 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.654 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.662 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:32.665 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:23:32.664 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.668 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:32.667 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.668 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3047.2478ms.
2024-12-16 21:23:32.668 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:32.669 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.669 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:32.695 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:32.439 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:32.439 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.442 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:32.443 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:32.481 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:31.137 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.138 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.140 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:30.010 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:32.709 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:32.699 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:32.698 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:23:32.698 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.748 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.762 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.771 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.784 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.797 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.700 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.701 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:32.701 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 80612.5502ms
2024-12-16 21:23:32.703 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.704 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:32.704 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:32.705 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:32.706 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:32.706 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:32.803 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.803 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.804 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.805 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.806 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:32.830 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.831 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.850 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.868 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.833 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:32.810 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.811 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:32.811 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:32.812 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:32.882 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.883 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.881 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:32.883 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:32.885 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.886 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:32.902 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:32.904 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.905 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.907 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:32.963 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:32.999 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.030 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.015 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:32.908 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.052 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.052 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.102 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.119 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.135 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:33.158 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.070 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.051 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 3700.6649ms
2024-12-16 21:23:33.158 +03:30 [INF] Received HTTP response headers after 487.1014ms - 200
2024-12-16 21:23:33.036 +03:30 [INF] Received HTTP response headers after 366.216ms - 200
2024-12-16 21:23:32.927 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:33.192 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:33.193 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:32.707 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.188 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:23:33.189 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.188 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 95098.2672ms
2024-12-16 21:23:33.205 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.190 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.191 +03:30 [INF] End processing HTTP request after 753.048ms - 200
2024-12-16 21:23:33.192 +03:30 [INF] End processing HTTP request after 754.8973ms - 200
2024-12-16 21:23:32.860 +03:30 [INF] Received HTTP response headers after 46.4155ms - 200
2024-12-16 21:23:32.827 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:32.708 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:32.708 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:32.748 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.203 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:23:33.204 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.207 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:33.205 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:33.190 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.206 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:33.207 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3223.7121ms.
2024-12-16 21:23:33.207 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:33.207 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3219.1094ms.
2024-12-16 21:23:33.203 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:33.238 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:33.233 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.233 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:33.279 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.294 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.315 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.328 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.339 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:33.347 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.234 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 96532.4916ms
2024-12-16 21:23:33.234 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.236 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 84192.4246ms
2024-12-16 21:23:33.237 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:33.265 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.249 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:33.388 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:33.389 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:33.389 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:33.203 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.390 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:33.391 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:33.392 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:33.393 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:33.393 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:31.144 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.147 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.148 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.151 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:30.018 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:33.395 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.380 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.379 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:33.433 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.383 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.386 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:33.387 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.389 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:33.250 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:33.210 +03:30 [INF] End processing HTTP request after 770.7748ms - 200
2024-12-16 21:23:33.211 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:33.394 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:33.211 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.231 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.231 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:32.739 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:32.720 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.398 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.399 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.453 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:33.446 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.480 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:33.490 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.447 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.444 +03:30 [INF] Received HTTP response headers after 556.9447ms - 200
2024-12-16 21:23:33.447 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:33.499 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.500 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.537 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.516 +03:30 [INF] End processing HTTP request after 805.5174ms - 200
2024-12-16 21:23:33.518 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:33.448 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.451 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:33.452 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:33.545 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:33.545 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.544 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.610 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.626 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.642 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.544 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:33.565 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:33.546 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:33.547 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.550 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:33.453 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3260.0444ms.
2024-12-16 21:23:33.671 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.670 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.673 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:33.673 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:33.690 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.691 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.722 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.739 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.746 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.761 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.792 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.823 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.746 +03:30 [INF] Received HTTP response headers after 54.1659ms - 200
2024-12-16 21:23:33.674 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.670 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 96226.867ms
2024-12-16 21:23:33.690 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:33.453 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:33.454 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:33.455 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.456 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.457 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.458 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.458 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.444 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.846 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:33.839 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.840 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.841 +03:30 [INF] End processing HTTP request after 275.7249ms - 200
2024-12-16 21:23:33.869 +03:30 [DBG] Connection id "0HN8TV87LTAR7" received FIN.
2024-12-16 21:23:33.839 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 95346.6853ms
2024-12-16 21:23:33.842 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.843 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.869 +03:30 [DBG] Connection id "0HN8TV87LTARB" received FIN.
2024-12-16 21:23:33.845 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:33.846 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:33.870 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:33.848 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:33.852 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.853 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.854 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.869 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.498 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.498 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.432 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.402 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.152 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.153 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.156 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.159 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.160 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.163 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:30.032 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:33.895 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:33.888 +03:30 [DBG] Connection id "0HN8TV87LTAQV" received FIN.
2024-12-16 21:23:33.885 +03:30 [DBG] Connection id "0HN8TV87LTAR3" received FIN.
2024-12-16 21:23:33.885 +03:30 [DBG] Connection id "0HN8TV87LTARD" received FIN.
2024-12-16 21:23:33.884 +03:30 [DBG] Connection id "0HN8TV87LTAQT" received FIN.
2024-12-16 21:23:33.886 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:33.901 +03:30 [DBG] Connection id "0HN8TV87LTAR2" received FIN.
2024-12-16 21:23:33.891 +03:30 [DBG] Connection id "0HN8TV87LTARJ" received FIN.
2024-12-16 21:23:33.883 +03:30 [DBG] Connection id "0HN8TV87LTARH" received FIN.
2024-12-16 21:23:33.884 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.885 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.883 +03:30 [DBG] Connection id "0HN8TV87LTAR9" received FIN.
2024-12-16 21:23:33.883 +03:30 [DBG] Connection id "0HN8TV87LTAR5" received FIN.
2024-12-16 21:23:33.892 +03:30 [DBG] Connection id "0HN8TV87LTAQR" received FIN.
2024-12-16 21:23:33.886 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1191.4829ms.
2024-12-16 21:23:33.887 +03:30 [DBG] Connection id "0HN8TV87LTAR7" is closed. The last processed stream ID was 73.
2024-12-16 21:23:33.883 +03:30 [DBG] Connection id "0HN8TV87LTARF" received FIN.
2024-12-16 21:23:33.888 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.891 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.892 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:33.893 +03:30 [DBG] Connection id "0HN8TV87LTARB" is closed. The last processed stream ID was 69.
2024-12-16 21:23:33.893 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:33.896 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:33.898 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:33.899 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.901 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:33.902 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.883 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.905 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.907 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.908 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.909 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.910 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.911 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.947 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:33.947 +03:30 [DBG] Connection id "0HN8TV87LTAR2" is closed. The last processed stream ID was 85.
2024-12-16 21:23:33.945 +03:30 [DBG] Connection id "0HN8TV87LTARD" is closed. The last processed stream ID was 77.
2024-12-16 21:23:33.946 +03:30 [DBG] Connection id "0HN8TV87LTAQT" is closed. The last processed stream ID was 71.
2024-12-16 21:23:33.944 +03:30 [DBG] Connection id "0HN8TV87LTAR3" is closed. The last processed stream ID was 73.
2024-12-16 21:23:33.948 +03:30 [DBG] Connection id "0HN8TV87LTARJ" is closed. The last processed stream ID was 55.
2024-12-16 21:23:33.948 +03:30 [DBG] Connection id "0HN8TV87LTARH" is closed. The last processed stream ID was 47.
2024-12-16 21:23:33.951 +03:30 [DBG] Connection id "0HN8TV87LTAR9" is closed. The last processed stream ID was 75.
2024-12-16 21:23:33.950 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.944 +03:30 [DBG] Connection id "0HN8TV87LTAQV" is closed. The last processed stream ID was 69.
2024-12-16 21:23:33.950 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:33.953 +03:30 [DBG] Connection id "0HN8TV87LTAQR" is closed. The last processed stream ID was 81.
2024-12-16 21:23:34.021 +03:30 [DBG] Connection id "0HN8TV87LTARD" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.023 +03:30 [DBG] Connection id "0HN8TV87LTAQT" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.024 +03:30 [DBG] Connection id "0HN8TV87LTAR3" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.024 +03:30 [DBG] Connection id "0HN8TV87LTARJ" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.011 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.020 +03:30 [DBG] Connection id "0HN8TV87LTAR2" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.025 +03:30 [DBG] Connection id "0HN8TV87LTARH" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.026 +03:30 [DBG] Connection id "0HN8TV87LTAR9" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.027 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.027 +03:30 [DBG] Connection id "0HN8TV87LTAQV" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.038 +03:30 [DBG] Connection id "0HN8TV87LTAQR" sending RST because: "The client closed the connection."
2024-12-16 21:23:33.952 +03:30 [DBG] Connection id "0HN8TV87LTAR5" is closed. The last processed stream ID was 73.
2024-12-16 21:23:33.956 +03:30 [DBG] The connection queue processing loop for 0HN8TV87LTARF completed.
2024-12-16 21:23:33.954 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:33.955 +03:30 [DBG] Connection id "0HN8TV87LTAR7" sending RST because: "The client closed the connection."
2024-12-16 21:23:33.956 +03:30 [DBG] Connection id "0HN8TV87LTARF" is closed. The last processed stream ID was 1.
2024-12-16 21:23:33.957 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:33.961 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:33.961 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 97546.4148ms
2024-12-16 21:23:33.962 +03:30 [DBG] Connection id "0HN8TV87LTARB" sending RST because: "The client closed the connection."
2024-12-16 21:23:33.963 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:33.942 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:33.964 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:33.965 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:33.966 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:33.967 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:33.969 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:33.970 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.971 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:33.972 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.973 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:33.977 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.020 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.020 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.912 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.912 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.079 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.082 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.142 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.074 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_ChangeTracker()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:34.084 +03:30 [DBG] Connection id "0HN8TV87LTAR5" sending RST because: "The client closed the connection."
2024-12-16 21:23:34.086 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:34.087 +03:30 [DBG] Connection id "0HN8TV87LTARF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 21:23:34.088 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 97294.5646ms
2024-12-16 21:23:34.091 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.094 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:34.095 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.096 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:34.097 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.097 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.098 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.099 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.100 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.101 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.101 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.105 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.105 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.106 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.108 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:33.913 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:33.914 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.154 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.153 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.209 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.170 +03:30 [DBG] Connection id "0HN8TV87LTARF" stopped.
2024-12-16 21:23:34.159 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:34.162 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.163 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:34.164 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:34.164 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:34.225 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:34.220 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.219 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.305 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.325 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:34.362 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.247 +03:30 [INF] Received HTTP response headers after 572.1343ms - 200
2024-12-16 21:23:34.221 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:34.222 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.263 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:34.274 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:34.165 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.166 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.167 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.169 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.169 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.170 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.174 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.175 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.176 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.177 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.178 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.153 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.153 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.219 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.219 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.940 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:33.931 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.164 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.165 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.167 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.170 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.173 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.174 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.177 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:30.045 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.379 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.378 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:23:34.380 +03:30 [INF] End processing HTTP request after 928.1112ms - 200
2024-12-16 21:23:34.380 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:34.381 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.378 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6322.6736ms
2024-12-16 21:23:34.384 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:34.385 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:34.386 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.387 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.388 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.389 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.391 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.392 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.393 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.394 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.395 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.395 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.396 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.397 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.402 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.403 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.404 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.405 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.406 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.407 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.449 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.450 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:23:34.451 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:34.453 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:34.454 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.513 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.515 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:34.532 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.563 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.579 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:34.628 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.641 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 5017.0805ms
2024-12-16 21:23:34.656 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.596 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.455 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.456 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:34.457 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:34.458 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.459 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.460 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.461 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.462 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.465 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.466 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.467 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.468 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.469 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.471 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.471 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.472 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.658 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.657 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.659 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.660 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:34.660 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:34.661 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:34.685 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.684 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.682 +03:30 [INF] Received HTTP response headers after 40.8031ms - 200
2024-12-16 21:23:34.724 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.730 +03:30 [INF] End processing HTTP request after 215.9773ms - 200
2024-12-16 21:23:34.745 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:34.684 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:34.686 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 97252.8269ms
2024-12-16 21:23:34.704 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:34.664 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:34.665 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.666 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.667 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.668 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:34.669 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.670 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.671 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.672 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.673 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.674 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.674 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.683 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.473 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.473 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.474 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:34.752 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:23:34.751 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1501.6258ms.
2024-12-16 21:23:34.795 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:23:34.812 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:34.753 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 97651.2672ms
2024-12-16 21:23:34.835 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:34.751 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:34.867 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:34.874 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:34.882 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:34.907 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.914 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:34.926 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:34.934 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:34.921 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.750 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:35.001 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:34.984 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.757 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:34.758 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.079 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:34.759 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.760 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:34.761 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.762 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:34.763 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.764 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.765 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.766 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.767 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.101 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.102 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:34.773 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:34.773 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:34.774 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.108 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.109 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.514 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.407 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.408 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:35.092 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2832.5745ms
2024-12-16 21:23:35.094 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.142 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:35.132 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.142 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.092 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.094 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.095 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.096 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.096 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.097 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.098 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.099 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.100 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.100 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.105 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.768 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.164 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.165 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.107 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.166 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.776 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.168 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.111 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.150 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.409 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.409 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:35.152 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:35.153 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.187 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 97724.8541ms
2024-12-16 21:23:35.195 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.154 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.154 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.220 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.219 +03:30 [INF] Received HTTP response headers after 530.9499ms - 200
2024-12-16 21:23:35.233 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.239 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.158 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.237 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.238 +03:30 [INF] End processing HTTP request after 781.34ms - 200
2024-12-16 21:23:35.155 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.241 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.159 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.160 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.160 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.161 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.255 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.256 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.163 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.166 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:34.772 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.259 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:35.167 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.110 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.172 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:34.505 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:35.172 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.151 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.173 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.213 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:35.213 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:34.410 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:34.449 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:35.261 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.106 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:35.249 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.251 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.248 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.251 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.252 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.294 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.254 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.292 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.292 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.293 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.294 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.307 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.297 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.254 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.309 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.310 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.311 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.311 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.258 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.305 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.306 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.307 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.334 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.308 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.305 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.337 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.336 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.339 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.347 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.346 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.361 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.366 +03:30 [INF] Received HTTP response headers after 44.8172ms - 200
2024-12-16 21:23:35.369 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.373 +03:30 [INF] End processing HTTP request after 80.6402ms - 200
2024-12-16 21:23:35.379 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.349 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.393 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:35.393 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1007.7253ms.
2024-12-16 21:23:35.406 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:35.393 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.400 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.413 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.412 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:35.437 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.412 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:35.253 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.309 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.321 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.257 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.448 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.449 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.257 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.314 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.260 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.444 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.445 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:35.446 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.447 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.464 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.465 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.466 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.163 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.462 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:35.461 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.461 +03:30 [INF] Received HTTP response headers after 239.5942ms - 200
2024-12-16 21:23:35.464 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.479 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.452 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.477 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:35.478 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.479 +03:30 [INF] End processing HTTP request after 386.1948ms - 200
2024-12-16 21:23:35.489 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.476 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.447 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.162 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.468 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.452 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.453 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.455 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.509 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.261 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.289 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.262 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.512 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.513 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.266 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.267 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.268 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.269 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.289 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:35.273 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:34.449 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:31.179 +03:30 [INF] End processing HTTP request after 1509.1141ms - 200
2024-12-16 21:23:31.183 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 21:23:35.522 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.523 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.190 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:35.498 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.499 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.550 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.551 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.564 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.497 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:35.499 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.500 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.501 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.497 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.574 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.502 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.507 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.576 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.577 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.578 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.510 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.572 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.571 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.569 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.572 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:35.589 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.588 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.573 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.618 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.634 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.573 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.661 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.690 +03:30 [INF] Received HTTP response headers after 275.6474ms - 200
2024-12-16 21:23:35.718 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.734 +03:30 [INF] End processing HTTP request after 384.6608ms - 200
2024-12-16 21:23:35.749 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.765 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.768 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.772 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.763 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2369.0793ms
2024-12-16 21:23:35.690 +03:30 [INF] Received HTTP response headers after 277.0279ms - 200
2024-12-16 21:23:35.691 +03:30 [INF] Received HTTP response headers after 100.5395ms - 200
2024-12-16 21:23:35.575 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.501 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.576 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.778 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.779 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.780 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.291 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:35.775 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.774 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.774 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.776 +03:30 [INF] End processing HTTP request after 396.6732ms - 200
2024-12-16 21:23:35.791 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.790 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:35.793 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.776 +03:30 [INF] End processing HTTP request after 225.5067ms - 200
2024-12-16 21:23:35.777 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.778 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:35.805 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:23:35.806 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 81170.6952ms
2024-12-16 21:23:35.806 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.807 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1050.3184ms.
2024-12-16 21:23:35.846 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.853 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:35.865 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_ChangeTracker()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:35.877 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:35.807 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:35.883 +03:30 [INF] Received HTTP response headers after 535.2321ms - 200
2024-12-16 21:23:35.821 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.790 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.588 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:35.889 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.510 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.782 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.580 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.511 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.514 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.265 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.266 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.886 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:35.886 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:35.904 +03:30 [INF] Received HTTP response headers after 45.1171ms - 200
2024-12-16 21:23:35.905 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:35.887 +03:30 [INF] End processing HTTP request after 580.2337ms - 200
2024-12-16 21:23:35.888 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.888 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.892 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.916 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.893 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.913 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:35.913 +03:30 [INF] End processing HTTP request after 106.2818ms - 200
2024-12-16 21:23:35.912 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.912 +03:30 [INF] Received HTTP response headers after 292.7541ms - 200
2024-12-16 21:23:35.914 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.915 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.915 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:35.508 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.938 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.939 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.894 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.895 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.896 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:35.896 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.898 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.514 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.515 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.515 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.934 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 565.5739ms.
2024-12-16 21:23:35.934 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:35.933 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:35.955 +03:30 [INF] Received HTTP response headers after 293.0018ms - 200
2024-12-16 21:23:35.956 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:35.955 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:35.977 +03:30 [INF] End processing HTTP request after 404.2358ms - 200
2024-12-16 21:23:36.033 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:36.005 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.046 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:36.046 +03:30 [INF] Received HTTP response headers after 238.4956ms - 200
2024-12-16 21:23:36.062 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:36.075 +03:30 [INF] End processing HTTP request after 500.5807ms - 200
2024-12-16 21:23:36.040 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.061 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.040 +03:30 [INF] Received HTTP response headers after 247.8992ms - 200
2024-12-16 21:23:35.935 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:35.935 +03:30 [INF] End processing HTTP request after 363.1928ms - 200
2024-12-16 21:23:35.936 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.094 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:35.937 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.088 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:36.089 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.121 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:36.125 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.089 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.128 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.149 +03:30 [INF] Received HTTP response headers after 54.564ms - 200
2024-12-16 21:23:36.143 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.192 +03:30 [INF] End processing HTTP request after 256.5383ms - 200
2024-12-16 21:23:36.091 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.255 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 961.9632ms.
2024-12-16 21:23:36.285 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1620.0728ms
2024-12-16 21:23:36.255 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:36.271 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.088 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2146.22ms
2024-12-16 21:23:36.092 +03:30 [INF] End processing HTTP request after 319.7632ms - 200
2024-12-16 21:23:36.093 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.093 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.937 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.256 +03:30 [INF] Received HTTP response headers after 92.8006ms - 200
2024-12-16 21:23:36.294 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:36.293 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:36.293 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.296 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:36.295 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.295 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.296 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 957.392ms.
2024-12-16 21:23:36.297 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.297 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.314 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.299 +03:30 [INF] End processing HTTP request after 174.8803ms - 200
2024-12-16 21:23:36.309 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:36.310 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:36.308 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.311 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:36.311 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.312 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:36.313 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:36.313 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.293 +03:30 [INF] Received HTTP response headers after 84.254ms - 200
2024-12-16 21:23:36.307 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:36.338 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.939 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:35.920 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:36.332 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.333 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.330 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:36.331 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 79676.2704ms
2024-12-16 21:23:36.329 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:36.334 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.334 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 82720.0677ms
2024-12-16 21:23:36.336 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:36.336 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.337 +03:30 [INF] End processing HTTP request after 247.9074ms - 200
2024-12-16 21:23:36.338 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.329 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 755.2403ms.
2024-12-16 21:23:35.976 +03:30 [INF] Received HTTP response headers after 283.6246ms - 200
2024-12-16 21:23:36.348 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:36.367 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:23:35.893 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.940 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.941 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.942 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:35.942 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:35.945 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:35.946 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.947 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:35.949 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:23:36.377 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:36.378 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:36.379 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:36.380 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:35.522 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:35.550 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:31.186 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.188 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.569 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'IServiceProvider'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ThrowHelper.ThrowObjectDisposedException()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 24
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:31.192 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:31.197 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.388 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.202 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.354 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.356 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:36.355 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.360 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:36.360 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.364 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:23:36.363 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:36.364 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.355 +03:30 [INF] Received HTTP response headers after 258.8434ms - 200
2024-12-16 21:23:36.364 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 864.2475ms.
2024-12-16 21:23:36.365 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.366 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:36.409 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:36.408 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.432 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:36.411 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.433 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.451 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.469 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.484 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.500 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.515 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.558 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2172.297ms
2024-12-16 21:23:36.531 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.559 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.468 +03:30 [INF] Received HTTP response headers after 549.6791ms - 200
2024-12-16 21:23:36.412 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.413 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.413 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:23:36.414 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:36.415 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.415 +03:30 [INF] End processing HTTP request after 500.1801ms - 200
2024-12-16 21:23:36.416 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:23:36.430 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:36.366 +03:30 [INF] End processing HTTP request after 865.6336ms - 200
2024-12-16 21:23:36.367 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.340 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:36.578 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.369 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:36.372 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:36.373 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:23:36.374 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:36.582 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:36.376 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:36.376 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:36.380 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:35.518 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.519 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:35.520 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:35.521 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:36.381 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.382 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:36.382 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:36.386 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:36.567 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.567 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.604 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.566 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.620 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.568 +03:30 [INF] End processing HTTP request after 675.8908ms - 200
2024-12-16 21:23:36.569 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.571 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.572 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.572 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:36.630 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.631 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:36.632 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.632 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.633 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.634 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.635 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.636 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:36.573 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.643 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.643 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 81001.187ms
2024-12-16 21:23:36.695 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.644 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.644 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.645 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.646 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.647 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.665 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.775 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.776 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.642 +03:30 [INF] Received HTTP response headers after 225.518ms - 200
2024-12-16 21:23:36.576 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:36.778 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:36.778 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:36.779 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:23:36.368 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:36.771 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.797 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 21:23:36.771 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.812 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.843 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.857 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.873 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.7295ms - processed: 0 items - remaining: 2 items
2024-12-16 21:23:36.887 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.873 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.772 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.773 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.774 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.775 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.769 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 2309.5431ms
2024-12-16 21:23:36.912 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.953 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:23:36.934 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.940 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.948 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.953 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.777 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.574 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.575 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:23:36.967 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:23:36.967 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:23:36.576 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.577 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.579 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.961 +03:30 [INF] Received HTTP response headers after 42.3178ms - 200
2024-12-16 21:23:36.961 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.963 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.964 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.965 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.965 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:23:36.966 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.966 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.990 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.778 +03:30 [INF] End processing HTTP request after 439.5973ms - 200
2024-12-16 21:23:36.985 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.985 +03:30 [INF] End processing HTTP request after 340.1699ms - 200
2024-12-16 21:23:46.907 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 21:25:28.024 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:43:22.627 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1186737.8961ms.
2024-12-16 21:43:22.626 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0063ms - processed: 0 items - remaining: 4 items
2024-12-16 21:23:37.047 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:25:28.024 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 21:23:36.986 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.987 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.988 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:36.988 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 79311.5201ms
2024-12-16 21:23:36.989 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:23:37.035 +03:30 [INF] Received HTTP response headers after 44.8133ms - 200
2024-12-16 21:23:36.968 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:23:36.992 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:23:36.901 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1802.2879ms
2024-12-16 21:23:36.968 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:32.150 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.984 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:43:32.146 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.143 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.139 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:43:32.143 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.144 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.228 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.249 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.280 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:43:32.229 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:43:32.280 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.327 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.204 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.147 +03:30 [INF] End processing HTTP request after 1195180.6533ms - 200
2024-12-16 21:43:32.383 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:43:32.384 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.471 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:43:32.384 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:32.405 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1196516.8007ms.
2024-12-16 21:43:32.148 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:43:32.148 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:34.479 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.481 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.478 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:43:34.480 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:43:34.554 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.482 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:43:34.513 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:32.149 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:34.597 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:43:34.597 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.595 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.658 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.689 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.599 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:43:34.735 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:43:34.736 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:43:34.736 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:43:34.737 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:43:32.166 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:43:34.595 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1199434.9462ms
2024-12-16 21:43:34.612 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:43:34.733 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1199627.6555ms
2024-12-16 21:43:34.734 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.735 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.867 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1199767.144ms
2024-12-16 21:43:34.869 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:34.897 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.891 +03:30 [INF] Received HTTP response headers after 291.8362ms - 200
2024-12-16 21:43:34.909 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:34.769 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:34.807 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1273576.8289ms
2024-12-16 21:43:32.382 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 331
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi.global::Cryptocurrency.Infrastructure.ServiceProxy.IExchangeRatesApi.GetExchangeRatesAsync(String access_key) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\IExchangeRatesApi.g.cs:line 50
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 51
2024-12-16 21:23:37.490 +03:30 [INF] Received HTTP response headers after 520.8556ms - 200
2024-12-16 21:43:34.915 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1270643.9332ms
2024-12-16 21:43:34.914 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:43:34.916 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:43:34.916 +03:30 [INF] End processing HTTP request after 2768.1354ms - 200
2024-12-16 21:43:34.917 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1271659.1861ms
2024-12-16 21:43:34.971 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:43:34.972 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1198634.6021ms.
2024-12-16 21:43:34.918 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:43:34.968 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1199520.5569ms.
2024-12-16 21:43:34.934 +03:30 [INF] End processing HTTP request after 1198567.011ms - 200
2024-12-16 21:43:34.778 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:23:36.782 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:43:35.915 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:43:35.916 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:43:41.001 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:43:35.917 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1276711.1037ms
2024-12-16 21:43:35.918 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:43:41.002 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:43:35.920 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:43:41.001 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:43:39.994 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:23:36.579 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.580 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.581 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.058 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.059 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:43:41.060 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.586 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:43:41.054 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:43:41.055 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:43:41.054 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:43:41.055 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:41.056 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:41.056 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:43:41.057 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.058 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.077 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:43:41.078 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:23:36.586 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:43:41.073 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:43:41.074 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:43:41.089 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:43:41.090 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:43:41.090 +03:30 [INF] Executing BadRequestObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse'.
2024-12-16 21:43:41.077 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:43:41.074 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:41.089 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:43:41.075 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:41.202 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:43:41.246 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1206483.644ms
2024-12-16 21:43:41.076 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.278 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:41.296 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.330 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1281113.6741ms
2024-12-16 21:43:41.392 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1206292.9328ms
2024-12-16 21:43:41.346 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:43:41.109 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.088 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:43:41.396 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:43:41.395 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:42.351 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:43:42.842 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1280598.2402ms
2024-12-16 21:43:43.323 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 4 items
2024-12-16 21:43:42.842 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:43:41.406 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:43:43.324 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:43:41.069 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:43:45.027 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:45.035 +03:30 [INF] Received HTTP response headers after 3813.7967ms - 200
2024-12-16 21:43:46.452 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:43:49.727 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:49.727 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:43:52.208 +03:30 [INF] End processing HTTP request after 11152.5696ms - 200
2024-12-16 21:43:52.206 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:43:52.209 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:52.226 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:52.232 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:53.236 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:43:53.246 +03:30 [INF] Received HTTP response headers after 1036.0532ms - 200
2024-12-16 21:43:53.257 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:53.259 +03:30 [INF] End processing HTTP request after 8232.588ms - 200
2024-12-16 21:43:52.255 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:53.260 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:54.018 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:43:54.018 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:43:54.028 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:54.027 +03:30 [INF] Received HTTP response headers after 789.8157ms - 200
2024-12-16 21:43:54.043 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:54.040 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0644ms - processed: 0 items - remaining: 4 items
2024-12-16 21:43:54.048 +03:30 [INF] End processing HTTP request after 1839.1159ms - 200
2024-12-16 21:43:52.211 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:23:36.583 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:23:36.375 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:43:41.088 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:43:41.069 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:36.587 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:36.588 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:43:54.069 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:43:54.070 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:23:36.590 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.590 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:23:36.591 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:43:54.071 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:43:54.064 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:43:54.064 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:43:54.128 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:54.134 +03:30 [INF] Received HTTP response headers after 85.4267ms - 200
2024-12-16 21:43:54.170 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:43:54.173 +03:30 [INF] End processing HTTP request after 145.7364ms - 200
2024-12-16 21:43:54.065 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:43:54.224 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12826.635ms.
2024-12-16 21:43:57.190 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:43:57.213 +03:30 [INF] Received HTTP response headers after 3940.041ms - 200
2024-12-16 21:43:57.234 +03:30 [INF] Received HTTP response headers after 3035.3777ms - 200
2024-12-16 21:43:59.231 +03:30 [INF] Received HTTP response headers after 5212.5715ms - 200
2024-12-16 21:43:59.232 +03:30 [INF] End processing HTTP request after 5103.8514ms - 200
2024-12-16 21:43:59.248 +03:30 [INF] End processing HTTP request after 5991.2835ms - 200
2024-12-16 21:43:57.961 +03:30 [INF] Received HTTP response headers after 3825.4764ms - 200
2024-12-16 21:44:08.531 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:44:08.535 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:44:09.811 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:44:08.529 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17450.9631ms.
2024-12-16 21:44:10.743 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:44:11.572 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:44:13.831 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:44:13.832 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:44:14.968 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:44:14.968 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:44:09.812 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 4 items
2024-12-16 21:44:08.532 +03:30 [INF] End processing HTTP request after 16320.2671ms - 200
2024-12-16 21:43:57.234 +03:30 [INF] End processing HTTP request after 5007.9695ms - 200
2024-12-16 21:43:57.196 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:43:54.237 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:43:54.066 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:43:54.067 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:43:54.067 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:43:54.068 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:43:54.102 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:44:14.978 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:23:36.589 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:43:54.071 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:44:08.530 +03:30 [ERR] An unexpected error occurred in GetCryptoSymbolRatesAsync.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at Refit.RequestBuilderImplementation.<>c__DisplayClass15_0`2.<<BuildCancellableTaskFuncForMethod>b__0>d.MoveNext() in c:\temp\releaser\refit\Refit\RequestBuilderImplementation.cs:line 331
--- End of stack trace from previous location ---
   at Refit.Implementation.Generated.CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi.global::Cryptocurrency.Infrastructure.ServiceProxy.IExchangeRatesApi.GetExchangeRatesAsync(String access_key) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\InterfaceStubGeneratorV2\Refit.Generator.InterfaceStubGeneratorV2\IExchangeRatesApi.g.cs:line 50
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetOrAddCacheAsync[T](String cacheKey, Func`1 fetchFunc, TimeSpan expiration)
   at Cryptocurrency.Application.Crypto.CryptoApplication.GetCryptoSymbolRatesAsync(String cryptoCode, Int32 userId) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 51
2024-12-16 21:43:54.074 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:44:14.966 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:44:14.967 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:14.969 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:44:10.745 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:08.531 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32610.0144ms.
2024-12-16 21:44:14.971 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:44:14.972 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 21:44:14.973 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:44:15.040 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:44:15.040 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:44:15.041 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:44:14.976 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:14.977 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:44:14.979 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:23:36.588 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:44:14.979 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:44:14.980 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:44:15.046 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:44:15.047 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:44:15.048 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:23:36.565 +03:30 [INF] Received HTTP response headers after 250.6806ms - 200
2024-12-16 21:23:36.388 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:36.408 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:44:15.036 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.036 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:44:15.035 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.069 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.124 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.037 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.038 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:44:15.039 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:44:15.040 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:44:15.042 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:44:14.974 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:15.176 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.173 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1239593.2613ms
2024-12-16 21:44:15.174 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.175 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.244 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.177 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:44:15.309 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:44:15.179 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:44:15.197 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:15.305 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1239794.1367ms
2024-12-16 21:44:15.307 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.306 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:44:15.308 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.309 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.310 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:44:15.178 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 21:44:15.312 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:44:15.327 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.327 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:44:15.328 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.329 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.329 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:44:15.326 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:44:14.975 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:44:14.975 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:15.043 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:15.043 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:44:15.350 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:15.351 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:15.045 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:44:15.048 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:44:15.033 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1245368.4431ms.
2024-12-16 21:44:15.009 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:23:36.630 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:23:36.630 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:44:15.049 +03:30 [INF] End processing HTTP request after 1238751.719ms - 200
2024-12-16 21:44:15.068 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:44:15.344 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.344 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1307524.6123ms
2024-12-16 21:44:15.345 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.346 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:15.347 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:44:16.309 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:44:16.324 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:16.328 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.078 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.444 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:16.329 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:16.324 +03:30 [INF] Received HTTP response headers after 1013.1091ms - 200
2024-12-16 21:44:17.933 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:44:15.347 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:44:16.317 +03:30 [INF] Received HTTP response headers after 987.4989ms - 200
2024-12-16 21:44:15.343 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:44:17.955 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:17.955 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:15.350 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:44:15.352 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:44:17.958 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:44:15.044 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:44:17.948 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.949 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.950 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.971 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.972 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.953 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.953 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1309116.5542ms
2024-12-16 21:44:17.954 +03:30 [INF] End processing HTTP request after 2914.741ms - 200
2024-12-16 21:44:17.956 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:44:15.348 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:17.969 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.970 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.972 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:17.947 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1242437.8498ms
2024-12-16 21:44:17.950 +03:30 [INF] End processing HTTP request after 2910.8187ms - 200
2024-12-16 21:44:17.973 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:18.823 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:18.824 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:18.825 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:18.820 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:44:18.825 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:44:19.494 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:19.494 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:20.225 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:20.572 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:19.495 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:19.491 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 21:44:19.874 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:44:20.980 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:20.981 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:28.084 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.595 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:20.982 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:20.979 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:44:29.599 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:18.826 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35498.9725ms.
2024-12-16 21:44:19.492 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:26.807 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:44:29.602 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 4 items
2024-12-16 21:44:18.820 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:44:18.822 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:29.597 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.598 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.598 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.643 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:01.424 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:44:29.650 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.600 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:29.595 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 21:45:03.175 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:45:03.191 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.211 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:44:26.807 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1320509.4658ms
2024-12-16 21:44:29.601 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:44:29.602 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:01.423 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:44:17.976 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32940.7034ms.
2024-12-16 21:45:03.865 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:45:03.868 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.869 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.872 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:45:03.877 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:45:03.874 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 4 items
2024-12-16 21:44:29.615 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:44:29.615 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:44:15.349 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:17.957 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:45:03.882 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:15.044 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:17.969 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:44:15.353 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:44:15.353 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:44:15.354 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:44:15.358 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:44:15.359 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:44:15.360 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:44:15.361 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1239861.1709ms.
2024-12-16 21:44:16.309 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:44:15.068 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:23:31.200 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:23:36.391 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.205 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.895 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:45:03.893 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.876 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.877 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.878 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:45:03.932 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:45:03.874 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:45:03.879 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:45:03.880 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:45:03.881 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:45:03.882 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:44:17.967 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:45:03.883 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 21:45:03.884 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:45:03.888 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:45:03.941 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:45:03.890 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:45:03.942 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:45:03.891 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.892 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.893 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 21:45:03.922 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:45:03.894 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.913 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:45:03.905 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 21:23:31.207 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:03.943 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 21:45:03.931 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.932 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.934 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:45:03.873 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.968 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.969 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.063 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.017 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:03.935 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:45:04.099 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:45:04.099 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:45:04.100 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 21:45:03.938 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:45:04.101 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:45:03.939 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:45:04.097 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.096 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.096 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1287727.7969ms
2024-12-16 21:45:04.098 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.100 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 21:45:03.935 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:04.112 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.113 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.210 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.113 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:04.114 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.131 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:03.936 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:45:04.243 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.242 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.243 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:45:04.246 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.241 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 1288727.2857ms
2024-12-16 21:45:04.257 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:45:03.937 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 21:45:04.110 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:45:03.938 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:45:04.111 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:45:03.940 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:45:04.267 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 21:45:04.268 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 21:45:03.942 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:45:03.891 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 21:45:03.967 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 21:45:04.271 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 21:45:03.945 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 21:45:04.272 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 21:45:04.273 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 21:45:03.930 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:45:03.948 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 21:45:03.966 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 21:45:04.259 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.261 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.262 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1356949.3143ms
2024-12-16 21:45:04.262 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.263 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 21:45:04.264 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:45:04.265 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:45:04.265 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:45:04.266 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:04.289 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:04.269 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:45:04.283 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.284 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.286 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.287 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 21:45:04.287 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:45:04.288 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 21:45:04.303 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.304 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.305 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.305 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 499 null application/json; charset=utf-8 1354458.1566ms
2024-12-16 21:45:04.288 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:04.319 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:04.302 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 21:45:04.316 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.316 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.334 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.317 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.339 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.359 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.367 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:18.743 +03:30 [ERR] Saving crypto symbol or history has error
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'ApplicationContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Cryptocurrency.Infrastructure.Repositories.CryptoRepository.SaveCryptoSymbolAsync(CryptoSymbol cryptoSymbol) in D:\Projects\CryptoCurrency\Cryptocurrency.Infrastructure\Repositories\CryptoRepository.cs:line 25
   at Cryptocurrency.Application.Crypto.CryptoApplication.SaveCryptoSymbolAndHistory(String cryptoCode, Int32 userId, Dictionary`2 exchangeRates) in D:\Projects\CryptoCurrency\Cryptocurrency.Application\Crypto\CryptoApplication.cs:line 160
2024-12-16 21:45:18.755 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.378 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:18.851 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:18.880 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:18.916 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:18.933 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 21:45:04.314 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 21:45:04.315 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 21:45:18.990 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 21:45:19.010 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 21:45:19.048 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 21:45:19.062 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:19.027 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 21:45:19.079 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 21:45:19.086 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 21:45:18.743 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 4 items
2024-12-16 21:45:04.267 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:01:58.007 +03:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-16 22:01:58.073 +03:30 [DBG] Hosting starting
2024-12-16 22:01:58.105 +03:30 [INF] User profile is available. Using 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-16 22:01:58.111 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-0d0ec42d-d794-44d3-a87a-f0af0c5f979a.xml'.
2024-12-16 22:01:58.119 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-3925336f-5e61-4e30-88d2-e43ae4c829c3.xml'.
2024-12-16 22:01:58.125 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-7c19cd74-54ba-4bf1-80c1-540bf1b5b1da.xml'.
2024-12-16 22:01:58.128 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-9e46a897-4211-4749-a41a-fc10bc40ed96.xml'.
2024-12-16 22:01:58.129 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-f019c0bf-0a74-4c94-875e-34fe2f8ed086.xml'.
2024-12-16 22:01:58.133 +03:30 [DBG] Found key {0d0ec42d-d794-44d3-a87a-f0af0c5f979a}.
2024-12-16 22:01:58.137 +03:30 [DBG] Found key {3925336f-5e61-4e30-88d2-e43ae4c829c3}.
2024-12-16 22:01:58.138 +03:30 [DBG] Found key {7c19cd74-54ba-4bf1-80c1-540bf1b5b1da}.
2024-12-16 22:01:58.139 +03:30 [DBG] Found key {9e46a897-4211-4749-a41a-fc10bc40ed96}.
2024-12-16 22:01:58.139 +03:30 [DBG] Found key {f019c0bf-0a74-4c94-875e-34fe2f8ed086}.
2024-12-16 22:01:58.144 +03:30 [DBG] Considering key {3925336f-5e61-4e30-88d2-e43ae4c829c3} with expiration date 2025-03-08 18:52:05Z as default key.
2024-12-16 22:01:58.147 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 22:01:58.149 +03:30 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-16 22:01:58.152 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 22:01:58.158 +03:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-16 22:01:58.160 +03:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-16 22:01:58.161 +03:30 [DBG] Using key {3925336f-5e61-4e30-88d2-e43ae4c829c3} as the default key.
2024-12-16 22:01:58.163 +03:30 [DBG] Key ring with default key {3925336f-5e61-4e30-88d2-e43ae4c829c3} was loaded during application startup.
2024-12-16 22:01:58.349 +03:30 [INF] Now listening on: https://localhost:7014
2024-12-16 22:01:58.350 +03:30 [INF] Now listening on: http://localhost:5139
2024-12-16 22:01:58.351 +03:30 [DBG] Loaded hosting startup assembly Cryptocurrency.Api
2024-12-16 22:01:58.352 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-12-16 22:01:58.352 +03:30 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-16 22:01:58.353 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-16 22:01:58.382 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2024-12-16 22:01:58.384 +03:30 [INF] Hosting environment: Development
2024-12-16 22:01:58.385 +03:30 [INF] Content root path: D:\Projects\CryptoCurrency\Cryptocurrency.Api
2024-12-16 22:01:58.385 +03:30 [DBG] Hosting started
2024-12-16 22:01:58.446 +03:30 [DBG] Connection id "0HN8TVVME0CSK" received FIN.
2024-12-16 22:01:58.446 +03:30 [DBG] Connection id "0HN8TVVME0CSJ" received FIN.
2024-12-16 22:01:58.452 +03:30 [DBG] Connection id "0HN8TVVME0CSJ" accepted.
2024-12-16 22:01:58.452 +03:30 [DBG] Connection id "0HN8TVVME0CSK" accepted.
2024-12-16 22:01:58.455 +03:30 [DBG] Connection id "0HN8TVVME0CSJ" started.
2024-12-16 22:01:58.457 +03:30 [DBG] Connection id "0HN8TVVME0CSK" started.
2024-12-16 22:01:58.583 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:01:58.583 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:01:58.831 +03:30 [DBG] Connection id "0HN8TVVME0CSK" stopped.
2024-12-16 22:01:58.847 +03:30 [DBG] Connection id "0HN8TVVME0CSJ" stopped.
2024-12-16 22:01:58.856 +03:30 [DBG] Connection id "0HN8TVVME0CSK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:01:58.867 +03:30 [DBG] Connection id "0HN8TVVME0CSJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:01:58.895 +03:30 [DBG] Connection id "0HN8TVVME0CSL" accepted.
2024-12-16 22:01:58.896 +03:30 [DBG] Connection id "0HN8TVVME0CSL" started.
2024-12-16 22:01:58.947 +03:30 [DBG] Connection 0HN8TVVME0CSL established using the following protocol: "Tls13"
2024-12-16 22:01:58.988 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/index.html - null null
2024-12-16 22:01:59.158 +03:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-16 22:01:59.172 +03:30 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-16 22:01:59.173 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:01:59.222 +03:30 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-16 22:01:59.223 +03:30 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-16 22:01:59.237 +03:30 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-16 22:01:59.238 +03:30 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-16 22:01:59.241 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/index.html - 200 null text/html;charset=utf-8 255.6515ms
2024-12-16 22:01:59.356 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_vs/browserLink - null null
2024-12-16 22:01:59.356 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - null null
2024-12-16 22:01:59.376 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - 200 13771 application/javascript; charset=utf-8 19.9706ms
2024-12-16 22:01:59.400 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9509ms
2024-12-16 22:01:59.412 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - null null
2024-12-16 22:01:59.414 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/favicon-16x16.png - null null
2024-12-16 22:01:59.414 +03:30 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-12-16 22:01:59.418 +03:30 [DBG] No candidates found for the request path '/swagger/favicon-16x16.png'
2024-12-16 22:01:59.420 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:01:59.422 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:01:59.467 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - null null
2024-12-16 22:01:59.551 +03:30 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2024-12-16 22:01:59.551 +03:30 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2024-12-16 22:01:59.551 +03:30 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-16 22:01:59.557 +03:30 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-12-16 22:01:59.561 +03:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-12-16 22:01:59.562 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:01:59.566 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/favicon-16x16.png - 499 665 image/png 152.2461ms
2024-12-16 22:01:59.569 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/favicon-32x32.png - 499 628 image/png 157.4663ms
2024-12-16 22:01:59.633 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.7501ms
2024-12-16 22:02:12.779 +03:30 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-16 22:02:12.887 +03:30 [DBG] Hosting starting
2024-12-16 22:02:12.927 +03:30 [INF] User profile is available. Using 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-16 22:02:12.938 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-0d0ec42d-d794-44d3-a87a-f0af0c5f979a.xml'.
2024-12-16 22:02:12.946 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-3925336f-5e61-4e30-88d2-e43ae4c829c3.xml'.
2024-12-16 22:02:12.947 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-7c19cd74-54ba-4bf1-80c1-540bf1b5b1da.xml'.
2024-12-16 22:02:12.948 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-9e46a897-4211-4749-a41a-fc10bc40ed96.xml'.
2024-12-16 22:02:12.950 +03:30 [DBG] Reading data from file 'C:\Users\New Server\AppData\Local\ASP.NET\DataProtection-Keys\key-f019c0bf-0a74-4c94-875e-34fe2f8ed086.xml'.
2024-12-16 22:02:12.955 +03:30 [DBG] Found key {0d0ec42d-d794-44d3-a87a-f0af0c5f979a}.
2024-12-16 22:02:12.960 +03:30 [DBG] Found key {3925336f-5e61-4e30-88d2-e43ae4c829c3}.
2024-12-16 22:02:12.962 +03:30 [DBG] Found key {7c19cd74-54ba-4bf1-80c1-540bf1b5b1da}.
2024-12-16 22:02:12.963 +03:30 [DBG] Found key {9e46a897-4211-4749-a41a-fc10bc40ed96}.
2024-12-16 22:02:12.964 +03:30 [DBG] Found key {f019c0bf-0a74-4c94-875e-34fe2f8ed086}.
2024-12-16 22:02:12.971 +03:30 [DBG] Considering key {3925336f-5e61-4e30-88d2-e43ae4c829c3} with expiration date 2025-03-08 18:52:05Z as default key.
2024-12-16 22:02:12.974 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 22:02:12.977 +03:30 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-16 22:02:12.979 +03:30 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-16 22:02:12.984 +03:30 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-16 22:02:12.986 +03:30 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-16 22:02:12.990 +03:30 [DBG] Using key {3925336f-5e61-4e30-88d2-e43ae4c829c3} as the default key.
2024-12-16 22:02:12.991 +03:30 [DBG] Key ring with default key {3925336f-5e61-4e30-88d2-e43ae4c829c3} was loaded during application startup.
2024-12-16 22:02:13.165 +03:30 [INF] Now listening on: https://localhost:7014
2024-12-16 22:02:13.166 +03:30 [INF] Now listening on: http://localhost:5139
2024-12-16 22:02:13.166 +03:30 [DBG] Loaded hosting startup assembly Cryptocurrency.Api
2024-12-16 22:02:13.167 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-12-16 22:02:13.169 +03:30 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-16 22:02:13.171 +03:30 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-16 22:02:13.171 +03:30 [DBG] Connection id "0HN8TVVQQE422" received FIN.
2024-12-16 22:02:13.177 +03:30 [DBG] Connection id "0HN8TVVQQE422" accepted.
2024-12-16 22:02:13.178 +03:30 [DBG] Connection id "0HN8TVVQQE422" started.
2024-12-16 22:02:13.275 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:02:13.322 +03:30 [DBG] Connection id "0HN8TVVQQE422" stopped.
2024-12-16 22:02:13.326 +03:30 [DBG] Connection id "0HN8TVVQQE422" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:02:13.329 +03:30 [DBG] Connection id "0HN8TVVQQE423" accepted.
2024-12-16 22:02:13.332 +03:30 [DBG] Connection id "0HN8TVVQQE423" started.
2024-12-16 22:02:13.361 +03:30 [INF] Application started. Press Ctrl+C to shut down.
2024-12-16 22:02:13.371 +03:30 [INF] Hosting environment: Development
2024-12-16 22:02:13.372 +03:30 [INF] Content root path: D:\Projects\CryptoCurrency\Cryptocurrency.Api
2024-12-16 22:02:13.373 +03:30 [DBG] Hosting started
2024-12-16 22:02:13.403 +03:30 [DBG] Connection 0HN8TVVQQE423 established using the following protocol: "Tls13"
2024-12-16 22:02:13.451 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/index.html - null null
2024-12-16 22:02:13.613 +03:30 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-16 22:02:13.625 +03:30 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-16 22:02:13.626 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:02:13.664 +03:30 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-16 22:02:13.667 +03:30 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-16 22:02:13.679 +03:30 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-16 22:02:13.681 +03:30 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-16 22:02:13.683 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/index.html - 200 null text/html;charset=utf-8 237.8689ms
2024-12-16 22:02:13.792 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - null null
2024-12-16 22:02:13.792 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/_vs/browserLink - null null
2024-12-16 22:02:13.806 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_framework/aspnetcore-browser-refresh.js - 200 13771 application/javascript; charset=utf-8 13.6618ms
2024-12-16 22:02:13.836 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.0159ms
2024-12-16 22:02:13.914 +03:30 [INF] Request starting HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - null null
2024-12-16 22:02:13.917 +03:30 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-16 22:02:13.919 +03:30 [DBG] Request did not match any endpoints
2024-12-16 22:02:14.011 +03:30 [INF] Request finished HTTP/2 GET https://localhost:7014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.0458ms
2024-12-16 22:02:16.169 +03:30 [DBG] Connection id "0HN8TVVQQE424" received FIN.
2024-12-16 22:02:16.169 +03:30 [DBG] Connection id "0HN8TVVQQE424" accepted.
2024-12-16 22:02:16.172 +03:30 [DBG] Connection id "0HN8TVVQQE424" started.
2024-12-16 22:02:16.172 +03:30 [DBG] Connection id "0HN8TVVQQE425" accepted.
2024-12-16 22:02:16.193 +03:30 [DBG] Connection id "0HN8TVVQQE425" started.
2024-12-16 22:02:16.233 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:02:16.237 +03:30 [DBG] Connection 0HN8TVVQQE425 established using the following protocol: "Tls13"
2024-12-16 22:02:16.240 +03:30 [DBG] Connection id "0HN8TVVQQE424" stopped.
2024-12-16 22:02:16.242 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 22:02:16.243 +03:30 [DBG] Connection id "0HN8TVVQQE424" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:02:16.248 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:02:16.251 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:02:16.252 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:02:16.254 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 22:02:16.388 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 22:02:16.391 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 22:02:16.393 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:02:16.408 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 22:02:16.410 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 22:02:16.411 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 22:02:16.412 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 22:02:16.413 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 22:02:16.414 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 22:02:16.430 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:02:16.501 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:02:16.511 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 22:02:16.513 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 22:02:16.515 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:02:16.516 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:02:16.518 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 22:02:16.522 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 22:02:16.563 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 22:02:16.578 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 22:02:16.612 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:02:16.613 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:02:17.881 +03:30 [INF] Received HTTP response headers after 1265.0976ms - 200
2024-12-16 22:02:17.883 +03:30 [INF] End processing HTTP request after 1272.323ms - 200
2024-12-16 22:02:17.909 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 22:02:17.914 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:02:17.915 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:02:18.475 +03:30 [INF] Received HTTP response headers after 558.9067ms - 200
2024-12-16 22:02:18.476 +03:30 [INF] End processing HTTP request after 562.1973ms - 200
2024-12-16 22:02:21.179 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 22:02:21.536 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1943.2491ms.
2024-12-16 22:02:23.117 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 22:02:23.121 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 22:02:23.122 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 22:02:23.122 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 22:02:23.123 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 22:02:23.124 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 22:02:23.132 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 6715.257ms
2024-12-16 22:02:23.134 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:02:23.136 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 6894.1102ms
2024-12-16 22:02:23.174 +03:30 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-16 22:02:23.617 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:02:23.637 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.670 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.676 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.689 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.697 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.699 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.700 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.701 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.702 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.703 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.705 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.706 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.707 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.708 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.709 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.710 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.711 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:23.715 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:02:23.718 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:02:23.728 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:02:23.776 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:02:23.784 +03:30 [DBG] Created DbConnection. (6ms).
2024-12-16 22:02:23.787 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:02:23.796 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.798 +03:30 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-12-16 22:02:23.824 +03:30 [DBG] Began transaction with isolation level 'Serializable'.
2024-12-16 22:02:23.831 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.835 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-12-16 22:02:23.838 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-12-16 22:02:23.843 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:02:23.860 +03:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:02:23.871 +03:30 [DBG] The foreign key property 'CryptoSymbol.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.875 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.878 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.880 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.881 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.883 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.886 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.891 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 26ms reading results.
2024-12-16 22:02:23.894 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.896 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:02:23.897 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-12-16 22:02:23.899 +03:30 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:02:23.902 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:02:23.906 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.907 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.908 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:02:23.910 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.911 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:02:23.912 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-12-16 22:02:23.914 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.916 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.920 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.922 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.923 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:02:23.924 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.925 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:02:23.926 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-12-16 22:02:23.927 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.931 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.933 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.935 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.936 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 3ms reading results.
2024-12-16 22:02:23.938 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.939 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:02:23.941 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-12-16 22:02:23.942 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.946 +03:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.950 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.953 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.954 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 4ms reading results.
2024-12-16 22:02:23.956 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:23.957 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:02:23.958 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-12-16 22:02:23.960 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.962 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:02:23.965 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:23.967 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:23.968 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 3ms reading results.
2024-12-16 22:02:23.971 +03:30 [DBG] Committing transaction.
2024-12-16 22:02:24.051 +03:30 [DBG] Committed transaction.
2024-12-16 22:02:24.053 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:24.056 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (2ms).
2024-12-16 22:02:24.058 +03:30 [DBG] Disposing transaction.
2024-12-16 22:02:24.065 +03:30 [DBG] An entity of type 'CryptoSymbol' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.067 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.069 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.071 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.072 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.074 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.075 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 6 entities written to the database.
2024-12-16 22:02:24.077 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:02:24.079 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:02:24.081 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 22:02:24.856 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:02:24.859 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'SearchHistory.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.863 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.864 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:02:24.865 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:02:24.868 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:02:24.871 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:02:24.871 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 22:02:24.872 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:02:24.873 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:24.874 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:02:24.874 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:02:24.875 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:02:24.876 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:02:24.877 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:02:24.880 +03:30 [DBG] The foreign key property 'SearchHistory.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:02:24.908 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:24.909 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 29ms reading results.
2024-12-16 22:02:24.910 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:02:24.911 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:02:24.913 +03:30 [DBG] An entity of type 'SearchHistory' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:02:24.914 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 1 entities written to the database.
2024-12-16 22:02:24.915 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:02:24.915 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:02:24.916 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:02:25.518 +03:30 [INF] End saving Crypto symbol and history for user
2024-12-16 22:03:05.619 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 22:03:05.622 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:03:05.623 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:03:05.624 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:03:05.625 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 22:03:05.646 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 22:03:05.648 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 22:03:05.649 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:03:05.650 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 22:03:05.652 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 22:03:05.653 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 22:03:05.654 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 22:03:05.655 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 22:03:05.657 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 22:03:05.659 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:03:05.660 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:03:05.662 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 22:03:05.663 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 22:03:05.664 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:03:05.665 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:03:05.666 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 22:03:05.667 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 22:03:05.678 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 22:03:10.801 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 22:03:10.803 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:03:10.804 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:03:11.089 +03:30 [INF] Received HTTP response headers after 284.6284ms - 200
2024-12-16 22:03:11.090 +03:30 [INF] End processing HTTP request after 287.1131ms - 200
2024-12-16 22:03:31.039 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 22:03:34.581 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:03:34.582 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:03:35.123 +03:30 [INF] Received HTTP response headers after 538.9682ms - 200
2024-12-16 22:03:35.124 +03:30 [INF] End processing HTTP request after 543.3517ms - 200
2024-12-16 22:04:14.088 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68408.7749ms.
2024-12-16 22:04:15.449 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 22:04:15.478 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 22:04:15.522 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 22:04:15.523 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 22:04:15.524 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 22:04:15.525 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 22:04:15.526 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 22:04:15.527 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 69868.7472ms
2024-12-16 22:04:15.528 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:04:15.528 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:04:15.529 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.530 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 69911.3001ms
2024-12-16 22:04:15.531 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.534 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.536 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.537 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.538 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.539 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.540 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.541 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.542 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.542 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.543 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.544 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.545 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.546 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.547 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.548 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.549 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:04:15.550 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:04:15.552 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:04:15.553 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:04:15.554 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 22:04:15.556 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:04:15.557 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.557 +03:30 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-12-16 22:04:15.558 +03:30 [DBG] Began transaction with isolation level 'Serializable'.
2024-12-16 22:04:15.559 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.559 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.560 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.561 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:04:15.562 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:04:15.564 +03:30 [DBG] The foreign key property 'CryptoSymbol.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.565 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.566 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.567 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.568 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.569 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.570 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.572 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 7ms reading results.
2024-12-16 22:04:15.573 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.574 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.575 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.576 +03:30 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:04:15.577 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:04:15.578 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.579 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.580 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 1ms reading results.
2024-12-16 22:04:15.581 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.582 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.583 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.584 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.585 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.587 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.588 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.589 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:04:15.590 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.590 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.591 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.592 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.593 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.595 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.596 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.597 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 1ms reading results.
2024-12-16 22:04:15.598 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.598 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.599 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.600 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.601 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.603 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.604 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.605 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:04:15.607 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.607 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.608 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.609 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.610 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:04:15.612 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.613 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.614 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:04:15.615 +03:30 [DBG] Committing transaction.
2024-12-16 22:04:15.655 +03:30 [DBG] Committed transaction.
2024-12-16 22:04:15.656 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.657 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 22:04:15.659 +03:30 [DBG] Disposing transaction.
2024-12-16 22:04:15.660 +03:30 [DBG] An entity of type 'CryptoSymbol' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.661 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.662 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.663 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.664 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.666 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.668 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 6 entities written to the database.
2024-12-16 22:04:15.669 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:04:15.670 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:04:15.671 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:04:15.673 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:04:15.674 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'SearchHistory.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.675 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.676 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:04:15.677 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:04:15.678 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:04:15.679 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:04:15.679 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 22:04:15.680 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:04:15.682 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.683 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:04:15.684 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:04:15.684 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:04:15.686 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:04:15.689 +03:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:04:15.690 +03:30 [DBG] The foreign key property 'SearchHistory.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:04:15.714 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.715 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 25ms reading results.
2024-12-16 22:04:15.716 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:04:15.717 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:04:15.718 +03:30 [DBG] An entity of type 'SearchHistory' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:04:15.719 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 1 entities written to the database.
2024-12-16 22:04:15.720 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:04:15.721 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:04:15.722 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:04:15.723 +03:30 [INF] End saving Crypto symbol and history for user
2024-12-16 22:04:16.444 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyICoinMarketCapApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 22:04:16.444 +03:30 [DBG] HttpMessageHandler expired after 120000ms for client 'Refit.Implementation.Generated+CryptocurrencyInfrastructureServiceProxyIExchangeRatesApi, Cryptocurrency.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
2024-12-16 22:04:26.443 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 22:04:26.446 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0425ms - processed: 0 items - remaining: 2 items
2024-12-16 22:04:31.452 +03:30 [DBG] Connection id "0HN8TVVQQE426" received FIN.
2024-12-16 22:04:31.454 +03:30 [DBG] Connection id "0HN8TVVQQE426" accepted.
2024-12-16 22:04:31.455 +03:30 [DBG] Connection id "0HN8TVVQQE426" started.
2024-12-16 22:04:31.455 +03:30 [DBG] Connection id "0HN8TVVQQE427" accepted.
2024-12-16 22:04:31.482 +03:30 [DBG] Connection id "0HN8TVVQQE427" started.
2024-12-16 22:04:31.514 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:04:31.514 +03:30 [DBG] Connection 0HN8TVVQQE427 established using the following protocol: "Tls13"
2024-12-16 22:04:31.516 +03:30 [DBG] Connection id "0HN8TVVQQE426" stopped.
2024-12-16 22:04:31.517 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - null null
2024-12-16 22:04:31.517 +03:30 [DBG] Connection id "0HN8TVVQQE426" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:04:31.524 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:04:31.526 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)' with route pattern 'api/crypto/GetCrypto/{code}' is valid for the request path '/api/crypto/GetCrypto/btc'
2024-12-16 22:04:31.527 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:04:31.528 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 22:04:31.549 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 22:04:31.550 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 22:04:31.551 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:04:31.552 +03:30 [INF] Route matched with {action = "GetCryptoRates", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCryptoRates(System.String) on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 22:04:31.553 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 22:04:31.554 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 22:04:31.554 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 22:04:31.556 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 22:04:31.556 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 22:04:31.558 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:04:31.560 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:04:31.561 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' ...
2024-12-16 22:04:31.561 +03:30 [DBG] Attempting to bind parameter 'code' of type 'System.String' using the name 'code' in request data ...
2024-12-16 22:04:31.562 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:04:31.563 +03:30 [DBG] Done attempting to bind parameter 'code' of type 'System.String'.
2024-12-16 22:04:31.564 +03:30 [DBG] Attempting to validate the bound parameter 'code' of type 'System.String' ...
2024-12-16 22:04:31.565 +03:30 [DBG] Done attempting to validate the bound parameter 'code' of type 'System.String'.
2024-12-16 22:04:31.575 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 22:04:34.312 +03:30 [INF] Cache miss for key: CryptoPrice_BTC. Fetching data...
2024-12-16 22:04:34.314 +03:30 [INF] Start processing HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:04:34.314 +03:30 [INF] Sending HTTP request GET https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=BTC
2024-12-16 22:04:35.230 +03:30 [INF] Received HTTP response headers after 914.7028ms - 200
2024-12-16 22:04:35.232 +03:30 [INF] End processing HTTP request after 918.48ms - 200
2024-12-16 22:04:37.267 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 22:04:37.278 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 2 items
2024-12-16 22:05:33.012 +03:30 [INF] Cache miss for key: ExchangeRates. Fetching data...
2024-12-16 22:05:33.026 +03:30 [DBG] Connection id "0HN8TVVQQE423" received FIN.
2024-12-16 22:05:33.028 +03:30 [INF] Start processing HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:05:33.032 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 22:05:33.062 +03:30 [INF] Sending HTTP request GET http://api.exchangeratesapi.io/v1/latest?access_key=f98dab572235feed5c651a18c2c13228
2024-12-16 22:05:33.069 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 2 items
2024-12-16 22:05:33.062 +03:30 [DBG] Connection id "0HN8TVVQQE423" is closed. The last processed stream ID was 9.
2024-12-16 22:05:33.064 +03:30 [DBG] The connection queue processing loop for 0HN8TVVQQE423 completed.
2024-12-16 22:05:33.094 +03:30 [DBG] Connection id "0HN8TVVQQE423" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:05:33.108 +03:30 [DBG] Connection id "0HN8TVVQQE423" stopped.
2024-12-16 22:05:33.818 +03:30 [INF] Received HTTP response headers after 747.3147ms - 200
2024-12-16 22:05:33.820 +03:30 [INF] End processing HTTP request after 792.4858ms - 200
2024-12-16 22:05:33.822 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62245.4836ms.
2024-12-16 22:05:36.329 +03:30 [INF] Start saving Crypto symbol and history for user
2024-12-16 22:05:36.331 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 22:05:36.332 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:05:36.335 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 22:05:36.337 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'CryptoSymbol.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.337 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 22:05:36.338 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.339 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 22:05:36.340 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.340 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 22:05:36.341 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.342 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 22:05:36.343 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.344 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api) in 64786.5906ms
2024-12-16 22:05:36.345 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.345 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetCryptoRates (Cryptocurrency.Api)'
2024-12-16 22:05:36.346 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.347 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetCrypto/btc - 200 null application/json; charset=utf-8 64830.0303ms
2024-12-16 22:05:36.348 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.351 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.352 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.354 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.355 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.357 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.358 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.358 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'ExchangeRates.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.359 +03:30 [DBG] The navigation 'ExchangeRates.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.360 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.361 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:05:36.362 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:05:36.362 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:05:36.363 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:05:36.364 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 22:05:36.365 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:36.365 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.366 +03:30 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-12-16 22:05:36.367 +03:30 [DBG] Began transaction with isolation level 'Serializable'.
2024-12-16 22:05:36.367 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.368 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.369 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.370 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:05:36.372 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CryptoSymbols" ("Symbol", "UserId")
VALUES (@p0, @p1)
RETURNING "Id";
2024-12-16 22:05:36.374 +03:30 [DBG] The foreign key property 'CryptoSymbol.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.375 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.375 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.376 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.377 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.378 +03:30 [DBG] The foreign key property 'ExchangeRates.CryptoSymbolId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.379 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.380 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 5ms reading results.
2024-12-16 22:05:36.381 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.381 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.382 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.383 +03:30 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:05:36.384 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p2, @p3, @p4, @p5)
RETURNING "Id";
2024-12-16 22:05:36.386 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.386 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.388 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:05:36.389 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.390 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.391 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.392 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.394 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.395 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.396 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.397 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 1ms reading results.
2024-12-16 22:05:36.398 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.399 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.400 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.401 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.402 +03:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.404 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.405 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.406 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 1ms reading results.
2024-12-16 22:05:36.407 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.408 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.409 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.409 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.411 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.412 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.413 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.414 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 1ms reading results.
2024-12-16 22:05:36.415 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.415 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.416 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.417 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.418 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 3), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExchangeRates" ("CryptoSymbolId", "Currency", "Price", "Timestamp")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2024-12-16 22:05:36.420 +03:30 [DBG] The foreign key property 'ExchangeRates.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.421 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.423 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 2ms reading results.
2024-12-16 22:05:36.424 +03:30 [DBG] Committing transaction.
2024-12-16 22:05:36.452 +03:30 [DBG] Committed transaction.
2024-12-16 22:05:36.453 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.454 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 22:05:36.455 +03:30 [DBG] Disposing transaction.
2024-12-16 22:05:36.457 +03:30 [DBG] An entity of type 'CryptoSymbol' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.458 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.459 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.461 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.462 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.463 +03:30 [DBG] An entity of type 'ExchangeRates' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.464 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 6 entities written to the database.
2024-12-16 22:05:36.465 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:05:36.465 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:36.466 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:05:36.467 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:05:36.468 +03:30 [DBG] 'ApplicationContext' generated a temporary value for the property 'SearchHistory.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.469 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.470 +03:30 [DBG] SaveChanges starting for 'ApplicationContext'.
2024-12-16 22:05:36.471 +03:30 [DBG] DetectChanges starting for 'ApplicationContext'.
2024-12-16 22:05:36.472 +03:30 [DBG] DetectChanges completed for 'ApplicationContext'.
2024-12-16 22:05:36.473 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:05:36.473 +03:30 [DBG] Created DbConnection. (0ms).
2024-12-16 22:05:36.474 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:36.475 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.476 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:36.476 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:36.477 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:36.478 +03:30 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:05:36.480 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SearchHistories" ("CryptoSymbolId", "SearchedAt", "UserId")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-12-16 22:05:36.481 +03:30 [DBG] The foreign key property 'SearchHistory.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-16 22:05:36.503 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.504 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 23ms reading results.
2024-12-16 22:05:36.505 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:36.506 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:05:36.507 +03:30 [DBG] An entity of type 'SearchHistory' tracked by 'ApplicationContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:36.508 +03:30 [DBG] SaveChanges completed for 'ApplicationContext' with 1 entities written to the database.
2024-12-16 22:05:36.509 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:05:36.510 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:36.510 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (0ms).
2024-12-16 22:05:36.511 +03:30 [INF] End saving Crypto symbol and history for user
2024-12-16 22:05:43.078 +03:30 [DBG] Connection id "0HN8TVVQQE429" accepted.
2024-12-16 22:05:43.078 +03:30 [DBG] Connection id "0HN8TVVQQE428" received FIN.
2024-12-16 22:05:43.079 +03:30 [DBG] Connection id "0HN8TVVQQE429" started.
2024-12-16 22:05:43.079 +03:30 [DBG] Connection id "0HN8TVVQQE42A" accepted.
2024-12-16 22:05:43.089 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 22:05:43.101 +03:30 [DBG] Connection id "0HN8TVVQQE42A" started.
2024-12-16 22:05:43.120 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 2 items
2024-12-16 22:05:43.141 +03:30 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-16 22:05:43.142 +03:30 [DBG] Connection 0HN8TVVQQE42A established using the following protocol: "Tls13"
2024-12-16 22:05:43.146 +03:30 [DBG] Connection id "0HN8TVVQQE429" stopped.
2024-12-16 22:05:43.148 +03:30 [INF] Request starting HTTP/2 GET https://localhost/api/crypto/GetLastSearch - null null
2024-12-16 22:05:43.149 +03:30 [DBG] Connection id "0HN8TVVQQE429" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-16 22:05:43.151 +03:30 [DBG] 1 candidate(s) found for the request path '/api/crypto/GetLastSearch'
2024-12-16 22:05:43.153 +03:30 [DBG] Endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)' with route pattern 'api/crypto/GetLastSearch' is valid for the request path '/api/crypto/GetLastSearch'
2024-12-16 22:05:43.155 +03:30 [DBG] Request matched endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 22:05:43.156 +03:30 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-16 22:05:43.176 +03:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-12-16 22:05:43.178 +03:30 [INF] Bearer was not authenticated. Failure message: IDX10504: Unable to validate signature, token does not have a signature: '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
2024-12-16 22:05:43.180 +03:30 [INF] Executing endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 22:05:43.183 +03:30 [INF] Route matched with {action = "GetLastSearch", controller = "Crypto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastSearch() on controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api).
2024-12-16 22:05:43.184 +03:30 [DBG] Execution plan of authorization filters (in the following order): ["Cryptocurrency.Api.Infrastructure.Authorization.FilterAuthorizeAttribute+AuthorizeAttributeFilterAttribute"]
2024-12-16 22:05:43.185 +03:30 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-16 22:05:43.186 +03:30 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2024-12-16 22:05:43.187 +03:30 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-16 22:05:43.188 +03:30 [DBG] Execution plan of result filters (in the following order): ["None"]
2024-12-16 22:05:43.189 +03:30 [DBG] Executing controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:05:43.190 +03:30 [DBG] Executed controller factory for controller Cryptocurrency.Api.Controllers.CryptoController (Cryptocurrency.Api)
2024-12-16 22:05:43.199 +03:30 [INF] Executing action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) - Validation state: "Valid"
2024-12-16 22:05:43.202 +03:30 [INF] Cache miss for key: SearchHistory_1. Fetching data...
2024-12-16 22:05:43.211 +03:30 [DBG] Entity Framework Core 8.0.11 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.11' with options: None
2024-12-16 22:05:43.234 +03:30 [DBG] Compiling query expression: 
'DbSet<SearchHistory>()
    .Include(sh => sh.CryptoSymbol)
    .ThenInclude(ex => ex.ExchangeRates)
    .Where(sh => sh.UserId == __userId_0)'
2024-12-16 22:05:43.287 +03:30 [DBG] Including navigation: 'SearchHistory.CryptoSymbol'.
2024-12-16 22:05:43.290 +03:30 [DBG] Including navigation: 'CryptoSymbol.ExchangeRates'.
2024-12-16 22:05:43.393 +03:30 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SearchHistory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: SearchHistory.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SearchHistory.CryptoSymbolId (int) Required FK Index, 1], [Property: SearchHistory.SearchedAt (DateTime) Required, 2], [Property: SearchHistory.UserId (int) Required, 3] }
            1 -> Dictionary<IProperty, int> { [Property: CryptoSymbol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: CryptoSymbol.Symbol (string) Required MaxLength(10), 5], [Property: CryptoSymbol.UserId (int) Required, 6] }
            2 -> 0
            3 -> 4
            4 -> Dictionary<IProperty, int> { [Property: ExchangeRates.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ExchangeRates.CryptoSymbolId (int) Required FK Index, 8], [Property: ExchangeRates.Currency (string) Required MaxLength(5), 9], [Property: ExchangeRates.Price (decimal) Required, 10], [Property: ExchangeRates.Timestamp (DateTime) Required, 11] }
            5 -> 7
        SELECT s.Id, s.CryptoSymbolId, s.SearchedAt, s.UserId, c.Id, c.Symbol, c.UserId, e.Id, e.CryptoSymbolId, e.Currency, e.Price, e.Timestamp
        FROM SearchHistories AS s
        INNER JOIN CryptoSymbols AS c ON s.CryptoSymbolId == c.Id
        LEFT JOIN ExchangeRates AS e ON c.Id == e.CryptoSymbolId
        WHERE s.UserId == @__userId_0
        ORDER BY s.Id ASC, c.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SearchHistory>, 
    Cryptocurrency.Infrastructure.Data.ApplicationContext, 
    False, 
    False, 
    True
)'
2024-12-16 22:05:43.414 +03:30 [DBG] Creating DbConnection.
2024-12-16 22:05:43.415 +03:30 [DBG] Created DbConnection. (1ms).
2024-12-16 22:05:43.416 +03:30 [DBG] Opening connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:43.417 +03:30 [DBG] Opened connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:43.418 +03:30 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-16 22:05:43.419 +03:30 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-16 22:05:43.420 +03:30 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-16 22:05:43.421 +03:30 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 22:05:43.422 +03:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CryptoSymbolId", "s"."SearchedAt", "s"."UserId", "c"."Id", "c"."Symbol", "c"."UserId", "e"."Id", "e"."CryptoSymbolId", "e"."Currency", "e"."Price", "e"."Timestamp"
FROM "SearchHistories" AS "s"
INNER JOIN "CryptoSymbols" AS "c" ON "s"."CryptoSymbolId" = "c"."Id"
LEFT JOIN "ExchangeRates" AS "e" ON "c"."Id" = "e"."CryptoSymbolId"
WHERE "s"."UserId" = @__userId_0
ORDER BY "s"."Id", "c"."Id"
2024-12-16 22:05:43.426 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.429 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.430 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.433 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.434 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.435 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.438 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.440 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.440 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.441 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.442 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.443 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.443 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.444 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.445 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.446 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.447 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.447 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.448 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.449 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.450 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.451 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.452 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.452 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.453 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.454 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.455 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.455 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.456 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.459 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.460 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.460 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.461 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.462 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.463 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.464 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.465 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.466 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.468 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.469 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.470 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.470 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.471 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.472 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.473 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.474 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.475 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.476 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.477 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.478 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.478 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.479 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.481 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.482 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.483 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.484 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.485 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.486 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.486 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.487 +03:30 [DBG] Context 'ApplicationContext' started tracking 'SearchHistory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.488 +03:30 [DBG] The navigation 'SearchHistory.CryptoSymbol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.489 +03:30 [DBG] Context 'ApplicationContext' started tracking 'CryptoSymbol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.491 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.491 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.492 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.494 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.494 +03:30 [DBG] Context 'ApplicationContext' started tracking 'ExchangeRates' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-16 22:05:43.496 +03:30 [DBG] Closing data reader to 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:43.497 +03:30 [DBG] A data reader for 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db' is being disposed after spending 73ms reading results.
2024-12-16 22:05:43.499 +03:30 [DBG] Closing connection to database 'main' on server 'D:\Projects\CryptoCurrency\Cryptocurrency.Api\ecommerce.db'.
2024-12-16 22:05:43.500 +03:30 [DBG] Closed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 22:05:43.501 +03:30 [DBG] 'ApplicationContext' disposed.
2024-12-16 22:05:43.501 +03:30 [DBG] Disposing connection to database 'main' on server 'ecommerce.db'.
2024-12-16 22:05:43.502 +03:30 [DBG] Disposed connection to database 'main' on server 'ecommerce.db' (1ms).
2024-12-16 22:05:43.504 +03:30 [INF] Retrieved search history for userId: 1
2024-12-16 22:05:43.504 +03:30 [INF] Executed action method Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 304.1402ms.
2024-12-16 22:05:43.506 +03:30 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-16 22:05:43.507 +03:30 [DBG] No information found on request to perform content negotiation.
2024-12-16 22:05:43.508 +03:30 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-16 22:05:43.509 +03:30 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-16 22:05:43.510 +03:30 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-16 22:05:43.512 +03:30 [INF] Executing OkObjectResult, writing value of type 'Cryptocurrency.Api.Infrastructure.GeneralApiContracts.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Cryptocurrency.Application.Dtos.SearchHistoryDto, Cryptocurrency.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-16 22:05:43.524 +03:30 [INF] Executed action Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api) in 334.6374ms
2024-12-16 22:05:43.525 +03:30 [INF] Executed endpoint 'Cryptocurrency.Api.Controllers.CryptoController.GetLastSearch (Cryptocurrency.Api)'
2024-12-16 22:05:43.526 +03:30 [INF] Request finished HTTP/2 GET https://localhost/api/crypto/GetLastSearch - 200 null application/json; charset=utf-8 377.7868ms
2024-12-16 22:05:53.141 +03:30 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2024-12-16 22:05:53.143 +03:30 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2335ms - processed: 2 items - remaining: 0 items
